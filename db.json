{"meta":{"version":1,"warehouse":"4.0.0"},"models":{"Asset":[{"_id":"themes/butterfly/source/css/index.styl","path":"css/index.styl","modified":1,"renderable":1},{"_id":"themes/butterfly/source/css/var.styl","path":"css/var.styl","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/404.jpg","path":"img/404.jpg","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/favicon.png","path":"img/favicon.png","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/main.js","path":"js/main.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/friend_404.gif","path":"img/friend_404.gif","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/utils.js","path":"js/utils.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/tw_cn.js","path":"js/tw_cn.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/search/algolia.js","path":"js/search/algolia.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/search/local-search.js","path":"js/search/local-search.js","modified":1,"renderable":1},{"_id":"source/img/001.svg","path":"img/001.svg","modified":1,"renderable":0},{"_id":"source/img/Unity.jpg","path":"img/Unity.jpg","modified":1,"renderable":0},{"_id":"source/img/002.png","path":"img/002.png","modified":1,"renderable":0},{"_id":"source/img/003.png","path":"img/003.png","modified":1,"renderable":0},{"_id":"source/img/004.png","path":"img/004.png","modified":1,"renderable":0},{"_id":"source/img/default.jpg","path":"img/default.jpg","modified":1,"renderable":0},{"_id":"source/img/index.jpg","path":"img/index.jpg","modified":1,"renderable":0},{"_id":"source/img/head.jpg","path":"img/head.jpg","modified":1,"renderable":0},{"_id":"source/img/icon.png","path":"img/icon.png","modified":1,"renderable":0}],"Cache":[{"_id":"source/manifest.json","hash":"91bfe9b0570bf34df2f7761af7d6afce0759d119","modified":1655821581747},{"_id":"source/_posts/001_hexo.md","hash":"26bcc91af97f0fe2b0420cec95391959547644af","modified":1655821581691},{"_id":"source/_posts/002_unityRpg.md","hash":"fb17751ca90df4dde5573165de5ba9685667c442","modified":1655821581703},{"_id":"source/_posts/003_Inventory.md","hash":"37b34906a5152be64ded2f97ad0d8f76250bb7b6","modified":1655821581704},{"_id":"source/_posts/004_Dialog.md","hash":"8153f503e3c7b37ba7d270b8494ad47fe40c37c3","modified":1655821581706},{"_id":"source/categories/index.md","hash":"7dd0a1729da7f246a294191cce21e30f1211cf23","modified":1655821581716},{"_id":"source/img/001.svg","hash":"278ace714700f9c627a8ad14af94e8351867c5ce","modified":1655821581716},{"_id":"source/img/default.jpg","hash":"af65ad5916a8b24f21a310ad6e69acf209dd84ae","modified":1655821581736},{"_id":"source/img/head.jpg","hash":"7a14fd517484a46f5507a2850e427ebee546fe74","modified":1655821581737},{"_id":"source/tags/index.md","hash":"f9a6f9d6cb23181e21fdd866b0da49d6a04bd1bf","modified":1655821581748},{"_id":"source/img/icon.png","hash":"ab67fc3eaa4eec233fadb7d2071119b5e9027538","modified":1655821581738},{"_id":"source/about/index.md","hash":"53caad53edc36cabde4bacd23b98715bf7ce3db1","modified":1655821581715},{"_id":"source/_posts/001_hexo/image-20210123190241565.png","hash":"d152093d011c35605560189dd13441024aefe7f2","modified":1655792836000},{"_id":"source/_posts/001_hexo/image-20210123190247657.png","hash":"d152093d011c35605560189dd13441024aefe7f2","modified":1655792836000},{"_id":"source/_posts/001_hexo/image-20210123190444101.png","hash":"d152093d011c35605560189dd13441024aefe7f2","modified":1655792836000},{"_id":"source/_posts/001_hexo/image-20210123203426310.png","hash":"44bc362bfd9cf9983b487054292930a67ec909a5","modified":1655792836000},{"_id":"source/_posts/001_hexo/image-20220110162645465.png","hash":"cdd9130531a1f1ddcf5a0bc793b15bfe43a55cb8","modified":1655792836000},{"_id":"source/_posts/001_hexo/image-20220110162452660.png","hash":"91216f13985eeca8c6a5a6d43498c948a85176a1","modified":1655792836000},{"_id":"source/_posts/001_hexo/image-20220110164357577.png","hash":"e76e6099266c562f7ae6d201bf5c5e71fa9560c9","modified":1655792836000},{"_id":"source/_posts/001_hexo/image-20220110165134907.png","hash":"63dae7b6443d460c4549e96ab60b738dace807a3","modified":1655792836000},{"_id":"source/_posts/001_hexo/image-20220110165549516.png","hash":"01e3fab92d67c84b9f5c88a89fd344257255c849","modified":1655792836000},{"_id":"source/_posts/001_hexo/image-20220111114426389.png","hash":"ae315e8d5e0e6ffc8a9f326591218d6c5bbe9197","modified":1655792836000},{"_id":"source/_posts/001_hexo/image-20220111112820182.png","hash":"e26b9dc3e9abda5cd2e0f652eb4dad38d064486b","modified":1655792836000},{"_id":"source/_posts/001_hexo/image-20220111114517951.png","hash":"627d433e6626318114d5b1ccc129d950f3e41db4","modified":1655792836000},{"_id":"source/_posts/001_hexo/image-20220111115043380.png","hash":"030dde867c45888793d3e88ebecd33016e02c2b8","modified":1655792836000},{"_id":"source/_posts/003_Inventory/image-20220603143654206.png","hash":"5df177108a0c1465a66daddf005ed477b577098f","modified":1655792928000},{"_id":"source/img/003.png","hash":"892057214119497402b8b48529fc968bc3ff85b8","modified":1655821581723},{"_id":"source/img/Unity.jpg","hash":"b711c84b83e19360542fe215fd877ffb87cd3eea","modified":1655821581735},{"_id":"source/img/002.png","hash":"83720acfe094da089d24348cb7886a2fe86760ea","modified":1655821581721},{"_id":"source/_posts/004_Dialog/image-20220604181812326.png","hash":"52ea7be6317c960b254284cf21c247acd3a032c4","modified":1655792928000},{"_id":"themes/butterfly/LICENSE","hash":"c8bc7df08db9dd3b39c2c2259a163a36cf2f6808","modified":1655821581751},{"_id":"themes/butterfly/README.md","hash":"d83c496aadb40f5bf9c67bdeba527353409bc559","modified":1655821581751},{"_id":"themes/butterfly/_config.yml","hash":"a06c8a50a49d14c8b53187239f4813a1463c6c64","modified":1655821581752},{"_id":"themes/butterfly/README_CN.md","hash":"fafeccf7b611e8d16d524d27558d942cc9fe0c2f","modified":1655821581752},{"_id":"themes/butterfly/package.json","hash":"f5f4bb2afaea72ba3b8843924750fb480a29619a","modified":1655821581793},{"_id":"themes/butterfly/.github/stale.yml","hash":"79b830939587a5c029b20db6615ba73907d60bb4","modified":1655821581750},{"_id":"themes/butterfly/languages/default.yml","hash":"335731ef259a3cec2499a2d5b050025ff4bdc608","modified":1655821581753},{"_id":"themes/butterfly/languages/en.yml","hash":"a96ab1bbe74e99ca2e4d67da9d83f442eb9b73af","modified":1655821581753},{"_id":"themes/butterfly/languages/zh-CN.yml","hash":"4adf079fb0170e3a8de6ddbb0392d6d1120030c4","modified":1655821581753},{"_id":"themes/butterfly/languages/zh-TW.yml","hash":"dcb10d62249bb149af8ad78db3ee6e342c6d6be7","modified":1655821581754},{"_id":"themes/butterfly/layout/archive.pug","hash":"2d5bf4b1755f89898c579c18d601be83d2bc8ebd","modified":1655821581755},{"_id":"themes/butterfly/layout/category.pug","hash":"bf979aec88d78b644fc5d31518f8679ad7625792","modified":1655821581755},{"_id":"themes/butterfly/layout/index.pug","hash":"648dcbdb3d145a710de81c909e000e8664d2ac9c","modified":1655821581792},{"_id":"themes/butterfly/layout/page.pug","hash":"bf2d6c6d2d156777b55292e51be02b0b3acf0af8","modified":1655821581792},{"_id":"themes/butterfly/layout/post.pug","hash":"fdbb508b5e6dec30fb8753c5a7fdd494410c4fc0","modified":1655821581792},{"_id":"themes/butterfly/layout/tag.pug","hash":"4bb5efc6dabdf1626685bf6771aaa1467155ae86","modified":1655821581793},{"_id":"themes/butterfly/.github/ISSUE_TEMPLATE/bug_report.yml","hash":"e1043b8f149371d5a4ab0f1306eabc2988bed071","modified":1655821581749},{"_id":"themes/butterfly/.github/ISSUE_TEMPLATE/config.yml","hash":"d9ff4bad9c9664e12729c7a531169a05698a3fd1","modified":1655821581749},{"_id":"themes/butterfly/.github/ISSUE_TEMPLATE/feature_request.yml","hash":"6e0f9470b18bd37d4891282ac73d61676b040e8c","modified":1655821581750},{"_id":"themes/butterfly/.github/workflows/publish.yml","hash":"e320b40c051bae1549156cd5ea4a51383cf78598","modified":1655821581750},{"_id":"themes/butterfly/scripts/filters/post_lazyload.js","hash":"5fd6c9659262dc8f61d87866d0417fd534292c88","modified":1655821581796},{"_id":"themes/butterfly/scripts/filters/random_cover.js","hash":"6c3b7d0874fa499800a4fd49894c481b05ec750c","modified":1655821581796},{"_id":"themes/butterfly/scripts/events/404.js","hash":"f1d1c378356b776e9b2a8411e6dca88dc8c3245c","modified":1655821581794},{"_id":"themes/butterfly/scripts/events/config.js","hash":"8c3fa850933e4165c3354dea7b82d6f738bd7186","modified":1655821581794},{"_id":"themes/butterfly/scripts/events/init.js","hash":"b3e05e3440b078f57391c113d6b0c8ecff112720","modified":1655821581794},{"_id":"themes/butterfly/scripts/events/stylus.js","hash":"218add7e9b39b6fb6e69921abb9e44891a6cc3ce","modified":1655821581795},{"_id":"themes/butterfly/scripts/events/welcome.js","hash":"b92cc4648cfe5fb28c58943727823d1178b73a4a","modified":1655821581795},{"_id":"themes/butterfly/scripts/helpers/aside_archives.js","hash":"4f712b4ea383b59a3122683db1d54c04a79ccc5d","modified":1655821581796},{"_id":"themes/butterfly/scripts/helpers/aside_categories.js","hash":"376e1884ea764404c38b1e73b16de0358ece519e","modified":1655821581797},{"_id":"themes/butterfly/scripts/helpers/inject_head_js.js","hash":"c445140fa16f19bf5fb617fa735504e7799d4d42","modified":1655821581797},{"_id":"themes/butterfly/scripts/helpers/page.js","hash":"384de3c04809ec5fa996e8aa0628f770cd4bff3e","modified":1655821581798},{"_id":"themes/butterfly/scripts/helpers/related_post.js","hash":"83bfb16ab8d440be04e1b1f889f6affa7ad65a67","modified":1655821581798},{"_id":"themes/butterfly/scripts/tag/button.js","hash":"44cca49ddc76921bb455465ef912cab46c993cef","modified":1655821581798},{"_id":"themes/butterfly/scripts/tag/flink.js","hash":"3ba7677969ff01fab06fc6713455ddc6861f0024","modified":1655821581799},{"_id":"themes/butterfly/scripts/tag/gallery.js","hash":"6d4cd2393945a9316339351cab588265f5c18d73","modified":1655821581799},{"_id":"themes/butterfly/scripts/tag/hide.js","hash":"e01a3967e5884881bab858b11635457df412de80","modified":1655821581799},{"_id":"themes/butterfly/scripts/tag/inlineImg.js","hash":"7641adb0d520c5ff29dd36fc1fb8617c52ecc9fb","modified":1655821581800},{"_id":"themes/butterfly/scripts/tag/mermaid.js","hash":"fd683ccc090db3122d77c7ee73e8d35dc8735ee3","modified":1655821581801},{"_id":"themes/butterfly/scripts/tag/label.js","hash":"551f1b8edc973bd8afc5cce2eae546f002fa84c3","modified":1655821581800},{"_id":"themes/butterfly/scripts/tag/note.js","hash":"420ba8b11e7316b4c09eb301d39814bc9bae9f90","modified":1655821581801},{"_id":"themes/butterfly/scripts/tag/timeline.js","hash":"4c7056d3cd56f10bd209d2ba4d3cc2027aad1440","modified":1655821581802},{"_id":"themes/butterfly/scripts/tag/tabs.js","hash":"08ea00791bd4738952234cb5d8360e119df6f875","modified":1655821581801},{"_id":"themes/butterfly/layout/includes/404.pug","hash":"aace9ddff469de4226e47a52ede1c81e66d66d5c","modified":1655821581756},{"_id":"themes/butterfly/layout/includes/additional-js.pug","hash":"ddea99847fd41323f183cd0c9dae3174c586f5b3","modified":1655821581756},{"_id":"themes/butterfly/layout/includes/footer.pug","hash":"8715948b93e7508b84d913be1969b28c6b067b9b","modified":1655821581756},{"_id":"themes/butterfly/layout/includes/head.pug","hash":"343f3cb328eb27ef04c0a4bf7fab44b1be76100a","modified":1655821581757},{"_id":"themes/butterfly/layout/includes/layout.pug","hash":"4473ba26e06a782e91ed181d0ceb83f8745aad1f","modified":1655821581763},{"_id":"themes/butterfly/layout/includes/pagination.pug","hash":"bb1847f45e713cc88b1c0a97035ec01f0209c995","modified":1655821581766},{"_id":"themes/butterfly/layout/includes/rightside.pug","hash":"205562ec188bfba5686c51af77486550d0927df5","modified":1655821581767},{"_id":"themes/butterfly/source/css/index.styl","hash":"c7924868adcb046b46498626a9223c7a7b3f2e30","modified":1655821581820},{"_id":"themes/butterfly/layout/includes/sidebar.pug","hash":"4f41fc46410e1e3018ff87e1d1a5c28be7258119","modified":1655821581767},{"_id":"themes/butterfly/source/css/var.styl","hash":"584ef7b18d5e677eb2e62f9b139097d3b714a993","modified":1655821581821},{"_id":"themes/butterfly/source/img/404.jpg","hash":"9d92d50e9a7cd6f6e364364cbd61dc02d9962634","modified":1655821581821},{"_id":"themes/butterfly/source/img/favicon.png","hash":"3cf89864b4f6c9b532522a4d260a2e887971c92d","modified":1655821581822},{"_id":"themes/butterfly/source/js/main.js","hash":"a2c1c55b5b8ec9a83cf6242ebc9ea9be95e1f0c1","modified":1655821581824},{"_id":"themes/butterfly/source/img/friend_404.gif","hash":"55a4efc7431d82bf68f6f6ebb162201e8a701833","modified":1655821581823},{"_id":"themes/butterfly/source/js/utils.js","hash":"fdb9e5b38f076953a2431b8f682388b030694b55","modified":1655821581826},{"_id":"themes/butterfly/source/js/tw_cn.js","hash":"4db1170be7a9360e2c5399d281b979da730df2a3","modified":1655821581825},{"_id":"themes/butterfly/layout/includes/head/Open_Graph.pug","hash":"07380718ed3af19a7e64b30e8c13726fe5983947","modified":1655821581757},{"_id":"themes/butterfly/layout/includes/head/analytics.pug","hash":"c1e45d4d0bd905ddcd2282de4fe89be92e67847d","modified":1655821581757},{"_id":"themes/butterfly/layout/includes/head/google_adsense.pug","hash":"f29123e603cbbcc6ce277d4e8f600ba67498077c","modified":1655821581758},{"_id":"themes/butterfly/layout/includes/head/noscript.pug","hash":"72efaa09ff60843567458bd54152e06f0cb2757e","modified":1655821581759},{"_id":"themes/butterfly/layout/includes/head/config.pug","hash":"8a3f9e674b44e6a92d4df22baca65d9d30007dc3","modified":1655821581758},{"_id":"themes/butterfly/layout/includes/head/config_site.pug","hash":"bd5dd5452e28a4fe94c3241a758ec6f4fdb7a149","modified":1655821581758},{"_id":"themes/butterfly/layout/includes/head/preconnect.pug","hash":"fc3e67e5ae4774d9e89964ba96beed28f34ee8f0","modified":1655821581759},{"_id":"themes/butterfly/layout/includes/head/pwa.pug","hash":"6dc2c9b85df9ab4f5b554305339fd80a90a6cf43","modified":1655821581760},{"_id":"themes/butterfly/layout/includes/head/site_verification.pug","hash":"5168caadc4cf541f5d6676a9c5e8ae47a948f9ad","modified":1655821581760},{"_id":"themes/butterfly/layout/includes/loading/loading.pug","hash":"dd8e6813976be64e80eba6562b54e74527ab306d","modified":1655821581763},{"_id":"themes/butterfly/layout/includes/loading/loading-js.pug","hash":"2e1ab0c2ca59a1ff5a5ba9b6ef60f3e34af5430c","modified":1655821581763},{"_id":"themes/butterfly/layout/includes/header/index.pug","hash":"3a2797d2744607ba6cdb5a02853851957c0f7e29","modified":1655821581761},{"_id":"themes/butterfly/layout/includes/header/menu_item.pug","hash":"ca8bcd90ad9467819330bfe7c02b76322754bccf","modified":1655821581761},{"_id":"themes/butterfly/layout/includes/header/post-info.pug","hash":"c65291a389a71fe4d903b44ca3083f8f4cb88655","modified":1655821581762},{"_id":"themes/butterfly/layout/includes/header/nav.pug","hash":"a9e56b1c41bf327859b0a7bcb8e72b458bd851b2","modified":1655821581761},{"_id":"themes/butterfly/layout/includes/page/categories.pug","hash":"5276a8d2835e05bd535fedc9f593a0ce8c3e8437","modified":1655821581765},{"_id":"themes/butterfly/layout/includes/header/social.pug","hash":"631ec7000fd4d6cfa2de118ee02ad8a42ffb34f5","modified":1655821581762},{"_id":"themes/butterfly/layout/includes/page/flink.pug","hash":"e2eba0fcb8332cb333b2aff9c76664e40e2e1974","modified":1655821581765},{"_id":"themes/butterfly/layout/includes/page/default-page.pug","hash":"e9459f122af7b733398578f9f0f8ab3c5e12a217","modified":1655821581765},{"_id":"themes/butterfly/layout/includes/page/tags.pug","hash":"8f43fdeaf8cff4a35bab74b48c963786ca015620","modified":1655821581765},{"_id":"themes/butterfly/layout/includes/mixins/article-sort.pug","hash":"971038debf539333b1687b4a1d87cf4fc965a846","modified":1655821581764},{"_id":"themes/butterfly/layout/includes/mixins/post-ui.pug","hash":"9c8e65939d048a579ea08d063c0f98550376f536","modified":1655821581764},{"_id":"themes/butterfly/layout/includes/post/post-copyright.pug","hash":"cc1f7ae8a7ce5445277215821092e712ec8cc296","modified":1655821581766},{"_id":"themes/butterfly/layout/includes/third-party/aplayer.pug","hash":"e939344fd389aeb11864ee697d5fd9b036d8325f","modified":1655821581768},{"_id":"themes/butterfly/layout/includes/post/reward.pug","hash":"594626a18b7efbf771232855dfbce143fb244bc6","modified":1655821581767},{"_id":"themes/butterfly/layout/includes/third-party/effect.pug","hash":"4e37535c63149708ecbedb262336014524ad8723","modified":1655821581778},{"_id":"themes/butterfly/layout/includes/third-party/pangu.pug","hash":"f0898509da70388b5c532f19e762756d74080200","modified":1655821581783},{"_id":"themes/butterfly/layout/includes/third-party/pjax.pug","hash":"78fea853d0ffbcb49df3aa454701476dbc8aec71","modified":1655821581783},{"_id":"themes/butterfly/layout/includes/third-party/subtitle.pug","hash":"7b5fea9e1c113cab4c75f9d31d8efebe70d82e7a","modified":1655821581786},{"_id":"themes/butterfly/layout/includes/third-party/prismjs.pug","hash":"08979afbfecb4476a5ae8e360947b92624d285b8","modified":1655821581784},{"_id":"themes/butterfly/layout/includes/widget/card_ad.pug","hash":"a8312b527493dabbadbb1280760168d3bc909a3b","modified":1655821581787},{"_id":"themes/butterfly/layout/includes/widget/card_archives.pug","hash":"73d33b6930e7944187a4b3403daf25d27077a2dd","modified":1655821581788},{"_id":"themes/butterfly/layout/includes/widget/card_announcement.pug","hash":"21e019bdc3b1e796bb00976bb29af2d51f873624","modified":1655821581788},{"_id":"themes/butterfly/layout/includes/widget/card_bottom_self.pug","hash":"1dba77d250eeebfb6e293d504352c7e9ea31980b","modified":1655821581788},{"_id":"themes/butterfly/layout/includes/widget/card_author.pug","hash":"08641633d38903351a7424baf9893d9038ba057d","modified":1655821581788},{"_id":"themes/butterfly/layout/includes/widget/card_categories.pug","hash":"66e383b4ef374951eb87dd1bf4cdb7a667193fb5","modified":1655821581789},{"_id":"themes/butterfly/layout/includes/widget/card_newest_comment.pug","hash":"c02b1779bd0ebca6749f195be096b6ca574bfa29","modified":1655821581789},{"_id":"themes/butterfly/layout/includes/widget/card_post_toc.pug","hash":"59d979702fa21d960443824198614d63aaf69662","modified":1655821581790},{"_id":"themes/butterfly/layout/includes/widget/card_tags.pug","hash":"9755cac8424dc578e9ec07dbcaa429fddbedd392","modified":1655821581790},{"_id":"themes/butterfly/layout/includes/widget/card_top_self.pug","hash":"7b5ae404a1205546b7de4be42291315cf918f2b3","modified":1655821581791},{"_id":"themes/butterfly/layout/includes/widget/card_recent_post.pug","hash":"471b20e71a19db1f5115727082e5188200c49383","modified":1655821581790},{"_id":"themes/butterfly/layout/includes/widget/card_webinfo.pug","hash":"62adef7998fb9bebc5891a49472cfea944a1bf7a","modified":1655821581791},{"_id":"themes/butterfly/source/css/_global/function.styl","hash":"f562648de515abc873609bfe9b9f799c8cf42b72","modified":1655821581802},{"_id":"themes/butterfly/layout/includes/widget/index.pug","hash":"5e0e9e9b2cd3c256d52423e2278e790aa387a53a","modified":1655821581791},{"_id":"themes/butterfly/source/css/_global/index.styl","hash":"b9d7d23dc8810542b8c8ffcbfbd3694318debcc6","modified":1655821581803},{"_id":"themes/butterfly/source/css/_highlight/highlight.styl","hash":"a2aa5caf338ff5323b6ff0601ebcc09e710d8398","modified":1655821581804},{"_id":"themes/butterfly/source/css/_layout/aside.styl","hash":"b224bed22ce063d0d74e1f135812e16fdba87bca","modified":1655821581807},{"_id":"themes/butterfly/source/css/_highlight/theme.styl","hash":"3c178608406c31d768af355ef1d7326da37cc75f","modified":1655821581806},{"_id":"themes/butterfly/source/css/_layout/chat.styl","hash":"f27ad7b5d781c98bcac5c12c2d70b69b830e0374","modified":1655821581807},{"_id":"themes/butterfly/source/css/_layout/comments.styl","hash":"0abe05309a186682772a94e5e759b63f8028e61a","modified":1655821581807},{"_id":"themes/butterfly/source/css/_layout/footer.styl","hash":"e931ef81754a7b9d999fa23d134c620e68e75491","modified":1655821581808},{"_id":"themes/butterfly/source/css/_layout/head.styl","hash":"f3aac52defb3497079a313e8c63ac2f7ee24dfbe","modified":1655821581808},{"_id":"themes/butterfly/source/css/_layout/loading.styl","hash":"844858ae87c7278996ce484c6b456db354c48764","modified":1655821581808},{"_id":"themes/butterfly/source/css/_layout/pagination.styl","hash":"bd099f7d3adef4b7edd24c0a25a07415b156e587","modified":1655821581809},{"_id":"themes/butterfly/source/css/_layout/post.styl","hash":"9f880a6fa91784a4d3e9ffb0d4607e8a74d4d929","modified":1655821581809},{"_id":"themes/butterfly/source/css/_layout/relatedposts.styl","hash":"6dcf19c0933c8828a439f801b0f4b256447dec07","modified":1655821581810},{"_id":"themes/butterfly/source/css/_layout/reward.styl","hash":"b5ba2c3339ad406ce611d12d3f8cc84f864fbc03","modified":1655821581810},{"_id":"themes/butterfly/source/css/_layout/sidebar.styl","hash":"7e9b65dcae7ac54e0183bc841fea0f4bd4d78e5c","modified":1655821581811},{"_id":"themes/butterfly/source/css/_layout/rightside.styl","hash":"1c1c585ba99cb4004956b5e98fc044260b456f99","modified":1655821581810},{"_id":"themes/butterfly/source/css/_layout/third-party.styl","hash":"e02b52bdd337c0ed3c9d3a507d1011403c38881d","modified":1655821581811},{"_id":"themes/butterfly/source/css/_mode/darkmode.styl","hash":"0bcd07ffbd2a86a1b24eaefabd7e278034b14ee2","modified":1655821581811},{"_id":"themes/butterfly/source/css/_page/404.styl","hash":"a7223a8fcc4fa7b81e552c9a2554be7df9de312e","modified":1655821581812},{"_id":"themes/butterfly/source/css/_mode/readmode.styl","hash":"1fed25162d7204480e9bcf476b3246e1717107ca","modified":1655821581812},{"_id":"themes/butterfly/source/css/_page/archives.styl","hash":"d72218cb5a6bfe048ae1c92009bd815a08a53d3a","modified":1655821581813},{"_id":"themes/butterfly/source/css/_page/categories.styl","hash":"68bc8cbea25dbb3cdc170f09f9b43ce130547717","modified":1655821581813},{"_id":"themes/butterfly/source/css/_page/flink.styl","hash":"ecc2b2e28c179eb9406fc2c6f00e141078249cdd","modified":1655821581814},{"_id":"themes/butterfly/source/css/_page/common.styl","hash":"a714776e3d585369f2285b6bb4e1564539c58d8b","modified":1655821581813},{"_id":"themes/butterfly/source/css/_page/homepage.styl","hash":"c42b872df237726483d93d6124b8751d4f64cf86","modified":1655821581814},{"_id":"themes/butterfly/source/css/_search/algolia.styl","hash":"d1398399eb7f1cc004fbcefa18f56188cc8fec8c","modified":1655821581815},{"_id":"themes/butterfly/source/css/_search/local-search.styl","hash":"45792c13c7c439d412b7dc597d74d24f3b598406","modified":1655821581816},{"_id":"themes/butterfly/source/css/_page/tags.styl","hash":"9e35f91847773b915c74a78b8aa66c7bdb950ad0","modified":1655821581814},{"_id":"themes/butterfly/source/css/_tags/button.styl","hash":"62da1de0d5b8453fcecbfacddb16985265638ba5","modified":1655821581816},{"_id":"themes/butterfly/source/css/_search/index.styl","hash":"cced94e70b4b90130cfa215582be2adbf883efba","modified":1655821581815},{"_id":"themes/butterfly/source/css/_tags/hexo.styl","hash":"985b183db7b7bfd8f9bdb60494549fb7f850348b","modified":1655821581817},{"_id":"themes/butterfly/source/css/_tags/note.styl","hash":"076cd87805207c9b5612ec9771f6994287f4c169","modified":1655821581818},{"_id":"themes/butterfly/source/css/_tags/gallery.styl","hash":"84c42716e833d2d1dd47195ea996803ffa0e58ec","modified":1655821581816},{"_id":"themes/butterfly/source/css/_tags/inlineImg.styl","hash":"5a873d01fabebcf7ddf7a6b1c2e2e5e2714097f4","modified":1655821581817},{"_id":"themes/butterfly/source/css/_tags/hide.styl","hash":"b7cf7753479fcf2fe07287ffdb0e568adbba4c18","modified":1655821581817},{"_id":"themes/butterfly/source/css/_tags/label.styl","hash":"2f83bd145b870d80d4b18b0ac603235229a5694e","modified":1655821581818},{"_id":"themes/butterfly/source/css/_tags/tabs.styl","hash":"ec81ea316c82b83d6aee31e52f248d329559d5d3","modified":1655821581819},{"_id":"themes/butterfly/source/css/_tags/timeline.styl","hash":"07ea7134db7a66c87658116f089fb1a2a6906563","modified":1655821581819},{"_id":"themes/butterfly/source/js/search/algolia.js","hash":"6e20ab5f90a0dd6eb6fdca58e69961bd2f16a632","modified":1655821581824},{"_id":"themes/butterfly/source/css/_third-party/normalize.min.css","hash":"8549829fb7d3c21cd9e119884962e8c463a4a267","modified":1655821581820},{"_id":"themes/butterfly/source/js/search/local-search.js","hash":"f72e002d56903a49c36174e77e42f88b8af8bd44","modified":1655821581825},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/disqus.pug","hash":"f4d21dcbc3b00eed9b1f604e132c4c6811a0a059","modified":1655821581768},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/index.pug","hash":"a18415004d03c0a1783eccac522fbcb6ce0ea1f1","modified":1655821581769},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/fb.pug","hash":"4eebb2d94ca75809ef0cf32d70f13e9bf1e87091","modified":1655821581768},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/valine.pug","hash":"da9075d781baad00b647b52b0fe2018e3a602cd3","modified":1655821581769},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/twikoo.pug","hash":"38b85d216d9377ddbaa2e5867e2f03805227237c","modified":1655821581769},{"_id":"themes/butterfly/layout/includes/third-party/chat/chatra.pug","hash":"f3f6eaecbcf9352342e259f4a5a3ad7160f31fc9","modified":1655821581770},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/waline.pug","hash":"6e5ccc9ea4346c71ad4cbf1e9f1cb83bb45e6f27","modified":1655821581770},{"_id":"themes/butterfly/layout/includes/third-party/chat/crisp.pug","hash":"b741b5e942481d779a8a1fe94c45154a62a6b748","modified":1655821581771},{"_id":"themes/butterfly/layout/includes/third-party/chat/index.pug","hash":"bb467bb22f3d0775b33f9eacbfc086ecb7831e78","modified":1655821581772},{"_id":"themes/butterfly/layout/includes/third-party/chat/daovoice.pug","hash":"e5af55cdb87d1ffd3d8702bc77097159acf95b54","modified":1655821581771},{"_id":"themes/butterfly/layout/includes/third-party/chat/gitter.pug","hash":"794ce3911f17d354b7196deb8c36d191afac63fb","modified":1655821581771},{"_id":"themes/butterfly/layout/includes/third-party/comments/disqus.pug","hash":"d5f81fd5443a1b09efb165b5f4447a35949d14ad","modified":1655821581773},{"_id":"themes/butterfly/layout/includes/third-party/chat/tidio.pug","hash":"cd7ab4a776be93eea96a6f6fd0a547977fbe1ea3","modified":1655821581772},{"_id":"themes/butterfly/layout/includes/third-party/comments/disqusjs.pug","hash":"5f921c64073f73ae1f2d80969f4d3905d91396ce","modified":1655821581773},{"_id":"themes/butterfly/layout/includes/third-party/comments/index.pug","hash":"414f876d28f8497d6d551363a89c5c69bf1533eb","modified":1655821581775},{"_id":"themes/butterfly/layout/includes/third-party/comments/facebook_comments.pug","hash":"a222477bddba3c646ee9b8560442c2cb204adb11","modified":1655821581774},{"_id":"themes/butterfly/layout/includes/third-party/comments/gitalk.pug","hash":"3df2f59c9552a1f2e6f0d50c4ae97e72c5392b59","modified":1655821581774},{"_id":"themes/butterfly/layout/includes/third-party/comments/giscus.pug","hash":"319463fc8ff993b798f2293b659b522ad7770cf0","modified":1655821581774},{"_id":"themes/butterfly/layout/includes/third-party/comments/js.pug","hash":"810e8ca2669433f649329859922aabbb30d76178","modified":1655821581776},{"_id":"themes/butterfly/layout/includes/third-party/comments/livere.pug","hash":"589f8503f264d4fda971c8daf2028f45c4f2867b","modified":1655821581776},{"_id":"themes/butterfly/layout/includes/third-party/comments/twikoo.pug","hash":"132c94a653232b8a43dfecac057f56e6f39ed27e","modified":1655821581777},{"_id":"themes/butterfly/layout/includes/third-party/comments/utterances.pug","hash":"d48d59ebf8c0142fb3c4592a0d35874f85e6fd4c","modified":1655821581777},{"_id":"themes/butterfly/layout/includes/third-party/comments/valine.pug","hash":"cba55cbbd0962bf84b8956195e686b0e158ed247","modified":1655821581777},{"_id":"themes/butterfly/layout/includes/third-party/comments/waline.pug","hash":"e45152e4ebc3fb2462916be93f98d18f0574f2d3","modified":1655821581778},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/disqus-comment.pug","hash":"cd1ce86441dc508e4c3dbf8b829046455ba8a6b4","modified":1655821581780},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/github-issues.pug","hash":"b2ede1f6b41026ebd233ac076a405889a6eec76b","modified":1655821581781},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/index.pug","hash":"16cf05cf9649322da57e9b8d316573bb65f8d8d8","modified":1655821581781},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/twikoo-comment.pug","hash":"91a72e94743befa21a7b1c557fbb3751efb87ab0","modified":1655821581782},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/valine.pug","hash":"33368c0b80e4c4e78f3c7ee9bec0fed70ad838ca","modified":1655821581782},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/waline.pug","hash":"63ef0b2a75cf26a94c5bcd885f3a1c144451b852","modified":1655821581783},{"_id":"themes/butterfly/layout/includes/third-party/math/katex.pug","hash":"fdb544b0e0198faeec6a2ac239036c972446287e","modified":1655821581779},{"_id":"themes/butterfly/layout/includes/third-party/math/mathjax.pug","hash":"056756e43908519039b8bbd7a90f8c49d561eb52","modified":1655821581779},{"_id":"themes/butterfly/layout/includes/third-party/math/index.pug","hash":"2afa4c21dd19890f47fb568cfb0d90efb676a253","modified":1655821581779},{"_id":"themes/butterfly/layout/includes/third-party/math/mermaid.pug","hash":"297d34d83e7bff8ec3b8bc19bb0f4d901c35fe5a","modified":1655821581780},{"_id":"themes/butterfly/layout/includes/third-party/search/algolia.pug","hash":"af5d3d87b736598dafcf5871863596592cacdfe1","modified":1655821581784},{"_id":"themes/butterfly/layout/includes/third-party/share/add-this.pug","hash":"8b4034e53ca5bf85097f681a6e76a53ce685c205","modified":1655821581785},{"_id":"themes/butterfly/layout/includes/third-party/search/index.pug","hash":"ff3727c3ec698ec61a28c55cbc8c8508f0efb0a0","modified":1655821581784},{"_id":"themes/butterfly/layout/includes/third-party/search/local-search.pug","hash":"3b5ef84744a1a8fec5a63554079008040d96f924","modified":1655821581785},{"_id":"themes/butterfly/layout/includes/third-party/share/addtoany.pug","hash":"1f02a26730e5f36cc2dfec7ff4d5c93a099ed5ba","modified":1655821581785},{"_id":"themes/butterfly/layout/includes/third-party/share/index.pug","hash":"4898a09d8e67fb358ffd74b3a1f0014f555dd856","modified":1655821581786},{"_id":"themes/butterfly/source/css/_highlight/highlight/diff.styl","hash":"6e77f1ca0cfb0db6b028f5c0238780e66d344f3d","modified":1655821581804},{"_id":"themes/butterfly/layout/includes/third-party/share/share-js.pug","hash":"b45fc15c3ae7db3a0fbce0d6da74a72a95ca8a2b","modified":1655821581786},{"_id":"themes/butterfly/source/css/_highlight/highlight/index.styl","hash":"fc702a4614d0562a381907b083f71ba63d301d86","modified":1655821581805},{"_id":"themes/butterfly/source/css/_highlight/prismjs/diff.styl","hash":"1309292f1c8c53d96cd7333507b106bcc24ca8fc","modified":1655821581805},{"_id":"themes/butterfly/source/css/_highlight/prismjs/line-number.styl","hash":"0b8aea62d1550113e1fcc237fae1b03743190208","modified":1655821581806},{"_id":"themes/butterfly/source/css/_highlight/prismjs/index.styl","hash":"01ff9e77eb1bd454bec65a6ff5972c8e219bc708","modified":1655821581805},{"_id":"source/img/index.jpg","hash":"c1c2414f6eadb1793ca03e38285158978e93bc06","modified":1655821581747},{"_id":"source/img/004.png","hash":"10130759ca25daac3892b8c48f9207d0d70cf127","modified":1655821581730},{"_id":"public/manifest.json","hash":"6b3a91b1dd4fd47cf1064624cff998ad9fd7ce96","modified":1655821804882},{"_id":"public/baidusitemap.xml","hash":"bf9e0a0ee35841b27b92e4faa5921a6ec6486014","modified":1655821804882},{"_id":"public/sitemap.xml","hash":"3dcaaade066e05c22c67818a68beaef99aa933b6","modified":1655821804882},{"_id":"public/about/index.html","hash":"3801bce178df3b4a1e67cd78b12a2a70971e1f35","modified":1655821804882},{"_id":"public/categories/index.html","hash":"2d5f9d7404c7e0b4342fde25494628adf49bb1c1","modified":1655821804882},{"_id":"public/tags/index.html","hash":"8d72799c919442390b3bec4d3d1265fd6660d713","modified":1655821804882},{"_id":"public/2022/05/31/003_Inventory/index.html","hash":"0f5197e8539ad7b62820310aed864e49951d56d4","modified":1655821804882},{"_id":"public/2022/06/04/004_Dialog/index.html","hash":"12dbe018b0acee42c79deaf23908209e633de15b","modified":1655821804882},{"_id":"public/2022/05/10/002_unityRpg/index.html","hash":"16df21896ca3a9255262c1da2c1ed8a01878026a","modified":1655821804882},{"_id":"public/2022/01/10/001_hexo/index.html","hash":"10cf7ad2edb3a747a13effe4c1b80b6776bf397d","modified":1655821804882},{"_id":"public/archives/index.html","hash":"1f25ffc91f44dff3b9a19457ce7db7f6a106164e","modified":1655821804882},{"_id":"public/archives/2022/index.html","hash":"a113a4acb0ec6269bd69f56adbb789e69371990a","modified":1655821804882},{"_id":"public/archives/2022/05/index.html","hash":"12935b42a5bb407c125bd3c231e96f7ec7c6a034","modified":1655821804882},{"_id":"public/archives/2022/01/index.html","hash":"8e1e72c86d182e56d18a61d106d69d623ac2eb6a","modified":1655821804882},{"_id":"public/archives/2022/06/index.html","hash":"e95c03d211ed74470618181966e5a423b8773f6a","modified":1655821804882},{"_id":"public/categories/Hexo/index.html","hash":"8a3c08b3de8d20ec367959c70eb6aa5b57e83540","modified":1655821804882},{"_id":"public/index.html","hash":"1da57cdc88439da4a10b0c4ce7d2feb8057dcd59","modified":1655821804882},{"_id":"public/categories/Unity/index.html","hash":"bda20119a82fb501431299c0d6e066207e16ab93","modified":1655821804882},{"_id":"public/tags/Games/index.html","hash":"7545eefaa244b2f01656977f37d1cd0c590762fd","modified":1655821804882},{"_id":"public/tags/Ê∏∏ÊàèÂà∂‰Ωú/index.html","hash":"2550e61838d99e4cddac8ba8ba7e7ad937ab23ac","modified":1655821804882},{"_id":"public/tags/M-studio/index.html","hash":"c848746978465bee59b8ccd8fd6ac1d1f6b2da22","modified":1655821804882},{"_id":"public/img/favicon.png","hash":"3cf89864b4f6c9b532522a4d260a2e887971c92d","modified":1655821804882},{"_id":"public/img/001.svg","hash":"278ace714700f9c627a8ad14af94e8351867c5ce","modified":1655821804882},{"_id":"public/img/friend_404.gif","hash":"55a4efc7431d82bf68f6f6ebb162201e8a701833","modified":1655821804882},{"_id":"public/img/404.jpg","hash":"9d92d50e9a7cd6f6e364364cbd61dc02d9962634","modified":1655821804882},{"_id":"public/img/default.jpg","hash":"af65ad5916a8b24f21a310ad6e69acf209dd84ae","modified":1655821804882},{"_id":"public/img/icon.png","hash":"ab67fc3eaa4eec233fadb7d2071119b5e9027538","modified":1655821804882},{"_id":"public/img/head.jpg","hash":"7a14fd517484a46f5507a2850e427ebee546fe74","modified":1655821804882},{"_id":"public/2022/01/10/001_hexo/image-20210123190241565.png","hash":"d152093d011c35605560189dd13441024aefe7f2","modified":1655821804882},{"_id":"public/2022/01/10/001_hexo/image-20210123190247657.png","hash":"d152093d011c35605560189dd13441024aefe7f2","modified":1655821804882},{"_id":"public/2022/01/10/001_hexo/image-20210123190444101.png","hash":"d152093d011c35605560189dd13441024aefe7f2","modified":1655821804882},{"_id":"public/2022/01/10/001_hexo/image-20210123203426310.png","hash":"44bc362bfd9cf9983b487054292930a67ec909a5","modified":1655821804882},{"_id":"public/2022/01/10/001_hexo/image-20220110162452660.png","hash":"91216f13985eeca8c6a5a6d43498c948a85176a1","modified":1655821804882},{"_id":"public/2022/01/10/001_hexo/image-20220110162645465.png","hash":"cdd9130531a1f1ddcf5a0bc793b15bfe43a55cb8","modified":1655821804882},{"_id":"public/2022/01/10/001_hexo/image-20220110164357577.png","hash":"e76e6099266c562f7ae6d201bf5c5e71fa9560c9","modified":1655821804882},{"_id":"public/2022/01/10/001_hexo/image-20220110165134907.png","hash":"63dae7b6443d460c4549e96ab60b738dace807a3","modified":1655821804882},{"_id":"public/2022/01/10/001_hexo/image-20220110165549516.png","hash":"01e3fab92d67c84b9f5c88a89fd344257255c849","modified":1655821804882},{"_id":"public/2022/01/10/001_hexo/image-20220111114426389.png","hash":"ae315e8d5e0e6ffc8a9f326591218d6c5bbe9197","modified":1655821804882},{"_id":"public/2022/01/10/001_hexo/image-20220111112820182.png","hash":"e26b9dc3e9abda5cd2e0f652eb4dad38d064486b","modified":1655821804882},{"_id":"public/2022/01/10/001_hexo/image-20220111114517951.png","hash":"627d433e6626318114d5b1ccc129d950f3e41db4","modified":1655821804882},{"_id":"public/2022/05/31/003_Inventory/image-20220603143654206.png","hash":"5df177108a0c1465a66daddf005ed477b577098f","modified":1655821804882},{"_id":"public/2022/01/10/001_hexo/image-20220111115043380.png","hash":"030dde867c45888793d3e88ebecd33016e02c2b8","modified":1655821804882},{"_id":"public/img/003.png","hash":"892057214119497402b8b48529fc968bc3ff85b8","modified":1655821804882},{"_id":"public/css/var.css","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1655821804882},{"_id":"public/js/search/algolia.js","hash":"ce8131b712dca80f289015aef75f86e727f62981","modified":1655821804882},{"_id":"public/js/utils.js","hash":"0b95daada72abb5d64a1e3236049a60120e47cca","modified":1655821804882},{"_id":"public/js/search/local-search.js","hash":"3071a4208fdf89ad7e0031536dd6ffa7bc951e4d","modified":1655821804882},{"_id":"public/css/index.css","hash":"7dffbf8c69c652d7911ef0f0f9773d93f021b739","modified":1655821804882},{"_id":"public/js/main.js","hash":"04efcbd28b37875cfec88eb87cab7256a9ebb327","modified":1655821804882},{"_id":"public/js/tw_cn.js","hash":"00053ce73210274b3679f42607edef1206eebc68","modified":1655821804882},{"_id":"public/img/Unity.jpg","hash":"b711c84b83e19360542fe215fd877ffb87cd3eea","modified":1655821804882},{"_id":"public/img/002.png","hash":"83720acfe094da089d24348cb7886a2fe86760ea","modified":1655821804882},{"_id":"public/2022/06/04/004_Dialog/image-20220604181812326.png","hash":"52ea7be6317c960b254284cf21c247acd3a032c4","modified":1655821804882},{"_id":"public/img/index.jpg","hash":"c1c2414f6eadb1793ca03e38285158978e93bc06","modified":1655821804882},{"_id":"public/img/004.png","hash":"10130759ca25daac3892b8c48f9207d0d70cf127","modified":1655821804882}],"Category":[{"name":"Hexo","_id":"cl4o9jzie0006isv9bo5633n3"},{"name":"Unity","_id":"cl4o9jzil000aisv97ytucirq"}],"Data":[],"Page":[{"title":"about","date":"2022-01-06T12:12:50.000Z","_content":"\n### Thanks Hello World\n","source":"about/index.md","raw":"---\ntitle: about\ndate: 2022-01-06 20:12:50\n---\n\n### Thanks Hello World\n","updated":"2022-06-21T14:26:21.715Z","path":"about/index.html","comments":1,"layout":"page","_id":"cl4o9jzhv0000isv9abqm09um","content":"<h3 id=\"Thanks-Hello-World\"><a href=\"#Thanks-Hello-World\" class=\"headerlink\" title=\"Thanks Hello World\"></a>Thanks Hello World</h3>","site":{"data":{}},"cover":"/img/index.jpg","excerpt":"","more":"<h3 id=\"Thanks-Hello-World\"><a href=\"#Thanks-Hello-World\" class=\"headerlink\" title=\"Thanks Hello World\"></a>Thanks Hello World</h3>"},{"title":"categories","date":"2022-01-20T04:09:30.000Z","type":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: categories\ndate: 2022-01-20 12:09:30\ntype: \"categories\"\n---\n","updated":"2022-06-21T14:26:21.716Z","path":"categories/index.html","comments":1,"layout":"page","_id":"cl4o9jzi00001isv9aylc918h","content":"","site":{"data":{}},"cover":"/img/index.jpg","excerpt":"","more":""},{"_content":"{\n    \"dir\": \"ltr\",\n    \"lang\": \"en\",\n    \"name\": \"XLJZT\",\n    \"short_name\": \"XLJZT\",\n    \"scope\": \"/\",\n    \"display\": \"fullscreen\",\n    \"start_url\": \"https://xljzt.github.io/\",\n    \"background_color\": \"transparent\",\n    \"theme_color\": \"transparent\",\n    \"description\": \"\",\n    \"orientation\": \"any\",\n    \"related_applications\": [],\n    \"prefer_related_applications\": false,\n    \"icons\": [],\n    \"url\": \"https://xljzt.github.io/\",\n    \"screenshots\": []\n}","source":"manifest.json","raw":"{\n    \"dir\": \"ltr\",\n    \"lang\": \"en\",\n    \"name\": \"XLJZT\",\n    \"short_name\": \"XLJZT\",\n    \"scope\": \"/\",\n    \"display\": \"fullscreen\",\n    \"start_url\": \"https://xljzt.github.io/\",\n    \"background_color\": \"transparent\",\n    \"theme_color\": \"transparent\",\n    \"description\": \"\",\n    \"orientation\": \"any\",\n    \"related_applications\": [],\n    \"prefer_related_applications\": false,\n    \"icons\": [],\n    \"url\": \"https://xljzt.github.io/\",\n    \"screenshots\": []\n}","date":"2022-06-21T14:26:21.747Z","updated":"2022-06-21T14:26:21.747Z","path":"manifest.json","layout":"false","title":"","comments":1,"_id":"cl4o9jzi20002isv9h6o8duic","content":"{\"dir\":\"ltr\",\"lang\":\"en\",\"name\":\"XLJZT\",\"short_name\":\"XLJZT\",\"scope\":\"/\",\"display\":\"fullscreen\",\"start_url\":\"https://xljzt.github.io/\",\"background_color\":\"transparent\",\"theme_color\":\"transparent\",\"description\":\"\",\"orientation\":\"any\",\"related_applications\":[],\"prefer_related_applications\":false,\"icons\":[],\"url\":\"https://xljzt.github.io/\",\"screenshots\":[]}","site":{"data":{}},"cover":"/img/index.jpg","excerpt":"","more":"{\"dir\":\"ltr\",\"lang\":\"en\",\"name\":\"XLJZT\",\"short_name\":\"XLJZT\",\"scope\":\"/\",\"display\":\"fullscreen\",\"start_url\":\"https://xljzt.github.io/\",\"background_color\":\"transparent\",\"theme_color\":\"transparent\",\"description\":\"\",\"orientation\":\"any\",\"related_applications\":[],\"prefer_related_applications\":false,\"icons\":[],\"url\":\"https://xljzt.github.io/\",\"screenshots\":[]}"},{"title":"Ê†áÁ≠æ","date":"2022-02-06T05:21:46.000Z","type":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: Ê†áÁ≠æ\ndate: 2022-02-06 13:21:46\ntype: \"tags\"\n---\n","updated":"2022-06-21T14:26:21.748Z","path":"tags/index.html","comments":1,"layout":"page","_id":"cl4o9jzib0004isv94bgd7rim","content":"","site":{"data":{}},"cover":"/img/index.jpg","excerpt":"","more":""}],"Post":[{"title":"ËÆ∞ÂΩï‰∏Ä‰∏ãÂÆâË£ÖhexoÁöÑËøáÁ®ã","date":"2022-01-09T16:00:00.000Z","top_image":"/img/001.svg","cover":"/img/001.svg","_content":"\n\n\n### ËÆ∞ÂΩï‰∏Ä‰∏ãÂÆâË£ÖhexoÁöÑËøáÁ®ã\n\nÔºàÈò≤Ê≠¢‰ª•ÂêéÈÅóÂøò ‰∏çÁü•ÈÅìÂíãÂºÑÔºâ\n\n#### ÂÆâË£Öhexo\n\nÈ¶ñÂÖàÂÆâË£ÖÂ•Ωgit Âíå node js\n\n```\n$ npm install -g hexo-cli\nor\n$ npm install hexo\n```\n\nÂÆåÊàê‰πãÂêéÁî® **`hexo -v`** Êü•ÁúãÁâàÊú¨\n\nÊé•‰∏ãÊù•ÂàùÂßãÂåñ `hexo`\n\n```\n$ hexo init Êñá‰ª∂Âêç\n$ cd Êñá‰ª∂Âêç\n$ npm install\n```\n\nÊñ∞Âª∫ÂÆåÊàê‰πãÂêé‰ºöÊúâÂ¶Ç‰∏ãÊñá‰ª∂Â§π\n\n![image-20220110162452660](image-20220110162452660.png)\n\n```\n$ hexo g\n$ hexo s\n```\n\n‰πãÂêé‰æøÂèØ‰ª•ËøõÂÖ•Âà∞ÂàùÂßãÂçöÂÆ¢\n\n![image-20220110162645465](image-20220110162645465.png)\n\n#### GitHubÊàñGitee ÂàõÂª∫Êñ∞Â∫ì\n\nTIP: Âú®GitHub‰∏äÊ≥®ÂÜåÁöÑ‰ªìÂ∫ìÂêç‰∏∫  `Áõ∏ÂêåÁöÑÁî®Êà∑Âêç.github.io`\n\n‚Äã\t\tGitee‰∏ä‰∏∫`Áõ∏ÂêåÁöÑÁî®Êà∑Âêç`\n\n\n\n#### Â∞ÜhexoÈÉ®ÁΩ≤Âà∞GitHubÊàñGitee‰∏ä\n\nÂÖàÂÆâË£Ödeploy-git\n\n```\n$ npm install hexo-deployer-git --save\n```\n\nÂú®**`_config.yml`**Êñá‰ª∂‰∏≠ÊúÄÂêé‰øÆÊîπ\n\n```yaml\ndeploy:\n- type: 'git'\n  repo: https://github.com/username/username.github.io.git\n  branch: blog\n- type: 'git'\n  repo: https://gitee.com/username/username.git\n  branch: blog\n```\n\nÁÑ∂ÂêéÊâßË°åÂëΩ‰ª§\n\n```\n$ hexo clean\n$ hexo g\n$ hexo d\n```\n\nÂÖ∂‰∏≠ `hexo clean`Ê∏ÖÈô§‰∫Ü‰Ω†‰πãÂâçÁîüÊàêÁöÑ‰∏úË•øÔºå‰πüÂèØ‰ª•‰∏çÂä†„ÄÇ\n`hexo generate` È°æÂêçÊÄù‰πâÔºåÁîüÊàêÈùôÊÄÅÊñáÁ´†ÔºåÂèØ‰ª•Áî® `hexo g`Áº©ÂÜô\n`hexo deploy` ÈÉ®ÁΩ≤ÊñáÁ´†ÔºåÂèØ‰ª•Áî®`hexo d`Áº©ÂÜô\n\nÈÉ®ÁΩ≤ÁªìÊùü\n\n#### ‰øÆÊîπ‰∏ªÈ¢ò\n\nÊàëÈÄâÊã©ÁöÑÊòØ [Hexo Theme Cupertino](https://github.com/MrWillCom/hexo-theme-cupertino)\n\n![image-20220110164357577](image-20220110164357577.png)\n\nÂÆåÂÖ®Á¨¶ÂêàÊàëÁöÑÂÆ°Áæé\n\nËøõÂÖ•‰∏ªÈ¢òÊñá‰ª∂\n\n```\n$ cd themes\n$ git clone https://github.com/MrWillCom/hexo-theme-cupertino.git\n```\n\n‰øÆÊîπÂÖ®Â±ÄÈÖçÁΩÆÊñá‰ª∂ `_config.yml`\n\n```yaml\ntheme: hexo-theme-cupertino\n```\n\n‰øÆÊîπÂéü‰ΩúËÄÖÁöÑÈìæÊé•\n\n![image-20220110165134907](image-20220110165134907.png)\n\n`Ê∑ªÂä†ÊµèËßàÂô®ÂõæÊ†ápngÊîæÂà∞ Êñá‰ª∂Âêç/source ‰∏ã`\n\n‰øÆÊîπÂÖ®Â±ÄÈÖçÁΩÆÊñá‰ª∂\n\n```yaml\nsubtitle:''\ndescription:''\n```\n\nËøôÊòØÁé∞ÂÆûÂú®‰∏ªÈ°µÁöÑ‰∏§Ë°åÂ≠ó‰Ωì ‰ΩúËÄÖÊ∫êÁ†ÅËß£ÈáäÂú®Ê≠§\n\n![image-20220110165549516](image-20220110165549516.png)\n\nËá≥Ê≠§‰∏ªÈ¢òÈÉ®ÂàÜÈÖçÁΩÆÂ∑≤ÁªìÊùü\n\n#### ÂÖ≥‰∫éÂõæÁâáÊèíÂÖ•ÁöÑÈóÆÈ¢ò\n\nÊàëÁúãÂà∞‰∏Ä‰∏™Êèí‰ª∂ÈùûÂ∏∏‰∏≠ÊÑè ‰ΩÜÊòØÂÆâË£ÖÁöÑÊó∂ÂÄôÂá∫Áé∞ÈóÆÈ¢òÂ∞±‰∏ÄÁõ¥Ê≤°ËÉΩË£Ö‰∏ä\n\n**[hexo-easy-images](https://github.com/boboidream/hexo-easy-images#hexo-easy-images)**\n\nÁÑ∂ÂêéÂØπÊØî‰ΩøÁî®‰∫Ü**[hexo-filter-image](https://github.com/JoeyBling/hexo-filter-image)** Âíå **[hexo-asset-image](https://github.com/xcodebuild/hexo-asset-image)** ‰πãÂêéÊàëÈÄâÊã©‰∫Ü‰ΩøÁî®ÂêéËÄÖ\n\nÊé•‰∏ãÊù•ÊòØÊàëÁöÑ‰ΩøÁî®ÊñπÊ°à\n\n#### ÂÆâË£Ö  **[hexo-asset-image](https://github.com/xcodebuild/hexo-asset-image)**\n\n```\nnpm install hexo-asset-image --save\n```\n\nÊ∫êÊñá‰ª∂`/node_modules/hexo-asset-image/index.js`ÈáåÁöÑ‰ª£Á†ÅÊúâÈîôËØØ ÈúÄË¶ÅËøõË°å‰øÆÊîπ‰∏∫‰ª•‰∏ã‰ª£Á†Å\n\n```js\n'use strict';\nvar cheerio = require('cheerio');\n\n// http://stackoverflow.com/questions/14480345/how-to-get-the-nth-occurrence-in-a-string\nfunction getPosition(str, m, i) {\n  return str.split(m, i).join(m).length;\n}\n\nvar version = String(hexo.version).split('.');\nhexo.extend.filter.register('after_post_render', function(data){\n  var config = hexo.config;\n  if(config.post_asset_folder){\n        var link = data.permalink;\n    if(version.length > 0 && Number(version[0]) == 3)\n       var beginPos = getPosition(link, '/', 1) + 1;\n    else\n       var beginPos = getPosition(link, '/', 3) + 1;\n    // In hexo 3.1.1, the permalink of \"about\" page is like \".../about/index.html\".\n    var endPos = link.lastIndexOf('/') + 1;\n    link = link.substring(beginPos, endPos);\n\n    var toprocess = ['excerpt', 'more', 'content'];\n    for(var i = 0; i < toprocess.length; i++){\n      var key = toprocess[i];\n \n      var $ = cheerio.load(data[key], {\n        ignoreWhitespace: false,\n        xmlMode: false,\n        lowerCaseTags: false,\n        decodeEntities: false\n      });\n\n      $('img').each(function(){\n        if ($(this).attr('src')){\n            // For windows style path, we replace '\\' to '/'.\n            var src = $(this).attr('src').replace('\\\\', '/');\n            if(!/http[s]*.*|\\/\\/.*/.test(src) &&\n               !/^\\s*\\//.test(src)) {\n              // For \"about\" page, the first part of \"src\" can't be removed.\n              // In addition, to support multi-level local directory.\n              var linkArray = link.split('/').filter(function(elem){\n                return elem != '';\n              });\n              var srcArray = src.split('/').filter(function(elem){\n                return elem != '' && elem != '.';\n              });\n              if(srcArray.length > 1)\n                srcArray.shift();\n              src = srcArray.join('/');\n              $(this).attr('src', config.root + link + src);\n              console.info&&console.info(\"update link as:-->\"+config.root + link + src);\n            }\n        }else{\n            console.info&&console.info(\"no src attr, skipped...\");\n            console.info&&console.info($(this));\n        }\n      });\n      data[key] = $.html();\n    }\n  }\n});\n```\n\n\n\n#### È£üÁî®ÊñπÊ≥ï\n\nÂú®ÂÜômarkdownÊñá‰ª∂Êó∂ËÆæÁΩÆÂ•ΩÂõæÂÉèÁöÑÈóÆÈ¢òÔºåÊàëÁî®ÁöÑÊòØtyporaÊõ¥ÊîπÂõæÁâáËÆæÁΩÆÂ¶Ç‰∏ãÂõæ\n\n![image-20220111114426389](image-20220111114426389.png)\n\nËøôÊ†∑Â∞±‰ºöÂ∞ÜÂõæÁâáÂíåÊñá‰ª∂ÊîæÂà∞‰∏Ä‰∏™Êñá‰ª∂Â§π‰∏ã\n\n![image-20220111114517951](image-20220111114517951.png)\n\nÁÑ∂Âêé‰ΩøÁî®ÂëΩ‰ª§\n\n```yaml\nhexo new ËÆ∞ÂΩï‰∏Ä‰∏ãÂÆâË£ÖhexoÁöÑËøáÁ®ã\n```\n\nÊàñËÄÖÊâãÂä®Âú®  `Êñá‰ª∂/source/_post/ `‰∏ãÂàõÂª∫Áõ∏ÂêåÂêçÂ≠óÁöÑÊñá‰ª∂\n\nÁÑ∂ÂêéÂ∞ÜÂÜôÂ•ΩÁöÑmarkdownÊñá‰ª∂ÁöÑÂõæÁâáÊîæÂÖ•Êñá‰ª∂Â§πÈáå Â∞ÜmdÊñá‰ª∂ÊîæÂà∞Â§ñÈù¢\n\n![image-20220111115043380](image-20220111115043380.png)\n\nÊú¨‰∫∫Âª∫ËÆÆÁõ¥Êé•Â∞ÜÁºñËæëÂ•ΩÁöÑmarkdownÊñá‰ª∂Â§πÂ§çÂà∂Âà∞ `Êñá‰ª∂/source/_post/ ` ÁÑ∂ÂêéÂ∞Ü`.md`Êñá‰ª∂ÁªôÊãâÂà∞ÂíåÊñá‰ª∂Â§πÂêå‰∏ÄÂ±ÇÁ∫ßÔºåÂΩ¢Êàê‰∏äÂõæÁöÑÂ±ÇÁ∫ßÊ†ºÂºè \n\n#### TIP\n\n> Êñá‰ª∂Â§πÈáåÂè™ÊúâÂõæÁâá\n\n#### ‰øÆÊîπurl\n\n`_Config.yml`\n\n```yaml\n# URL\n## Set your site url here. For example, if you use GitHub Page, set url as 'https://username.github.io/project'\n\n#‰øÆÊîπurlÊòØÂõ†‰∏∫github‰∏çÂä†ËΩΩcssÂíåjs\nurl: https://username.github.io\nroot: /\n\n```\n\n> ËÆ∞Âæó‰∏ä‰º†Ê∫êÊñá‰ª∂Âà∞GitHubÊàñGitee‰∏ä\n>\n> Â∞ÜthemesÁöÑ‰∏ªÈ¢òÈáåÁöÑ`.git`Âà†Êéâ Âõ†‰∏∫github‰∏çËÉΩÂµåÂ•ó‰∏ä‰º†\n>\n> Âª∫ËÆÆÂ∞ÜpageÊîæÂÖ•‰∏Ä‰∏™ÂàÜÊîØ Ê∫êÁ†ÅÊîæÂÖ•‰∏Ä‰∏™ÂàÜÊîØ\n\n\n\n \n\n**Â¶ÇÊûúÊàëÁöÑÁúã‰∏çÊáÇÂèØ‰ª•Âª∫ËÆÆÁúã‰∏Ä‰∏ã[Ëøô‰∏™ÈìæÊé•](https://blog.csdn.net/sinat_37781304/article/details/82729029) ÊàëÂÅöÁöÑÊó∂ÂÄôÂ≠¶‰π†ÁöÑËøô‰∏™‰ΩúËÄÖÊâçÂÅöÂá∫Êù•ÁöÑÁªô‰∫ÜÊàë‰∏çÂ∞ëÂêØÂèë**\n\nÁ¨¨‰∏ÄÁØáÊñáÁ´†Âà∞Ê≠§ÁªìÊùüÔºÅÔºÅÔºÅü•≥ü•≥ü•≥\n\n\n\n# 2022.5.13 Update\n\nÈÄâÊã©‰∫ÜÊñ∞ÁöÑ‰∏ªÈ¢òÔºå‰∏ªÈ¢òÁõ∏ËæÉ‰∫é‰πãÂâçÁöÑÊõ¥Âä†‰∏∞ÂØåÔºåÂπ∂‰∏î‰ªégithub pageËøÅÁßªÂà∞‰∫Üvercel\n","source":"_posts/001_hexo.md","raw":"---\ntitle: ËÆ∞ÂΩï‰∏Ä‰∏ãÂÆâË£ÖhexoÁöÑËøáÁ®ã\ndate: 2022-1-10\ntop_image: /img/001.svg\ncover: /img/001.svg\ncategories: Hexo\n---\n\n\n\n### ËÆ∞ÂΩï‰∏Ä‰∏ãÂÆâË£ÖhexoÁöÑËøáÁ®ã\n\nÔºàÈò≤Ê≠¢‰ª•ÂêéÈÅóÂøò ‰∏çÁü•ÈÅìÂíãÂºÑÔºâ\n\n#### ÂÆâË£Öhexo\n\nÈ¶ñÂÖàÂÆâË£ÖÂ•Ωgit Âíå node js\n\n```\n$ npm install -g hexo-cli\nor\n$ npm install hexo\n```\n\nÂÆåÊàê‰πãÂêéÁî® **`hexo -v`** Êü•ÁúãÁâàÊú¨\n\nÊé•‰∏ãÊù•ÂàùÂßãÂåñ `hexo`\n\n```\n$ hexo init Êñá‰ª∂Âêç\n$ cd Êñá‰ª∂Âêç\n$ npm install\n```\n\nÊñ∞Âª∫ÂÆåÊàê‰πãÂêé‰ºöÊúâÂ¶Ç‰∏ãÊñá‰ª∂Â§π\n\n![image-20220110162452660](image-20220110162452660.png)\n\n```\n$ hexo g\n$ hexo s\n```\n\n‰πãÂêé‰æøÂèØ‰ª•ËøõÂÖ•Âà∞ÂàùÂßãÂçöÂÆ¢\n\n![image-20220110162645465](image-20220110162645465.png)\n\n#### GitHubÊàñGitee ÂàõÂª∫Êñ∞Â∫ì\n\nTIP: Âú®GitHub‰∏äÊ≥®ÂÜåÁöÑ‰ªìÂ∫ìÂêç‰∏∫  `Áõ∏ÂêåÁöÑÁî®Êà∑Âêç.github.io`\n\n‚Äã\t\tGitee‰∏ä‰∏∫`Áõ∏ÂêåÁöÑÁî®Êà∑Âêç`\n\n\n\n#### Â∞ÜhexoÈÉ®ÁΩ≤Âà∞GitHubÊàñGitee‰∏ä\n\nÂÖàÂÆâË£Ödeploy-git\n\n```\n$ npm install hexo-deployer-git --save\n```\n\nÂú®**`_config.yml`**Êñá‰ª∂‰∏≠ÊúÄÂêé‰øÆÊîπ\n\n```yaml\ndeploy:\n- type: 'git'\n  repo: https://github.com/username/username.github.io.git\n  branch: blog\n- type: 'git'\n  repo: https://gitee.com/username/username.git\n  branch: blog\n```\n\nÁÑ∂ÂêéÊâßË°åÂëΩ‰ª§\n\n```\n$ hexo clean\n$ hexo g\n$ hexo d\n```\n\nÂÖ∂‰∏≠ `hexo clean`Ê∏ÖÈô§‰∫Ü‰Ω†‰πãÂâçÁîüÊàêÁöÑ‰∏úË•øÔºå‰πüÂèØ‰ª•‰∏çÂä†„ÄÇ\n`hexo generate` È°æÂêçÊÄù‰πâÔºåÁîüÊàêÈùôÊÄÅÊñáÁ´†ÔºåÂèØ‰ª•Áî® `hexo g`Áº©ÂÜô\n`hexo deploy` ÈÉ®ÁΩ≤ÊñáÁ´†ÔºåÂèØ‰ª•Áî®`hexo d`Áº©ÂÜô\n\nÈÉ®ÁΩ≤ÁªìÊùü\n\n#### ‰øÆÊîπ‰∏ªÈ¢ò\n\nÊàëÈÄâÊã©ÁöÑÊòØ [Hexo Theme Cupertino](https://github.com/MrWillCom/hexo-theme-cupertino)\n\n![image-20220110164357577](image-20220110164357577.png)\n\nÂÆåÂÖ®Á¨¶ÂêàÊàëÁöÑÂÆ°Áæé\n\nËøõÂÖ•‰∏ªÈ¢òÊñá‰ª∂\n\n```\n$ cd themes\n$ git clone https://github.com/MrWillCom/hexo-theme-cupertino.git\n```\n\n‰øÆÊîπÂÖ®Â±ÄÈÖçÁΩÆÊñá‰ª∂ `_config.yml`\n\n```yaml\ntheme: hexo-theme-cupertino\n```\n\n‰øÆÊîπÂéü‰ΩúËÄÖÁöÑÈìæÊé•\n\n![image-20220110165134907](image-20220110165134907.png)\n\n`Ê∑ªÂä†ÊµèËßàÂô®ÂõæÊ†ápngÊîæÂà∞ Êñá‰ª∂Âêç/source ‰∏ã`\n\n‰øÆÊîπÂÖ®Â±ÄÈÖçÁΩÆÊñá‰ª∂\n\n```yaml\nsubtitle:''\ndescription:''\n```\n\nËøôÊòØÁé∞ÂÆûÂú®‰∏ªÈ°µÁöÑ‰∏§Ë°åÂ≠ó‰Ωì ‰ΩúËÄÖÊ∫êÁ†ÅËß£ÈáäÂú®Ê≠§\n\n![image-20220110165549516](image-20220110165549516.png)\n\nËá≥Ê≠§‰∏ªÈ¢òÈÉ®ÂàÜÈÖçÁΩÆÂ∑≤ÁªìÊùü\n\n#### ÂÖ≥‰∫éÂõæÁâáÊèíÂÖ•ÁöÑÈóÆÈ¢ò\n\nÊàëÁúãÂà∞‰∏Ä‰∏™Êèí‰ª∂ÈùûÂ∏∏‰∏≠ÊÑè ‰ΩÜÊòØÂÆâË£ÖÁöÑÊó∂ÂÄôÂá∫Áé∞ÈóÆÈ¢òÂ∞±‰∏ÄÁõ¥Ê≤°ËÉΩË£Ö‰∏ä\n\n**[hexo-easy-images](https://github.com/boboidream/hexo-easy-images#hexo-easy-images)**\n\nÁÑ∂ÂêéÂØπÊØî‰ΩøÁî®‰∫Ü**[hexo-filter-image](https://github.com/JoeyBling/hexo-filter-image)** Âíå **[hexo-asset-image](https://github.com/xcodebuild/hexo-asset-image)** ‰πãÂêéÊàëÈÄâÊã©‰∫Ü‰ΩøÁî®ÂêéËÄÖ\n\nÊé•‰∏ãÊù•ÊòØÊàëÁöÑ‰ΩøÁî®ÊñπÊ°à\n\n#### ÂÆâË£Ö  **[hexo-asset-image](https://github.com/xcodebuild/hexo-asset-image)**\n\n```\nnpm install hexo-asset-image --save\n```\n\nÊ∫êÊñá‰ª∂`/node_modules/hexo-asset-image/index.js`ÈáåÁöÑ‰ª£Á†ÅÊúâÈîôËØØ ÈúÄË¶ÅËøõË°å‰øÆÊîπ‰∏∫‰ª•‰∏ã‰ª£Á†Å\n\n```js\n'use strict';\nvar cheerio = require('cheerio');\n\n// http://stackoverflow.com/questions/14480345/how-to-get-the-nth-occurrence-in-a-string\nfunction getPosition(str, m, i) {\n  return str.split(m, i).join(m).length;\n}\n\nvar version = String(hexo.version).split('.');\nhexo.extend.filter.register('after_post_render', function(data){\n  var config = hexo.config;\n  if(config.post_asset_folder){\n        var link = data.permalink;\n    if(version.length > 0 && Number(version[0]) == 3)\n       var beginPos = getPosition(link, '/', 1) + 1;\n    else\n       var beginPos = getPosition(link, '/', 3) + 1;\n    // In hexo 3.1.1, the permalink of \"about\" page is like \".../about/index.html\".\n    var endPos = link.lastIndexOf('/') + 1;\n    link = link.substring(beginPos, endPos);\n\n    var toprocess = ['excerpt', 'more', 'content'];\n    for(var i = 0; i < toprocess.length; i++){\n      var key = toprocess[i];\n \n      var $ = cheerio.load(data[key], {\n        ignoreWhitespace: false,\n        xmlMode: false,\n        lowerCaseTags: false,\n        decodeEntities: false\n      });\n\n      $('img').each(function(){\n        if ($(this).attr('src')){\n            // For windows style path, we replace '\\' to '/'.\n            var src = $(this).attr('src').replace('\\\\', '/');\n            if(!/http[s]*.*|\\/\\/.*/.test(src) &&\n               !/^\\s*\\//.test(src)) {\n              // For \"about\" page, the first part of \"src\" can't be removed.\n              // In addition, to support multi-level local directory.\n              var linkArray = link.split('/').filter(function(elem){\n                return elem != '';\n              });\n              var srcArray = src.split('/').filter(function(elem){\n                return elem != '' && elem != '.';\n              });\n              if(srcArray.length > 1)\n                srcArray.shift();\n              src = srcArray.join('/');\n              $(this).attr('src', config.root + link + src);\n              console.info&&console.info(\"update link as:-->\"+config.root + link + src);\n            }\n        }else{\n            console.info&&console.info(\"no src attr, skipped...\");\n            console.info&&console.info($(this));\n        }\n      });\n      data[key] = $.html();\n    }\n  }\n});\n```\n\n\n\n#### È£üÁî®ÊñπÊ≥ï\n\nÂú®ÂÜômarkdownÊñá‰ª∂Êó∂ËÆæÁΩÆÂ•ΩÂõæÂÉèÁöÑÈóÆÈ¢òÔºåÊàëÁî®ÁöÑÊòØtyporaÊõ¥ÊîπÂõæÁâáËÆæÁΩÆÂ¶Ç‰∏ãÂõæ\n\n![image-20220111114426389](image-20220111114426389.png)\n\nËøôÊ†∑Â∞±‰ºöÂ∞ÜÂõæÁâáÂíåÊñá‰ª∂ÊîæÂà∞‰∏Ä‰∏™Êñá‰ª∂Â§π‰∏ã\n\n![image-20220111114517951](image-20220111114517951.png)\n\nÁÑ∂Âêé‰ΩøÁî®ÂëΩ‰ª§\n\n```yaml\nhexo new ËÆ∞ÂΩï‰∏Ä‰∏ãÂÆâË£ÖhexoÁöÑËøáÁ®ã\n```\n\nÊàñËÄÖÊâãÂä®Âú®  `Êñá‰ª∂/source/_post/ `‰∏ãÂàõÂª∫Áõ∏ÂêåÂêçÂ≠óÁöÑÊñá‰ª∂\n\nÁÑ∂ÂêéÂ∞ÜÂÜôÂ•ΩÁöÑmarkdownÊñá‰ª∂ÁöÑÂõæÁâáÊîæÂÖ•Êñá‰ª∂Â§πÈáå Â∞ÜmdÊñá‰ª∂ÊîæÂà∞Â§ñÈù¢\n\n![image-20220111115043380](image-20220111115043380.png)\n\nÊú¨‰∫∫Âª∫ËÆÆÁõ¥Êé•Â∞ÜÁºñËæëÂ•ΩÁöÑmarkdownÊñá‰ª∂Â§πÂ§çÂà∂Âà∞ `Êñá‰ª∂/source/_post/ ` ÁÑ∂ÂêéÂ∞Ü`.md`Êñá‰ª∂ÁªôÊãâÂà∞ÂíåÊñá‰ª∂Â§πÂêå‰∏ÄÂ±ÇÁ∫ßÔºåÂΩ¢Êàê‰∏äÂõæÁöÑÂ±ÇÁ∫ßÊ†ºÂºè \n\n#### TIP\n\n> Êñá‰ª∂Â§πÈáåÂè™ÊúâÂõæÁâá\n\n#### ‰øÆÊîπurl\n\n`_Config.yml`\n\n```yaml\n# URL\n## Set your site url here. For example, if you use GitHub Page, set url as 'https://username.github.io/project'\n\n#‰øÆÊîπurlÊòØÂõ†‰∏∫github‰∏çÂä†ËΩΩcssÂíåjs\nurl: https://username.github.io\nroot: /\n\n```\n\n> ËÆ∞Âæó‰∏ä‰º†Ê∫êÊñá‰ª∂Âà∞GitHubÊàñGitee‰∏ä\n>\n> Â∞ÜthemesÁöÑ‰∏ªÈ¢òÈáåÁöÑ`.git`Âà†Êéâ Âõ†‰∏∫github‰∏çËÉΩÂµåÂ•ó‰∏ä‰º†\n>\n> Âª∫ËÆÆÂ∞ÜpageÊîæÂÖ•‰∏Ä‰∏™ÂàÜÊîØ Ê∫êÁ†ÅÊîæÂÖ•‰∏Ä‰∏™ÂàÜÊîØ\n\n\n\n \n\n**Â¶ÇÊûúÊàëÁöÑÁúã‰∏çÊáÇÂèØ‰ª•Âª∫ËÆÆÁúã‰∏Ä‰∏ã[Ëøô‰∏™ÈìæÊé•](https://blog.csdn.net/sinat_37781304/article/details/82729029) ÊàëÂÅöÁöÑÊó∂ÂÄôÂ≠¶‰π†ÁöÑËøô‰∏™‰ΩúËÄÖÊâçÂÅöÂá∫Êù•ÁöÑÁªô‰∫ÜÊàë‰∏çÂ∞ëÂêØÂèë**\n\nÁ¨¨‰∏ÄÁØáÊñáÁ´†Âà∞Ê≠§ÁªìÊùüÔºÅÔºÅÔºÅü•≥ü•≥ü•≥\n\n\n\n# 2022.5.13 Update\n\nÈÄâÊã©‰∫ÜÊñ∞ÁöÑ‰∏ªÈ¢òÔºå‰∏ªÈ¢òÁõ∏ËæÉ‰∫é‰πãÂâçÁöÑÊõ¥Âä†‰∏∞ÂØåÔºåÂπ∂‰∏î‰ªégithub pageËøÅÁßªÂà∞‰∫Üvercel\n","slug":"001_hexo","published":1,"updated":"2022-06-21T14:26:21.691Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4o9jzi70003isv9d3rm2zck","content":"<h3 id=\"ËÆ∞ÂΩï‰∏Ä‰∏ãÂÆâË£ÖhexoÁöÑËøáÁ®ã\"><a href=\"#ËÆ∞ÂΩï‰∏Ä‰∏ãÂÆâË£ÖhexoÁöÑËøáÁ®ã\" class=\"headerlink\" title=\"ËÆ∞ÂΩï‰∏Ä‰∏ãÂÆâË£ÖhexoÁöÑËøáÁ®ã\"></a>ËÆ∞ÂΩï‰∏Ä‰∏ãÂÆâË£ÖhexoÁöÑËøáÁ®ã</h3><p>ÔºàÈò≤Ê≠¢‰ª•ÂêéÈÅóÂøò ‰∏çÁü•ÈÅìÂíãÂºÑÔºâ</p>\n<h4 id=\"ÂÆâË£Öhexo\"><a href=\"#ÂÆâË£Öhexo\" class=\"headerlink\" title=\"ÂÆâË£Öhexo\"></a>ÂÆâË£Öhexo</h4><p>È¶ñÂÖàÂÆâË£ÖÂ•Ωgit Âíå node js</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ npm install -g hexo-cli</span><br><span class=\"line\">or</span><br><span class=\"line\">$ npm install hexo</span><br></pre></td></tr></table></figure>\n\n<p>ÂÆåÊàê‰πãÂêéÁî® <strong><code>hexo -v</code></strong> Êü•ÁúãÁâàÊú¨</p>\n<p>Êé•‰∏ãÊù•ÂàùÂßãÂåñ <code>hexo</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo init Êñá‰ª∂Âêç</span><br><span class=\"line\">$ cd Êñá‰ª∂Âêç</span><br><span class=\"line\">$ npm install</span><br></pre></td></tr></table></figure>\n\n<p>Êñ∞Âª∫ÂÆåÊàê‰πãÂêé‰ºöÊúâÂ¶Ç‰∏ãÊñá‰ª∂Â§π</p>\n<p><img src=\"/2022/01/10/001_hexo/image-20220110162452660.png\" alt=\"image-20220110162452660\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo g</span><br><span class=\"line\">$ hexo s</span><br></pre></td></tr></table></figure>\n\n<p>‰πãÂêé‰æøÂèØ‰ª•ËøõÂÖ•Âà∞ÂàùÂßãÂçöÂÆ¢</p>\n<p><img src=\"/2022/01/10/001_hexo/image-20220110162645465.png\" alt=\"image-20220110162645465\"></p>\n<h4 id=\"GitHubÊàñGitee-ÂàõÂª∫Êñ∞Â∫ì\"><a href=\"#GitHubÊàñGitee-ÂàõÂª∫Êñ∞Â∫ì\" class=\"headerlink\" title=\"GitHubÊàñGitee ÂàõÂª∫Êñ∞Â∫ì\"></a>GitHubÊàñGitee ÂàõÂª∫Êñ∞Â∫ì</h4><p>TIP: Âú®GitHub‰∏äÊ≥®ÂÜåÁöÑ‰ªìÂ∫ìÂêç‰∏∫  <code>Áõ∏ÂêåÁöÑÁî®Êà∑Âêç.github.io</code></p>\n<p>‚Äã        Gitee‰∏ä‰∏∫<code>Áõ∏ÂêåÁöÑÁî®Êà∑Âêç</code></p>\n<h4 id=\"Â∞ÜhexoÈÉ®ÁΩ≤Âà∞GitHubÊàñGitee‰∏ä\"><a href=\"#Â∞ÜhexoÈÉ®ÁΩ≤Âà∞GitHubÊàñGitee‰∏ä\" class=\"headerlink\" title=\"Â∞ÜhexoÈÉ®ÁΩ≤Âà∞GitHubÊàñGitee‰∏ä\"></a>Â∞ÜhexoÈÉ®ÁΩ≤Âà∞GitHubÊàñGitee‰∏ä</h4><p>ÂÖàÂÆâË£Ödeploy-git</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>\n\n<p>Âú®**<code>_config.yml</code>**Êñá‰ª∂‰∏≠ÊúÄÂêé‰øÆÊîπ</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">deploy:</span></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"attr\">type:</span> <span class=\"string\">&#x27;git&#x27;</span></span><br><span class=\"line\">  <span class=\"attr\">repo:</span> <span class=\"string\">https://github.com/username/username.github.io.git</span></span><br><span class=\"line\">  <span class=\"attr\">branch:</span> <span class=\"string\">blog</span></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"attr\">type:</span> <span class=\"string\">&#x27;git&#x27;</span></span><br><span class=\"line\">  <span class=\"attr\">repo:</span> <span class=\"string\">https://gitee.com/username/username.git</span></span><br><span class=\"line\">  <span class=\"attr\">branch:</span> <span class=\"string\">blog</span></span><br></pre></td></tr></table></figure>\n\n<p>ÁÑ∂ÂêéÊâßË°åÂëΩ‰ª§</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo clean</span><br><span class=\"line\">$ hexo g</span><br><span class=\"line\">$ hexo d</span><br></pre></td></tr></table></figure>\n\n<p>ÂÖ∂‰∏≠ <code>hexo clean</code>Ê∏ÖÈô§‰∫Ü‰Ω†‰πãÂâçÁîüÊàêÁöÑ‰∏úË•øÔºå‰πüÂèØ‰ª•‰∏çÂä†„ÄÇ<br><code>hexo generate</code> È°æÂêçÊÄù‰πâÔºåÁîüÊàêÈùôÊÄÅÊñáÁ´†ÔºåÂèØ‰ª•Áî® <code>hexo g</code>Áº©ÂÜô<br><code>hexo deploy</code> ÈÉ®ÁΩ≤ÊñáÁ´†ÔºåÂèØ‰ª•Áî®<code>hexo d</code>Áº©ÂÜô</p>\n<p>ÈÉ®ÁΩ≤ÁªìÊùü</p>\n<h4 id=\"‰øÆÊîπ‰∏ªÈ¢ò\"><a href=\"#‰øÆÊîπ‰∏ªÈ¢ò\" class=\"headerlink\" title=\"‰øÆÊîπ‰∏ªÈ¢ò\"></a>‰øÆÊîπ‰∏ªÈ¢ò</h4><p>ÊàëÈÄâÊã©ÁöÑÊòØ <a href=\"https://github.com/MrWillCom/hexo-theme-cupertino\">Hexo Theme Cupertino</a></p>\n<p><img src=\"/2022/01/10/001_hexo/image-20220110164357577.png\" alt=\"image-20220110164357577\"></p>\n<p>ÂÆåÂÖ®Á¨¶ÂêàÊàëÁöÑÂÆ°Áæé</p>\n<p>ËøõÂÖ•‰∏ªÈ¢òÊñá‰ª∂</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ cd themes</span><br><span class=\"line\">$ git clone https://github.com/MrWillCom/hexo-theme-cupertino.git</span><br></pre></td></tr></table></figure>\n\n<p>‰øÆÊîπÂÖ®Â±ÄÈÖçÁΩÆÊñá‰ª∂ <code>_config.yml</code></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">theme:</span> <span class=\"string\">hexo-theme-cupertino</span></span><br></pre></td></tr></table></figure>\n\n<p>‰øÆÊîπÂéü‰ΩúËÄÖÁöÑÈìæÊé•</p>\n<p><img src=\"/2022/01/10/001_hexo/image-20220110165134907.png\" alt=\"image-20220110165134907\"></p>\n<p><code>Ê∑ªÂä†ÊµèËßàÂô®ÂõæÊ†ápngÊîæÂà∞ Êñá‰ª∂Âêç/source ‰∏ã</code></p>\n<p>‰øÆÊîπÂÖ®Â±ÄÈÖçÁΩÆÊñá‰ª∂</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">subtitle:&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"string\">description:&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<p>ËøôÊòØÁé∞ÂÆûÂú®‰∏ªÈ°µÁöÑ‰∏§Ë°åÂ≠ó‰Ωì ‰ΩúËÄÖÊ∫êÁ†ÅËß£ÈáäÂú®Ê≠§</p>\n<p><img src=\"/2022/01/10/001_hexo/image-20220110165549516.png\" alt=\"image-20220110165549516\"></p>\n<p>Ëá≥Ê≠§‰∏ªÈ¢òÈÉ®ÂàÜÈÖçÁΩÆÂ∑≤ÁªìÊùü</p>\n<h4 id=\"ÂÖ≥‰∫éÂõæÁâáÊèíÂÖ•ÁöÑÈóÆÈ¢ò\"><a href=\"#ÂÖ≥‰∫éÂõæÁâáÊèíÂÖ•ÁöÑÈóÆÈ¢ò\" class=\"headerlink\" title=\"ÂÖ≥‰∫éÂõæÁâáÊèíÂÖ•ÁöÑÈóÆÈ¢ò\"></a>ÂÖ≥‰∫éÂõæÁâáÊèíÂÖ•ÁöÑÈóÆÈ¢ò</h4><p>ÊàëÁúãÂà∞‰∏Ä‰∏™Êèí‰ª∂ÈùûÂ∏∏‰∏≠ÊÑè ‰ΩÜÊòØÂÆâË£ÖÁöÑÊó∂ÂÄôÂá∫Áé∞ÈóÆÈ¢òÂ∞±‰∏ÄÁõ¥Ê≤°ËÉΩË£Ö‰∏ä</p>\n<p><strong><a href=\"https://github.com/boboidream/hexo-easy-images#hexo-easy-images\">hexo-easy-images</a></strong></p>\n<p>ÁÑ∂ÂêéÂØπÊØî‰ΩøÁî®‰∫Ü**<a href=\"https://github.com/JoeyBling/hexo-filter-image\">hexo-filter-image</a>** Âíå <strong><a href=\"https://github.com/xcodebuild/hexo-asset-image\">hexo-asset-image</a></strong> ‰πãÂêéÊàëÈÄâÊã©‰∫Ü‰ΩøÁî®ÂêéËÄÖ</p>\n<p>Êé•‰∏ãÊù•ÊòØÊàëÁöÑ‰ΩøÁî®ÊñπÊ°à</p>\n<h4 id=\"ÂÆâË£Ö-hexo-asset-image\"><a href=\"#ÂÆâË£Ö-hexo-asset-image\" class=\"headerlink\" title=\"ÂÆâË£Ö  hexo-asset-image\"></a>ÂÆâË£Ö  <strong><a href=\"https://github.com/xcodebuild/hexo-asset-image\">hexo-asset-image</a></strong></h4><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install hexo-asset-image --save</span><br></pre></td></tr></table></figure>\n\n<p>Ê∫êÊñá‰ª∂<code>/node_modules/hexo-asset-image/index.js</code>ÈáåÁöÑ‰ª£Á†ÅÊúâÈîôËØØ ÈúÄË¶ÅËøõË°å‰øÆÊîπ‰∏∫‰ª•‰∏ã‰ª£Á†Å</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&#x27;use strict&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> cheerio = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;cheerio&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// http://stackoverflow.com/questions/14480345/how-to-get-the-nth-occurrence-in-a-string</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getPosition</span>(<span class=\"params\">str, m, i</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> str.split(m, i).join(m).length;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> version = <span class=\"built_in\">String</span>(hexo.version).split(<span class=\"string\">&#x27;.&#x27;</span>);</span><br><span class=\"line\">hexo.extend.filter.register(<span class=\"string\">&#x27;after_post_render&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> config = hexo.config;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(config.post_asset_folder)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> link = data.permalink;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(version.length &gt; <span class=\"number\">0</span> &amp;&amp; <span class=\"built_in\">Number</span>(version[<span class=\"number\">0</span>]) == <span class=\"number\">3</span>)</span><br><span class=\"line\">       <span class=\"keyword\">var</span> beginPos = getPosition(link, <span class=\"string\">&#x27;/&#x27;</span>, <span class=\"number\">1</span>) + <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">       <span class=\"keyword\">var</span> beginPos = getPosition(link, <span class=\"string\">&#x27;/&#x27;</span>, <span class=\"number\">3</span>) + <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"comment\">// In hexo 3.1.1, the permalink of &quot;about&quot; page is like &quot;.../about/index.html&quot;.</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> endPos = link.lastIndexOf(<span class=\"string\">&#x27;/&#x27;</span>) + <span class=\"number\">1</span>;</span><br><span class=\"line\">    link = link.substring(beginPos, endPos);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> toprocess = [<span class=\"string\">&#x27;excerpt&#x27;</span>, <span class=\"string\">&#x27;more&#x27;</span>, <span class=\"string\">&#x27;content&#x27;</span>];</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; toprocess.length; i++)&#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> key = toprocess[i];</span><br><span class=\"line\"> </span><br><span class=\"line\">      <span class=\"keyword\">var</span> $ = cheerio.load(data[key], &#123;</span><br><span class=\"line\">        <span class=\"attr\">ignoreWhitespace</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        <span class=\"attr\">xmlMode</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        <span class=\"attr\">lowerCaseTags</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        <span class=\"attr\">decodeEntities</span>: <span class=\"literal\">false</span></span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">      $(<span class=\"string\">&#x27;img&#x27;</span>).each(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($(<span class=\"built_in\">this</span>).attr(<span class=\"string\">&#x27;src&#x27;</span>))&#123;</span><br><span class=\"line\">            <span class=\"comment\">// For windows style path, we replace &#x27;\\&#x27; to &#x27;/&#x27;.</span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> src = $(<span class=\"built_in\">this</span>).attr(<span class=\"string\">&#x27;src&#x27;</span>).replace(<span class=\"string\">&#x27;\\\\&#x27;</span>, <span class=\"string\">&#x27;/&#x27;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(!<span class=\"regexp\">/http[s]*.*|\\/\\/.*/</span>.test(src) &amp;&amp;</span><br><span class=\"line\">               !<span class=\"regexp\">/^\\s*\\//</span>.test(src)) &#123;</span><br><span class=\"line\">              <span class=\"comment\">// For &quot;about&quot; page, the first part of &quot;src&quot; can&#x27;t be removed.</span></span><br><span class=\"line\">              <span class=\"comment\">// In addition, to support multi-level local directory.</span></span><br><span class=\"line\">              <span class=\"keyword\">var</span> linkArray = link.split(<span class=\"string\">&#x27;/&#x27;</span>).filter(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">elem</span>)</span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> elem != <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">              &#125;);</span><br><span class=\"line\">              <span class=\"keyword\">var</span> srcArray = src.split(<span class=\"string\">&#x27;/&#x27;</span>).filter(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">elem</span>)</span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> elem != <span class=\"string\">&#x27;&#x27;</span> &amp;&amp; elem != <span class=\"string\">&#x27;.&#x27;</span>;</span><br><span class=\"line\">              &#125;);</span><br><span class=\"line\">              <span class=\"keyword\">if</span>(srcArray.length &gt; <span class=\"number\">1</span>)</span><br><span class=\"line\">                srcArray.shift();</span><br><span class=\"line\">              src = srcArray.join(<span class=\"string\">&#x27;/&#x27;</span>);</span><br><span class=\"line\">              $(<span class=\"built_in\">this</span>).attr(<span class=\"string\">&#x27;src&#x27;</span>, config.root + link + src);</span><br><span class=\"line\">              <span class=\"built_in\">console</span>.info&amp;&amp;<span class=\"built_in\">console</span>.info(<span class=\"string\">&quot;update link as:--&gt;&quot;</span>+config.root + link + src);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.info&amp;&amp;<span class=\"built_in\">console</span>.info(<span class=\"string\">&quot;no src attr, skipped...&quot;</span>);</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.info&amp;&amp;<span class=\"built_in\">console</span>.info($(<span class=\"built_in\">this</span>));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">      data[key] = $.html();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"È£üÁî®ÊñπÊ≥ï\"><a href=\"#È£üÁî®ÊñπÊ≥ï\" class=\"headerlink\" title=\"È£üÁî®ÊñπÊ≥ï\"></a>È£üÁî®ÊñπÊ≥ï</h4><p>Âú®ÂÜômarkdownÊñá‰ª∂Êó∂ËÆæÁΩÆÂ•ΩÂõæÂÉèÁöÑÈóÆÈ¢òÔºåÊàëÁî®ÁöÑÊòØtyporaÊõ¥ÊîπÂõæÁâáËÆæÁΩÆÂ¶Ç‰∏ãÂõæ</p>\n<p><img src=\"/2022/01/10/001_hexo/image-20220111114426389.png\" alt=\"image-20220111114426389\"></p>\n<p>ËøôÊ†∑Â∞±‰ºöÂ∞ÜÂõæÁâáÂíåÊñá‰ª∂ÊîæÂà∞‰∏Ä‰∏™Êñá‰ª∂Â§π‰∏ã</p>\n<p><img src=\"/2022/01/10/001_hexo/image-20220111114517951.png\" alt=\"image-20220111114517951\"></p>\n<p>ÁÑ∂Âêé‰ΩøÁî®ÂëΩ‰ª§</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">hexo</span> <span class=\"string\">new</span> <span class=\"string\">ËÆ∞ÂΩï‰∏Ä‰∏ãÂÆâË£ÖhexoÁöÑËøáÁ®ã</span></span><br></pre></td></tr></table></figure>\n\n<p>ÊàñËÄÖÊâãÂä®Âú®  <code>Êñá‰ª∂/source/_post/ </code>‰∏ãÂàõÂª∫Áõ∏ÂêåÂêçÂ≠óÁöÑÊñá‰ª∂</p>\n<p>ÁÑ∂ÂêéÂ∞ÜÂÜôÂ•ΩÁöÑmarkdownÊñá‰ª∂ÁöÑÂõæÁâáÊîæÂÖ•Êñá‰ª∂Â§πÈáå Â∞ÜmdÊñá‰ª∂ÊîæÂà∞Â§ñÈù¢</p>\n<p><img src=\"/2022/01/10/001_hexo/image-20220111115043380.png\" alt=\"image-20220111115043380\"></p>\n<p>Êú¨‰∫∫Âª∫ËÆÆÁõ¥Êé•Â∞ÜÁºñËæëÂ•ΩÁöÑmarkdownÊñá‰ª∂Â§πÂ§çÂà∂Âà∞ <code>Êñá‰ª∂/source/_post/ </code> ÁÑ∂ÂêéÂ∞Ü<code>.md</code>Êñá‰ª∂ÁªôÊãâÂà∞ÂíåÊñá‰ª∂Â§πÂêå‰∏ÄÂ±ÇÁ∫ßÔºåÂΩ¢Êàê‰∏äÂõæÁöÑÂ±ÇÁ∫ßÊ†ºÂºè </p>\n<h4 id=\"TIP\"><a href=\"#TIP\" class=\"headerlink\" title=\"TIP\"></a>TIP</h4><blockquote>\n<p>Êñá‰ª∂Â§πÈáåÂè™ÊúâÂõæÁâá</p>\n</blockquote>\n<h4 id=\"‰øÆÊîπurl\"><a href=\"#‰øÆÊîπurl\" class=\"headerlink\" title=\"‰øÆÊîπurl\"></a>‰øÆÊîπurl</h4><p><code>_Config.yml</code></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># URL</span></span><br><span class=\"line\"><span class=\"comment\">## Set your site url here. For example, if you use GitHub Page, set url as &#x27;https://username.github.io/project&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#‰øÆÊîπurlÊòØÂõ†‰∏∫github‰∏çÂä†ËΩΩcssÂíåjs</span></span><br><span class=\"line\"><span class=\"attr\">url:</span> <span class=\"string\">https://username.github.io</span></span><br><span class=\"line\"><span class=\"attr\">root:</span> <span class=\"string\">/</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ËÆ∞Âæó‰∏ä‰º†Ê∫êÊñá‰ª∂Âà∞GitHubÊàñGitee‰∏ä</p>\n<p>Â∞ÜthemesÁöÑ‰∏ªÈ¢òÈáåÁöÑ<code>.git</code>Âà†Êéâ Âõ†‰∏∫github‰∏çËÉΩÂµåÂ•ó‰∏ä‰º†</p>\n<p>Âª∫ËÆÆÂ∞ÜpageÊîæÂÖ•‰∏Ä‰∏™ÂàÜÊîØ Ê∫êÁ†ÅÊîæÂÖ•‰∏Ä‰∏™ÂàÜÊîØ</p>\n</blockquote>\n<p><strong>Â¶ÇÊûúÊàëÁöÑÁúã‰∏çÊáÇÂèØ‰ª•Âª∫ËÆÆÁúã‰∏Ä‰∏ã<a href=\"https://blog.csdn.net/sinat_37781304/article/details/82729029\">Ëøô‰∏™ÈìæÊé•</a> ÊàëÂÅöÁöÑÊó∂ÂÄôÂ≠¶‰π†ÁöÑËøô‰∏™‰ΩúËÄÖÊâçÂÅöÂá∫Êù•ÁöÑÁªô‰∫ÜÊàë‰∏çÂ∞ëÂêØÂèë</strong></p>\n<p>Á¨¨‰∏ÄÁØáÊñáÁ´†Âà∞Ê≠§ÁªìÊùüÔºÅÔºÅÔºÅü•≥ü•≥ü•≥</p>\n<h1 id=\"2022-5-13-Update\"><a href=\"#2022-5-13-Update\" class=\"headerlink\" title=\"2022.5.13 Update\"></a>2022.5.13 Update</h1><p>ÈÄâÊã©‰∫ÜÊñ∞ÁöÑ‰∏ªÈ¢òÔºå‰∏ªÈ¢òÁõ∏ËæÉ‰∫é‰πãÂâçÁöÑÊõ¥Âä†‰∏∞ÂØåÔºåÂπ∂‰∏î‰ªégithub pageËøÅÁßªÂà∞‰∫Üvercel</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"ËÆ∞ÂΩï‰∏Ä‰∏ãÂÆâË£ÖhexoÁöÑËøáÁ®ã\"><a href=\"#ËÆ∞ÂΩï‰∏Ä‰∏ãÂÆâË£ÖhexoÁöÑËøáÁ®ã\" class=\"headerlink\" title=\"ËÆ∞ÂΩï‰∏Ä‰∏ãÂÆâË£ÖhexoÁöÑËøáÁ®ã\"></a>ËÆ∞ÂΩï‰∏Ä‰∏ãÂÆâË£ÖhexoÁöÑËøáÁ®ã</h3><p>ÔºàÈò≤Ê≠¢‰ª•ÂêéÈÅóÂøò ‰∏çÁü•ÈÅìÂíãÂºÑÔºâ</p>\n<h4 id=\"ÂÆâË£Öhexo\"><a href=\"#ÂÆâË£Öhexo\" class=\"headerlink\" title=\"ÂÆâË£Öhexo\"></a>ÂÆâË£Öhexo</h4><p>È¶ñÂÖàÂÆâË£ÖÂ•Ωgit Âíå node js</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ npm install -g hexo-cli</span><br><span class=\"line\">or</span><br><span class=\"line\">$ npm install hexo</span><br></pre></td></tr></table></figure>\n\n<p>ÂÆåÊàê‰πãÂêéÁî® <strong><code>hexo -v</code></strong> Êü•ÁúãÁâàÊú¨</p>\n<p>Êé•‰∏ãÊù•ÂàùÂßãÂåñ <code>hexo</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo init Êñá‰ª∂Âêç</span><br><span class=\"line\">$ cd Êñá‰ª∂Âêç</span><br><span class=\"line\">$ npm install</span><br></pre></td></tr></table></figure>\n\n<p>Êñ∞Âª∫ÂÆåÊàê‰πãÂêé‰ºöÊúâÂ¶Ç‰∏ãÊñá‰ª∂Â§π</p>\n<p><img src=\"/2022/01/10/001_hexo/image-20220110162452660.png\" alt=\"image-20220110162452660\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo g</span><br><span class=\"line\">$ hexo s</span><br></pre></td></tr></table></figure>\n\n<p>‰πãÂêé‰æøÂèØ‰ª•ËøõÂÖ•Âà∞ÂàùÂßãÂçöÂÆ¢</p>\n<p><img src=\"/2022/01/10/001_hexo/image-20220110162645465.png\" alt=\"image-20220110162645465\"></p>\n<h4 id=\"GitHubÊàñGitee-ÂàõÂª∫Êñ∞Â∫ì\"><a href=\"#GitHubÊàñGitee-ÂàõÂª∫Êñ∞Â∫ì\" class=\"headerlink\" title=\"GitHubÊàñGitee ÂàõÂª∫Êñ∞Â∫ì\"></a>GitHubÊàñGitee ÂàõÂª∫Êñ∞Â∫ì</h4><p>TIP: Âú®GitHub‰∏äÊ≥®ÂÜåÁöÑ‰ªìÂ∫ìÂêç‰∏∫  <code>Áõ∏ÂêåÁöÑÁî®Êà∑Âêç.github.io</code></p>\n<p>‚Äã        Gitee‰∏ä‰∏∫<code>Áõ∏ÂêåÁöÑÁî®Êà∑Âêç</code></p>\n<h4 id=\"Â∞ÜhexoÈÉ®ÁΩ≤Âà∞GitHubÊàñGitee‰∏ä\"><a href=\"#Â∞ÜhexoÈÉ®ÁΩ≤Âà∞GitHubÊàñGitee‰∏ä\" class=\"headerlink\" title=\"Â∞ÜhexoÈÉ®ÁΩ≤Âà∞GitHubÊàñGitee‰∏ä\"></a>Â∞ÜhexoÈÉ®ÁΩ≤Âà∞GitHubÊàñGitee‰∏ä</h4><p>ÂÖàÂÆâË£Ödeploy-git</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>\n\n<p>Âú®**<code>_config.yml</code>**Êñá‰ª∂‰∏≠ÊúÄÂêé‰øÆÊîπ</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">deploy:</span></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"attr\">type:</span> <span class=\"string\">&#x27;git&#x27;</span></span><br><span class=\"line\">  <span class=\"attr\">repo:</span> <span class=\"string\">https://github.com/username/username.github.io.git</span></span><br><span class=\"line\">  <span class=\"attr\">branch:</span> <span class=\"string\">blog</span></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"attr\">type:</span> <span class=\"string\">&#x27;git&#x27;</span></span><br><span class=\"line\">  <span class=\"attr\">repo:</span> <span class=\"string\">https://gitee.com/username/username.git</span></span><br><span class=\"line\">  <span class=\"attr\">branch:</span> <span class=\"string\">blog</span></span><br></pre></td></tr></table></figure>\n\n<p>ÁÑ∂ÂêéÊâßË°åÂëΩ‰ª§</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo clean</span><br><span class=\"line\">$ hexo g</span><br><span class=\"line\">$ hexo d</span><br></pre></td></tr></table></figure>\n\n<p>ÂÖ∂‰∏≠ <code>hexo clean</code>Ê∏ÖÈô§‰∫Ü‰Ω†‰πãÂâçÁîüÊàêÁöÑ‰∏úË•øÔºå‰πüÂèØ‰ª•‰∏çÂä†„ÄÇ<br><code>hexo generate</code> È°æÂêçÊÄù‰πâÔºåÁîüÊàêÈùôÊÄÅÊñáÁ´†ÔºåÂèØ‰ª•Áî® <code>hexo g</code>Áº©ÂÜô<br><code>hexo deploy</code> ÈÉ®ÁΩ≤ÊñáÁ´†ÔºåÂèØ‰ª•Áî®<code>hexo d</code>Áº©ÂÜô</p>\n<p>ÈÉ®ÁΩ≤ÁªìÊùü</p>\n<h4 id=\"‰øÆÊîπ‰∏ªÈ¢ò\"><a href=\"#‰øÆÊîπ‰∏ªÈ¢ò\" class=\"headerlink\" title=\"‰øÆÊîπ‰∏ªÈ¢ò\"></a>‰øÆÊîπ‰∏ªÈ¢ò</h4><p>ÊàëÈÄâÊã©ÁöÑÊòØ <a href=\"https://github.com/MrWillCom/hexo-theme-cupertino\">Hexo Theme Cupertino</a></p>\n<p><img src=\"/2022/01/10/001_hexo/image-20220110164357577.png\" alt=\"image-20220110164357577\"></p>\n<p>ÂÆåÂÖ®Á¨¶ÂêàÊàëÁöÑÂÆ°Áæé</p>\n<p>ËøõÂÖ•‰∏ªÈ¢òÊñá‰ª∂</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ cd themes</span><br><span class=\"line\">$ git clone https://github.com/MrWillCom/hexo-theme-cupertino.git</span><br></pre></td></tr></table></figure>\n\n<p>‰øÆÊîπÂÖ®Â±ÄÈÖçÁΩÆÊñá‰ª∂ <code>_config.yml</code></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">theme:</span> <span class=\"string\">hexo-theme-cupertino</span></span><br></pre></td></tr></table></figure>\n\n<p>‰øÆÊîπÂéü‰ΩúËÄÖÁöÑÈìæÊé•</p>\n<p><img src=\"/2022/01/10/001_hexo/image-20220110165134907.png\" alt=\"image-20220110165134907\"></p>\n<p><code>Ê∑ªÂä†ÊµèËßàÂô®ÂõæÊ†ápngÊîæÂà∞ Êñá‰ª∂Âêç/source ‰∏ã</code></p>\n<p>‰øÆÊîπÂÖ®Â±ÄÈÖçÁΩÆÊñá‰ª∂</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">subtitle:&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"string\">description:&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<p>ËøôÊòØÁé∞ÂÆûÂú®‰∏ªÈ°µÁöÑ‰∏§Ë°åÂ≠ó‰Ωì ‰ΩúËÄÖÊ∫êÁ†ÅËß£ÈáäÂú®Ê≠§</p>\n<p><img src=\"/2022/01/10/001_hexo/image-20220110165549516.png\" alt=\"image-20220110165549516\"></p>\n<p>Ëá≥Ê≠§‰∏ªÈ¢òÈÉ®ÂàÜÈÖçÁΩÆÂ∑≤ÁªìÊùü</p>\n<h4 id=\"ÂÖ≥‰∫éÂõæÁâáÊèíÂÖ•ÁöÑÈóÆÈ¢ò\"><a href=\"#ÂÖ≥‰∫éÂõæÁâáÊèíÂÖ•ÁöÑÈóÆÈ¢ò\" class=\"headerlink\" title=\"ÂÖ≥‰∫éÂõæÁâáÊèíÂÖ•ÁöÑÈóÆÈ¢ò\"></a>ÂÖ≥‰∫éÂõæÁâáÊèíÂÖ•ÁöÑÈóÆÈ¢ò</h4><p>ÊàëÁúãÂà∞‰∏Ä‰∏™Êèí‰ª∂ÈùûÂ∏∏‰∏≠ÊÑè ‰ΩÜÊòØÂÆâË£ÖÁöÑÊó∂ÂÄôÂá∫Áé∞ÈóÆÈ¢òÂ∞±‰∏ÄÁõ¥Ê≤°ËÉΩË£Ö‰∏ä</p>\n<p><strong><a href=\"https://github.com/boboidream/hexo-easy-images#hexo-easy-images\">hexo-easy-images</a></strong></p>\n<p>ÁÑ∂ÂêéÂØπÊØî‰ΩøÁî®‰∫Ü**<a href=\"https://github.com/JoeyBling/hexo-filter-image\">hexo-filter-image</a>** Âíå <strong><a href=\"https://github.com/xcodebuild/hexo-asset-image\">hexo-asset-image</a></strong> ‰πãÂêéÊàëÈÄâÊã©‰∫Ü‰ΩøÁî®ÂêéËÄÖ</p>\n<p>Êé•‰∏ãÊù•ÊòØÊàëÁöÑ‰ΩøÁî®ÊñπÊ°à</p>\n<h4 id=\"ÂÆâË£Ö-hexo-asset-image\"><a href=\"#ÂÆâË£Ö-hexo-asset-image\" class=\"headerlink\" title=\"ÂÆâË£Ö  hexo-asset-image\"></a>ÂÆâË£Ö  <strong><a href=\"https://github.com/xcodebuild/hexo-asset-image\">hexo-asset-image</a></strong></h4><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install hexo-asset-image --save</span><br></pre></td></tr></table></figure>\n\n<p>Ê∫êÊñá‰ª∂<code>/node_modules/hexo-asset-image/index.js</code>ÈáåÁöÑ‰ª£Á†ÅÊúâÈîôËØØ ÈúÄË¶ÅËøõË°å‰øÆÊîπ‰∏∫‰ª•‰∏ã‰ª£Á†Å</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&#x27;use strict&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> cheerio = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;cheerio&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// http://stackoverflow.com/questions/14480345/how-to-get-the-nth-occurrence-in-a-string</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getPosition</span>(<span class=\"params\">str, m, i</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> str.split(m, i).join(m).length;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> version = <span class=\"built_in\">String</span>(hexo.version).split(<span class=\"string\">&#x27;.&#x27;</span>);</span><br><span class=\"line\">hexo.extend.filter.register(<span class=\"string\">&#x27;after_post_render&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> config = hexo.config;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(config.post_asset_folder)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> link = data.permalink;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(version.length &gt; <span class=\"number\">0</span> &amp;&amp; <span class=\"built_in\">Number</span>(version[<span class=\"number\">0</span>]) == <span class=\"number\">3</span>)</span><br><span class=\"line\">       <span class=\"keyword\">var</span> beginPos = getPosition(link, <span class=\"string\">&#x27;/&#x27;</span>, <span class=\"number\">1</span>) + <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">       <span class=\"keyword\">var</span> beginPos = getPosition(link, <span class=\"string\">&#x27;/&#x27;</span>, <span class=\"number\">3</span>) + <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"comment\">// In hexo 3.1.1, the permalink of &quot;about&quot; page is like &quot;.../about/index.html&quot;.</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> endPos = link.lastIndexOf(<span class=\"string\">&#x27;/&#x27;</span>) + <span class=\"number\">1</span>;</span><br><span class=\"line\">    link = link.substring(beginPos, endPos);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> toprocess = [<span class=\"string\">&#x27;excerpt&#x27;</span>, <span class=\"string\">&#x27;more&#x27;</span>, <span class=\"string\">&#x27;content&#x27;</span>];</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; toprocess.length; i++)&#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> key = toprocess[i];</span><br><span class=\"line\"> </span><br><span class=\"line\">      <span class=\"keyword\">var</span> $ = cheerio.load(data[key], &#123;</span><br><span class=\"line\">        <span class=\"attr\">ignoreWhitespace</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        <span class=\"attr\">xmlMode</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        <span class=\"attr\">lowerCaseTags</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        <span class=\"attr\">decodeEntities</span>: <span class=\"literal\">false</span></span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">      $(<span class=\"string\">&#x27;img&#x27;</span>).each(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($(<span class=\"built_in\">this</span>).attr(<span class=\"string\">&#x27;src&#x27;</span>))&#123;</span><br><span class=\"line\">            <span class=\"comment\">// For windows style path, we replace &#x27;\\&#x27; to &#x27;/&#x27;.</span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> src = $(<span class=\"built_in\">this</span>).attr(<span class=\"string\">&#x27;src&#x27;</span>).replace(<span class=\"string\">&#x27;\\\\&#x27;</span>, <span class=\"string\">&#x27;/&#x27;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(!<span class=\"regexp\">/http[s]*.*|\\/\\/.*/</span>.test(src) &amp;&amp;</span><br><span class=\"line\">               !<span class=\"regexp\">/^\\s*\\//</span>.test(src)) &#123;</span><br><span class=\"line\">              <span class=\"comment\">// For &quot;about&quot; page, the first part of &quot;src&quot; can&#x27;t be removed.</span></span><br><span class=\"line\">              <span class=\"comment\">// In addition, to support multi-level local directory.</span></span><br><span class=\"line\">              <span class=\"keyword\">var</span> linkArray = link.split(<span class=\"string\">&#x27;/&#x27;</span>).filter(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">elem</span>)</span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> elem != <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">              &#125;);</span><br><span class=\"line\">              <span class=\"keyword\">var</span> srcArray = src.split(<span class=\"string\">&#x27;/&#x27;</span>).filter(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">elem</span>)</span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> elem != <span class=\"string\">&#x27;&#x27;</span> &amp;&amp; elem != <span class=\"string\">&#x27;.&#x27;</span>;</span><br><span class=\"line\">              &#125;);</span><br><span class=\"line\">              <span class=\"keyword\">if</span>(srcArray.length &gt; <span class=\"number\">1</span>)</span><br><span class=\"line\">                srcArray.shift();</span><br><span class=\"line\">              src = srcArray.join(<span class=\"string\">&#x27;/&#x27;</span>);</span><br><span class=\"line\">              $(<span class=\"built_in\">this</span>).attr(<span class=\"string\">&#x27;src&#x27;</span>, config.root + link + src);</span><br><span class=\"line\">              <span class=\"built_in\">console</span>.info&amp;&amp;<span class=\"built_in\">console</span>.info(<span class=\"string\">&quot;update link as:--&gt;&quot;</span>+config.root + link + src);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.info&amp;&amp;<span class=\"built_in\">console</span>.info(<span class=\"string\">&quot;no src attr, skipped...&quot;</span>);</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.info&amp;&amp;<span class=\"built_in\">console</span>.info($(<span class=\"built_in\">this</span>));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">      data[key] = $.html();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"È£üÁî®ÊñπÊ≥ï\"><a href=\"#È£üÁî®ÊñπÊ≥ï\" class=\"headerlink\" title=\"È£üÁî®ÊñπÊ≥ï\"></a>È£üÁî®ÊñπÊ≥ï</h4><p>Âú®ÂÜômarkdownÊñá‰ª∂Êó∂ËÆæÁΩÆÂ•ΩÂõæÂÉèÁöÑÈóÆÈ¢òÔºåÊàëÁî®ÁöÑÊòØtyporaÊõ¥ÊîπÂõæÁâáËÆæÁΩÆÂ¶Ç‰∏ãÂõæ</p>\n<p><img src=\"/2022/01/10/001_hexo/image-20220111114426389.png\" alt=\"image-20220111114426389\"></p>\n<p>ËøôÊ†∑Â∞±‰ºöÂ∞ÜÂõæÁâáÂíåÊñá‰ª∂ÊîæÂà∞‰∏Ä‰∏™Êñá‰ª∂Â§π‰∏ã</p>\n<p><img src=\"/2022/01/10/001_hexo/image-20220111114517951.png\" alt=\"image-20220111114517951\"></p>\n<p>ÁÑ∂Âêé‰ΩøÁî®ÂëΩ‰ª§</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">hexo</span> <span class=\"string\">new</span> <span class=\"string\">ËÆ∞ÂΩï‰∏Ä‰∏ãÂÆâË£ÖhexoÁöÑËøáÁ®ã</span></span><br></pre></td></tr></table></figure>\n\n<p>ÊàñËÄÖÊâãÂä®Âú®  <code>Êñá‰ª∂/source/_post/ </code>‰∏ãÂàõÂª∫Áõ∏ÂêåÂêçÂ≠óÁöÑÊñá‰ª∂</p>\n<p>ÁÑ∂ÂêéÂ∞ÜÂÜôÂ•ΩÁöÑmarkdownÊñá‰ª∂ÁöÑÂõæÁâáÊîæÂÖ•Êñá‰ª∂Â§πÈáå Â∞ÜmdÊñá‰ª∂ÊîæÂà∞Â§ñÈù¢</p>\n<p><img src=\"/2022/01/10/001_hexo/image-20220111115043380.png\" alt=\"image-20220111115043380\"></p>\n<p>Êú¨‰∫∫Âª∫ËÆÆÁõ¥Êé•Â∞ÜÁºñËæëÂ•ΩÁöÑmarkdownÊñá‰ª∂Â§πÂ§çÂà∂Âà∞ <code>Êñá‰ª∂/source/_post/ </code> ÁÑ∂ÂêéÂ∞Ü<code>.md</code>Êñá‰ª∂ÁªôÊãâÂà∞ÂíåÊñá‰ª∂Â§πÂêå‰∏ÄÂ±ÇÁ∫ßÔºåÂΩ¢Êàê‰∏äÂõæÁöÑÂ±ÇÁ∫ßÊ†ºÂºè </p>\n<h4 id=\"TIP\"><a href=\"#TIP\" class=\"headerlink\" title=\"TIP\"></a>TIP</h4><blockquote>\n<p>Êñá‰ª∂Â§πÈáåÂè™ÊúâÂõæÁâá</p>\n</blockquote>\n<h4 id=\"‰øÆÊîπurl\"><a href=\"#‰øÆÊîπurl\" class=\"headerlink\" title=\"‰øÆÊîπurl\"></a>‰øÆÊîπurl</h4><p><code>_Config.yml</code></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># URL</span></span><br><span class=\"line\"><span class=\"comment\">## Set your site url here. For example, if you use GitHub Page, set url as &#x27;https://username.github.io/project&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#‰øÆÊîπurlÊòØÂõ†‰∏∫github‰∏çÂä†ËΩΩcssÂíåjs</span></span><br><span class=\"line\"><span class=\"attr\">url:</span> <span class=\"string\">https://username.github.io</span></span><br><span class=\"line\"><span class=\"attr\">root:</span> <span class=\"string\">/</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ËÆ∞Âæó‰∏ä‰º†Ê∫êÊñá‰ª∂Âà∞GitHubÊàñGitee‰∏ä</p>\n<p>Â∞ÜthemesÁöÑ‰∏ªÈ¢òÈáåÁöÑ<code>.git</code>Âà†Êéâ Âõ†‰∏∫github‰∏çËÉΩÂµåÂ•ó‰∏ä‰º†</p>\n<p>Âª∫ËÆÆÂ∞ÜpageÊîæÂÖ•‰∏Ä‰∏™ÂàÜÊîØ Ê∫êÁ†ÅÊîæÂÖ•‰∏Ä‰∏™ÂàÜÊîØ</p>\n</blockquote>\n<p><strong>Â¶ÇÊûúÊàëÁöÑÁúã‰∏çÊáÇÂèØ‰ª•Âª∫ËÆÆÁúã‰∏Ä‰∏ã<a href=\"https://blog.csdn.net/sinat_37781304/article/details/82729029\">Ëøô‰∏™ÈìæÊé•</a> ÊàëÂÅöÁöÑÊó∂ÂÄôÂ≠¶‰π†ÁöÑËøô‰∏™‰ΩúËÄÖÊâçÂÅöÂá∫Êù•ÁöÑÁªô‰∫ÜÊàë‰∏çÂ∞ëÂêØÂèë</strong></p>\n<p>Á¨¨‰∏ÄÁØáÊñáÁ´†Âà∞Ê≠§ÁªìÊùüÔºÅÔºÅÔºÅü•≥ü•≥ü•≥</p>\n<h1 id=\"2022-5-13-Update\"><a href=\"#2022-5-13-Update\" class=\"headerlink\" title=\"2022.5.13 Update\"></a>2022.5.13 Update</h1><p>ÈÄâÊã©‰∫ÜÊñ∞ÁöÑ‰∏ªÈ¢òÔºå‰∏ªÈ¢òÁõ∏ËæÉ‰∫é‰πãÂâçÁöÑÊõ¥Âä†‰∏∞ÂØåÔºåÂπ∂‰∏î‰ªégithub pageËøÅÁßªÂà∞‰∫Üvercel</p>\n"},{"title":"ÂÖ≥‰∫éInventoryÁöÑÂà∂‰Ωú","description":null,"date":"2022-05-30T16:00:00.000Z","top_image":"/img/003.png","cover":"/img/003.png","_content":"\n# Introduce\n\nÈ¶ñÂÖàËøòÊòØË¶ÅÊÑüË∞¢È∫¶Êâ£ËÄÅÂ∏àÔºå[ËßÜÈ¢ëÈìæÊé•](https://www.bilibili.com/video/BV1YJ41197SU?p=2)„ÄÇ\n\nÂà∂‰Ωú‰πãÂêéÁöÑ(ÁÆÄÈôã)ÁïåÈù¢„ÄÇ\n\n![image-20220603143654206](image-20220603143654206.png)\n\n# UIÁïåÈù¢\n\n**UIÂ±ÇÁ∫ß**\n\n- Canvas  `BagManager.cs`\n  - Bag  `MoveBag.cs`\n    - Title  Ê†áÈ¢ò\n    - Exit   Âè≥‰∏äËßí ‚Äù√ó‚Äú\n    - Grid  Áâ©ÂìÅÊ†º\n    - Info   Áâ©ÂìÅ‰ªãÁªç\n\n> Grid ÈÄöËøá‰ΩøÁî®GridLayoutGroupÁªÑ‰ª∂ËøõË°åÊéíÂàóÁªÑÂêà\n\n**È¢ÑÂà∂‰ΩìSlotÁöÑÂà∂‰Ωú**\n\nSlotÂú®ËøôÈáå‰Ωú‰∏∫ÊØè‰∏™Ê†ºÂ≠êÊòæÁ§∫ÁöÑÊï¥‰ΩìÔºåÁßªÂä®ÊãñÊãΩÁÇπÂáªÊòæÁ§∫Á≠âÂäüËÉΩÈÉΩÊòØÈÄöËøáËøô‰∏™Slot„ÄÇ\n\n- Slot  `Slot.cs`\n  - Item  Button/`ItemOnDrag.cs`\n    - ItemImage  ÊòæÁ§∫ÁöÑÂõæÂÉè\n    - Number  ÊòæÁ§∫Êï∞Èáè\n\n`Slot.cs`\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.UI;\n\npublic class Slot : MonoBehaviour\n{\n    public int slotId;\n    public Item item;\n\n    public Image image;\n\n    public Text num;\n\n    public GameObject itemInSlot;\n\n    public string slotInfo;\n    public void ItemOnClick()\n    {\n        BagManager.instance.UpdateInfo(slotInfo);\n    }\n\n    public void SetItem(Item item)\n    {\n        if (item == null)\n        {\n            itemInSlot.SetActive(false);\n            return;\n        }\n        //ËµãÂÄº\n        image.sprite = item.sprite;\n        num.text = item.holdNum.ToString();\n        slotInfo = item.info;\n    }\n}\n\n```\n\n\n\n# ScriptableObjectÂ≠òÂÇ®\n\nÂ≠òÂÇ®Áâ©ÂìÅÁöÑÂ±ûÊÄß:`Item.cs`\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n\n//ÂàõÂª∫Êñ∞ÁöÑËèúÂçï\n[CreateAssetMenu(fileName = \"New Item\",menuName = \"Item/item\")]\n\npublic class Item : ScriptableObject\n{\n    public string _name;//Áâ©ÂìÅÂêçÂ≠ó\n    public Sprite sprite;//Áâ©ÂìÅÂõæÁâá\n    public int holdNum;//ÊåÅÊúâÊï∞Èáè\n    \n    //‰ΩøÂæóÊñáÊú¨Ê°ÜÂèòÂ§ß\n    [TextArea]\n    public string  info;//Áâ©ÂìÅ‰ªãÁªç‰ø°ÊÅØ\n}\n\n```\n\nËÉåÂåÖÁöÑÂ≠òÂÇ®:`Bag.cs`\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n\n[CreateAssetMenu(fileName =\"New Bag\",menuName =\"Item/bag\")]\npublic class Bag : ScriptableObject\n{\n    //ÂàõÂª∫ÂàóË°®ÔºåÂ≠òÂÇ®Áâ©ÂìÅ\n    public List<Item> list = new List<Item>();\n}\n\n```\n\nÁâ©ÂìÅÊ∑ªÂä†ÊãæÂèñÂäüËÉΩ`shiqu.cs`\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n\npublic class Shiqu : MonoBehaviour\n{\n    public Item item;\n\n    public Bag bag;\n\n    private void OnTriggerEnter2D(Collider2D collision)\n    {\n        if (collision.gameObject.CompareTag(\"Player\"))\n        {\n            //Debug.Log(\"item\" + item.holdNum);\n            if (bag.list.Contains(item))\n            {\n                item.holdNum += 1;\n                //Debug.Log(\"bag:\" + bag.list[0].holdNum);\n            }\n            else\n            {\n                //bag.list.Add(item);\n\n                //Â¶ÇÊûúÊúâÁ©∫‰ΩçÂàôÊ∑ªÂä†\n                for (int i = 0; i < bag.list.Count; i++)\n                {\n                    if (bag.list[i] == null)\n                    {\n                        bag.list[i] = item;\n                        break;\n                    }\n                }\n\n            }\n\n            Destroy(gameObject);\n        }\n        BagManager.instance.Refresh();\n    }\n}\n\n```\n\n# ËÉåÂåÖÊòæÁ§∫\n\n‰∏ªË¶ÅÊÄùÊÉ≥ÊòØÂΩìÁé©ÂÆ∂ÊãæÂèñÁâ©ÂìÅ„ÄÅÊâìÂºÄËÉåÂåÖ‰πãÂêéÔºåÈÉΩ‰ºöËøõË°å‰∏ÄÊ¨°Âà∑Êñ∞„ÄÇ\n\n`BagManager.cs`\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.UI;\n\npublic class BagManager : MonoBehaviour\n{\n    public static BagManager instance;\n\n    public Bag bag;\n    public GameObject slotGrid;\n    //public Slot slot;\n    public GameObject emptySlot;\n\n    public Text info;\n\n    //ÊòæÁ§∫ÂΩìÂâçÁâ©ÂìÅÁöÑÂàóË°®Ôºå‰ªébagÈáåËé∑ÂèñÊï∞ÊçÆ\n    public List<GameObject> slots = new List<GameObject>();\n\n    private void Awake()\n    {\n        if (instance != null)\n            Destroy(this);\n        instance = this;\n    }\n\n    private void OnEnable()\n    {\n        Refresh();\n        info.text = \"\";\n    }\n    public void UpdateInfo(string itemInfo)\n    {\n        info.text = itemInfo;\n    }\n\n    /*ÁîüÊàêÊ†ºÂ≠êÔºåÊúâÂ§öÂ∞ëÁâ©ÂìÅÁîüÊàêÂ§öÂ∞ëÊ†ºÂ≠ê\n    public void CreateSolt(Item item)\n    {\n        Slot newslot = Instantiate(slot, instance.slotGrid.transform.position, Quaternion.identity);\n\n        newslot.gameObject.transform.SetParent(instance.slotGrid.transform,false);\n\n        newslot.image.sprite = item.sprite;\n        newslot.item = item;\n        newslot.num.text = item.holdNum.ToString();\n    }\n    */\n    public void Refresh()\n    {\n        //ÂÖàÊ∏ÖÁ©∫ÂéüÁâ©ÂìÅÂØπË±°ÂíåÂ≠òÂÇ®Áâ©ÂìÅÊï∞ÊçÆÁöÑÂàóË°®\n        for (int i = 0; i < slotGrid.transform.childCount; i++)\n        {\n            if (slotGrid.transform.childCount == 0)\n                break;\n            //Âà†Èô§Â≠êÈõÜÁöÑÁ©∫Áâ©‰Ωì\n            Destroy(slotGrid.transform.GetChild(i).gameObject);\n            //Ê∏ÖÁ©∫ÂàóË°®\n            slots.Clear();\n        }\n        //ÈáçÊñ∞ÁîüÊàê\n        for (int i = 0; i < bag.list.Count; i++)\n        {\n            //CreateSolt(bag.list[i]);\n\n            //Ê∑ªÂä†Á©∫ÁôΩÊ†ºÂπ∂ËÆæÁΩÆÁà∂Á∫ß\n            slots.Add(Instantiate(emptySlot));\n            //ËÆæÁΩÆfalse‰ºö‰ΩøÂæóÂä†ËΩΩÁöÑÊó∂ÂÄôÂõæÁâá‰∏çË¢´Áº©Êîæ\n            slots[i].transform.SetParent(slotGrid.transform,false);\n            //ËÆæÁΩÆÂõæÁâá Êï∞Èáè\n            slots[i].GetComponent<Slot>().SetItem(bag.list[i]);\n            //ËÆæÁΩÆÁâ©ÂìÅÁöÑÁºñÂè∑\n            slots[i].GetComponent<Slot>().slotId = i;\n        }\n    }\n}\n\n```\n\n# Áâ©ÂìÅÊãñÊãΩ‰∏éÊï∞ÊçÆËΩ¨Êç¢\n\nÂΩìÁâ©ÂìÅËøõË°åÊãñÊãΩÊó∂ÔºåÂÖàÂ∞ÜÂÖ∂Áà∂Á∫ßÊõ¥Êîπ‰∏∫Áà∂Á∫ßÁöÑÁà∂Á∫ßÔºåÈò≤Ê≠¢Âá∫Áé∞ÈÅÆÊå°ÁöÑÈóÆÈ¢òÔºåÁÑ∂ÂêéÊ†πÊçÆÂ∞ÑÁ∫øÈÅÆÊå°Âà§Êñ≠Èº†Ê†áÁßªÂä®ÁöÑ‰ΩçÁΩÆ„ÄÇ\n\n> SlotÁöÑItemÊ∑ªÂä†‰∏§‰∏™ÁªÑ‰ª∂Ôºö\n>\n> Canvas GroupÔºöBlockRaycastsÂºÄÂêØÔºåÂΩìÈº†Ê†áÁßªÂä®ÁöÑÊó∂ÂÄôÁü•ÈÅìÁßªÂä®ÁöÑ‰ΩçÁΩÆ\n>\n> LayoutElementÔºöIgnoreLayoutÂºÄÂêØÔºåÊõ¥ÊîπÁà∂Á∫ßÂÖÉÁ¥†Êó∂Ôºå‰∏ç‰ºöË∑≥Âà∞ËøõÂÖ•Âà∞ÊéíÂ∫èË°åÂàó\n\n`ItemOnDrag.cs`\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n//ÂºïÁî®\nusing UnityEngine.EventSystems;\n\n//‰ΩøÁî®‰∏â‰∏™Êé•Âè£\npublic class ItemOnDrag : MonoBehaviour, IBeginDragHandler, IDragHandler, IEndDragHandler\n{\n    //ÁßªÂä®ÁöÑÁâ©‰ΩìÁöÑÂàùÂßãÁà∂Á∫ß\n    public Transform originParent;\n\n    public Bag bag;\n    int currentItemId;\n    public void OnBeginDrag(PointerEventData eventData)\n    {\n        originParent = transform.parent;\n        currentItemId = originParent.GetComponent<Slot>().slotId;\n        //Êõ¥Êç¢Áà∂Á∫ßÔºå‰ΩøÂÖ∂ÁΩÆ‰∫é‰∏äÂ±Ç‰∏çË¢´ÈÅÆÊå°\n        transform.SetParent(transform.parent.parent);\n        transform.position = eventData.position;\n        //‰øÆÊîπÈº†Ê†áÁßªÂä®ÁöÑÁâ©‰ΩìÁöÑÈÅÆÊå°Â±ûÊÄß\n        GetComponent<CanvasGroup>().blocksRaycasts = false;\n    }\n\n    public void OnDrag(PointerEventData eventData)\n    {\n        transform.position = eventData.position;\n        Debug.Log(eventData.pointerCurrentRaycast.gameObject.name);\n    }\n\n    public void OnEndDrag(PointerEventData eventData)\n    {\n        //Âà§Êñ≠ÊòØÂê¶Â±û‰∫éËÆæÁΩÆÁöÑÁïåÈù¢Â§ñ\n        if (eventData.pointerCurrentRaycast.gameObject != null)\n        {\n            //Èº†Ê†áÂ∞ÑÁ∫øÁ¢∞ÊíûÂà∞ÁöÑÁâ©‰Ωì,ÂèØËÉΩÁ¢∞Âà∞ÂõæÁâáÊàñÊñáÂ≠ó\n            if (eventData.pointerCurrentRaycast.gameObject.name == \"ItemImage\" || eventData.pointerCurrentRaycast.gameObject.name == \"Number\")\n            {\n                //Êõ¥Êç¢Èº†Ê†áÁßªÂä®Áâ©‰ΩìÁöÑ‰ΩçÁΩÆÂíåÁà∂Á∫ß\n                transform.SetParent(eventData.pointerCurrentRaycast.gameObject.transform.parent.parent);\n                transform.position = eventData.pointerCurrentRaycast.gameObject.transform.parent.parent.position;\n                //Êõ¥Êç¢‰∏§‰∏™Áâ©‰Ωì‰ø°ÊÅØ\n                var temp = bag.list[currentItemId];\n                bag.list[currentItemId] = bag.list[eventData.pointerCurrentRaycast.gameObject.GetComponentInParent<Slot>().slotId];\n                bag.list[eventData.pointerCurrentRaycast.gameObject.GetComponentInParent<Slot>().slotId] = temp;\n                //Êõ¥Êç¢ÂΩìÂâçÈº†Ê†á‰ΩçÁΩÆÁâ©‰ΩìÁöÑ‰ΩçÁΩÆÂíåÁà∂Á∫ß‰∏∫ÂéüÁâ©‰ΩìÁöÑ‰ΩçÁΩÆ‰∏éÁà∂Á∫ß\n                eventData.pointerCurrentRaycast.gameObject.transform.parent.position = originParent.position;\n                eventData.pointerCurrentRaycast.gameObject.transform.parent.SetParent(originParent);\n\n                GetComponent<CanvasGroup>().blocksRaycasts = true;\n                return;\n            }\n            //Â¶ÇÊûúÊòØÁ©∫ÂÄºÔºåÂàô‰∫§Êç¢Á©∫ÂÄºÁöÑ‰ΩçÁΩÆ\n            //Êõ¥Êç¢ÂΩìÂâçÈº†Ê†á‰ΩçÁΩÆÁâ©‰ΩìÁöÑ‰ΩçÁΩÆÂíåÁà∂Á∫ß‰∏∫ÂéüÁâ©‰ΩìÁöÑ‰ΩçÁΩÆ‰∏éÁà∂Á∫ß\n            //eventData.pointerCurrentRaycast.gameObject.transform.GetChild(0).SetParent(originParent);\n            //eventData.pointerCurrentRaycast.gameObject.transform.GetChild(0).position = originParent.position;\n            if (eventData.pointerCurrentRaycast.gameObject.name == \"Slot(Clone)\")\n            {\n                transform.SetParent(eventData.pointerCurrentRaycast.gameObject.transform);\n                transform.position = eventData.pointerCurrentRaycast.gameObject.transform.position;\n\n                bag.list[eventData.pointerCurrentRaycast.gameObject.GetComponentInParent<Slot>().slotId] = bag.list[currentItemId];\n                //Âà§Êñ≠ÊòØ‰∏çÊòØÂêå‰∏Ä‰∏™‰ΩçÁΩÆ\n                //Âêå‰∏Ä‰ΩçÁΩÆÂàô‰∏çËÉΩËÆæÁΩÆ‰∏∫null\n                if (eventData.pointerCurrentRaycast.gameObject.GetComponentInParent<Slot>().slotId != currentItemId)\n                    bag.list[currentItemId] = null;\n\n                GetComponent<CanvasGroup>().blocksRaycasts = true;\n                return;\n            }\n        }\n        //Â¶ÇÊûúÊòØÂàôËøîÂõûÂéü‰ΩçÁΩÆ\n        transform.SetParent(originParent);\n        transform.position = originParent.position;\n        GetComponent<CanvasGroup>().blocksRaycasts = true;\n\n\n    }\n}\n\n```\n\n# Á™óÂè£ÁßªÂä®\n\n`MoveBag.cs`\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.EventSystems;\n\npublic class MoveBag : MonoBehaviour,IDragHandler\n{\n    RectTransform rectTransform;\n\n    private void Awake()\n    {\n        rectTransform = GetComponent<RectTransform>();\n    }\n    public void OnDrag(PointerEventData eventData)\n    {\n        //ÁßªÂä®anchor‰∏∫Èº†Ê†áÁßªÂä®ÁöÑË∑ùÁ¶ª\n        //Ë∞ÉËØïÁöÑÊó∂ÂÄôÂèØËÉΩ‰ºö‰∏çË∑üÊâãÔºåbuild‰πãÂêé‰∏ç‰ºöÂá∫Áé∞ËøôÁßçÊÉÖÂÜµ\n        rectTransform.anchoredPosition += eventData.delta;\n    }\n\n    // Start is called before the first frame update\n\n}\n\n```\n\n","source":"_posts/003_Inventory.md","raw":"---\ntitle: ÂÖ≥‰∫éInventoryÁöÑÂà∂‰Ωú\ndescription: \ndate: 2022-5-31\ntop_image: /img/003.png\ncover: /img/003.png\ncategories: \n- Unity\ntag: \n- Games\n- Ê∏∏ÊàèÂà∂‰Ωú\n- M_studio\n\n---\n\n# Introduce\n\nÈ¶ñÂÖàËøòÊòØË¶ÅÊÑüË∞¢È∫¶Êâ£ËÄÅÂ∏àÔºå[ËßÜÈ¢ëÈìæÊé•](https://www.bilibili.com/video/BV1YJ41197SU?p=2)„ÄÇ\n\nÂà∂‰Ωú‰πãÂêéÁöÑ(ÁÆÄÈôã)ÁïåÈù¢„ÄÇ\n\n![image-20220603143654206](image-20220603143654206.png)\n\n# UIÁïåÈù¢\n\n**UIÂ±ÇÁ∫ß**\n\n- Canvas  `BagManager.cs`\n  - Bag  `MoveBag.cs`\n    - Title  Ê†áÈ¢ò\n    - Exit   Âè≥‰∏äËßí ‚Äù√ó‚Äú\n    - Grid  Áâ©ÂìÅÊ†º\n    - Info   Áâ©ÂìÅ‰ªãÁªç\n\n> Grid ÈÄöËøá‰ΩøÁî®GridLayoutGroupÁªÑ‰ª∂ËøõË°åÊéíÂàóÁªÑÂêà\n\n**È¢ÑÂà∂‰ΩìSlotÁöÑÂà∂‰Ωú**\n\nSlotÂú®ËøôÈáå‰Ωú‰∏∫ÊØè‰∏™Ê†ºÂ≠êÊòæÁ§∫ÁöÑÊï¥‰ΩìÔºåÁßªÂä®ÊãñÊãΩÁÇπÂáªÊòæÁ§∫Á≠âÂäüËÉΩÈÉΩÊòØÈÄöËøáËøô‰∏™Slot„ÄÇ\n\n- Slot  `Slot.cs`\n  - Item  Button/`ItemOnDrag.cs`\n    - ItemImage  ÊòæÁ§∫ÁöÑÂõæÂÉè\n    - Number  ÊòæÁ§∫Êï∞Èáè\n\n`Slot.cs`\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.UI;\n\npublic class Slot : MonoBehaviour\n{\n    public int slotId;\n    public Item item;\n\n    public Image image;\n\n    public Text num;\n\n    public GameObject itemInSlot;\n\n    public string slotInfo;\n    public void ItemOnClick()\n    {\n        BagManager.instance.UpdateInfo(slotInfo);\n    }\n\n    public void SetItem(Item item)\n    {\n        if (item == null)\n        {\n            itemInSlot.SetActive(false);\n            return;\n        }\n        //ËµãÂÄº\n        image.sprite = item.sprite;\n        num.text = item.holdNum.ToString();\n        slotInfo = item.info;\n    }\n}\n\n```\n\n\n\n# ScriptableObjectÂ≠òÂÇ®\n\nÂ≠òÂÇ®Áâ©ÂìÅÁöÑÂ±ûÊÄß:`Item.cs`\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n\n//ÂàõÂª∫Êñ∞ÁöÑËèúÂçï\n[CreateAssetMenu(fileName = \"New Item\",menuName = \"Item/item\")]\n\npublic class Item : ScriptableObject\n{\n    public string _name;//Áâ©ÂìÅÂêçÂ≠ó\n    public Sprite sprite;//Áâ©ÂìÅÂõæÁâá\n    public int holdNum;//ÊåÅÊúâÊï∞Èáè\n    \n    //‰ΩøÂæóÊñáÊú¨Ê°ÜÂèòÂ§ß\n    [TextArea]\n    public string  info;//Áâ©ÂìÅ‰ªãÁªç‰ø°ÊÅØ\n}\n\n```\n\nËÉåÂåÖÁöÑÂ≠òÂÇ®:`Bag.cs`\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n\n[CreateAssetMenu(fileName =\"New Bag\",menuName =\"Item/bag\")]\npublic class Bag : ScriptableObject\n{\n    //ÂàõÂª∫ÂàóË°®ÔºåÂ≠òÂÇ®Áâ©ÂìÅ\n    public List<Item> list = new List<Item>();\n}\n\n```\n\nÁâ©ÂìÅÊ∑ªÂä†ÊãæÂèñÂäüËÉΩ`shiqu.cs`\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n\npublic class Shiqu : MonoBehaviour\n{\n    public Item item;\n\n    public Bag bag;\n\n    private void OnTriggerEnter2D(Collider2D collision)\n    {\n        if (collision.gameObject.CompareTag(\"Player\"))\n        {\n            //Debug.Log(\"item\" + item.holdNum);\n            if (bag.list.Contains(item))\n            {\n                item.holdNum += 1;\n                //Debug.Log(\"bag:\" + bag.list[0].holdNum);\n            }\n            else\n            {\n                //bag.list.Add(item);\n\n                //Â¶ÇÊûúÊúâÁ©∫‰ΩçÂàôÊ∑ªÂä†\n                for (int i = 0; i < bag.list.Count; i++)\n                {\n                    if (bag.list[i] == null)\n                    {\n                        bag.list[i] = item;\n                        break;\n                    }\n                }\n\n            }\n\n            Destroy(gameObject);\n        }\n        BagManager.instance.Refresh();\n    }\n}\n\n```\n\n# ËÉåÂåÖÊòæÁ§∫\n\n‰∏ªË¶ÅÊÄùÊÉ≥ÊòØÂΩìÁé©ÂÆ∂ÊãæÂèñÁâ©ÂìÅ„ÄÅÊâìÂºÄËÉåÂåÖ‰πãÂêéÔºåÈÉΩ‰ºöËøõË°å‰∏ÄÊ¨°Âà∑Êñ∞„ÄÇ\n\n`BagManager.cs`\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.UI;\n\npublic class BagManager : MonoBehaviour\n{\n    public static BagManager instance;\n\n    public Bag bag;\n    public GameObject slotGrid;\n    //public Slot slot;\n    public GameObject emptySlot;\n\n    public Text info;\n\n    //ÊòæÁ§∫ÂΩìÂâçÁâ©ÂìÅÁöÑÂàóË°®Ôºå‰ªébagÈáåËé∑ÂèñÊï∞ÊçÆ\n    public List<GameObject> slots = new List<GameObject>();\n\n    private void Awake()\n    {\n        if (instance != null)\n            Destroy(this);\n        instance = this;\n    }\n\n    private void OnEnable()\n    {\n        Refresh();\n        info.text = \"\";\n    }\n    public void UpdateInfo(string itemInfo)\n    {\n        info.text = itemInfo;\n    }\n\n    /*ÁîüÊàêÊ†ºÂ≠êÔºåÊúâÂ§öÂ∞ëÁâ©ÂìÅÁîüÊàêÂ§öÂ∞ëÊ†ºÂ≠ê\n    public void CreateSolt(Item item)\n    {\n        Slot newslot = Instantiate(slot, instance.slotGrid.transform.position, Quaternion.identity);\n\n        newslot.gameObject.transform.SetParent(instance.slotGrid.transform,false);\n\n        newslot.image.sprite = item.sprite;\n        newslot.item = item;\n        newslot.num.text = item.holdNum.ToString();\n    }\n    */\n    public void Refresh()\n    {\n        //ÂÖàÊ∏ÖÁ©∫ÂéüÁâ©ÂìÅÂØπË±°ÂíåÂ≠òÂÇ®Áâ©ÂìÅÊï∞ÊçÆÁöÑÂàóË°®\n        for (int i = 0; i < slotGrid.transform.childCount; i++)\n        {\n            if (slotGrid.transform.childCount == 0)\n                break;\n            //Âà†Èô§Â≠êÈõÜÁöÑÁ©∫Áâ©‰Ωì\n            Destroy(slotGrid.transform.GetChild(i).gameObject);\n            //Ê∏ÖÁ©∫ÂàóË°®\n            slots.Clear();\n        }\n        //ÈáçÊñ∞ÁîüÊàê\n        for (int i = 0; i < bag.list.Count; i++)\n        {\n            //CreateSolt(bag.list[i]);\n\n            //Ê∑ªÂä†Á©∫ÁôΩÊ†ºÂπ∂ËÆæÁΩÆÁà∂Á∫ß\n            slots.Add(Instantiate(emptySlot));\n            //ËÆæÁΩÆfalse‰ºö‰ΩøÂæóÂä†ËΩΩÁöÑÊó∂ÂÄôÂõæÁâá‰∏çË¢´Áº©Êîæ\n            slots[i].transform.SetParent(slotGrid.transform,false);\n            //ËÆæÁΩÆÂõæÁâá Êï∞Èáè\n            slots[i].GetComponent<Slot>().SetItem(bag.list[i]);\n            //ËÆæÁΩÆÁâ©ÂìÅÁöÑÁºñÂè∑\n            slots[i].GetComponent<Slot>().slotId = i;\n        }\n    }\n}\n\n```\n\n# Áâ©ÂìÅÊãñÊãΩ‰∏éÊï∞ÊçÆËΩ¨Êç¢\n\nÂΩìÁâ©ÂìÅËøõË°åÊãñÊãΩÊó∂ÔºåÂÖàÂ∞ÜÂÖ∂Áà∂Á∫ßÊõ¥Êîπ‰∏∫Áà∂Á∫ßÁöÑÁà∂Á∫ßÔºåÈò≤Ê≠¢Âá∫Áé∞ÈÅÆÊå°ÁöÑÈóÆÈ¢òÔºåÁÑ∂ÂêéÊ†πÊçÆÂ∞ÑÁ∫øÈÅÆÊå°Âà§Êñ≠Èº†Ê†áÁßªÂä®ÁöÑ‰ΩçÁΩÆ„ÄÇ\n\n> SlotÁöÑItemÊ∑ªÂä†‰∏§‰∏™ÁªÑ‰ª∂Ôºö\n>\n> Canvas GroupÔºöBlockRaycastsÂºÄÂêØÔºåÂΩìÈº†Ê†áÁßªÂä®ÁöÑÊó∂ÂÄôÁü•ÈÅìÁßªÂä®ÁöÑ‰ΩçÁΩÆ\n>\n> LayoutElementÔºöIgnoreLayoutÂºÄÂêØÔºåÊõ¥ÊîπÁà∂Á∫ßÂÖÉÁ¥†Êó∂Ôºå‰∏ç‰ºöË∑≥Âà∞ËøõÂÖ•Âà∞ÊéíÂ∫èË°åÂàó\n\n`ItemOnDrag.cs`\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n//ÂºïÁî®\nusing UnityEngine.EventSystems;\n\n//‰ΩøÁî®‰∏â‰∏™Êé•Âè£\npublic class ItemOnDrag : MonoBehaviour, IBeginDragHandler, IDragHandler, IEndDragHandler\n{\n    //ÁßªÂä®ÁöÑÁâ©‰ΩìÁöÑÂàùÂßãÁà∂Á∫ß\n    public Transform originParent;\n\n    public Bag bag;\n    int currentItemId;\n    public void OnBeginDrag(PointerEventData eventData)\n    {\n        originParent = transform.parent;\n        currentItemId = originParent.GetComponent<Slot>().slotId;\n        //Êõ¥Êç¢Áà∂Á∫ßÔºå‰ΩøÂÖ∂ÁΩÆ‰∫é‰∏äÂ±Ç‰∏çË¢´ÈÅÆÊå°\n        transform.SetParent(transform.parent.parent);\n        transform.position = eventData.position;\n        //‰øÆÊîπÈº†Ê†áÁßªÂä®ÁöÑÁâ©‰ΩìÁöÑÈÅÆÊå°Â±ûÊÄß\n        GetComponent<CanvasGroup>().blocksRaycasts = false;\n    }\n\n    public void OnDrag(PointerEventData eventData)\n    {\n        transform.position = eventData.position;\n        Debug.Log(eventData.pointerCurrentRaycast.gameObject.name);\n    }\n\n    public void OnEndDrag(PointerEventData eventData)\n    {\n        //Âà§Êñ≠ÊòØÂê¶Â±û‰∫éËÆæÁΩÆÁöÑÁïåÈù¢Â§ñ\n        if (eventData.pointerCurrentRaycast.gameObject != null)\n        {\n            //Èº†Ê†áÂ∞ÑÁ∫øÁ¢∞ÊíûÂà∞ÁöÑÁâ©‰Ωì,ÂèØËÉΩÁ¢∞Âà∞ÂõæÁâáÊàñÊñáÂ≠ó\n            if (eventData.pointerCurrentRaycast.gameObject.name == \"ItemImage\" || eventData.pointerCurrentRaycast.gameObject.name == \"Number\")\n            {\n                //Êõ¥Êç¢Èº†Ê†áÁßªÂä®Áâ©‰ΩìÁöÑ‰ΩçÁΩÆÂíåÁà∂Á∫ß\n                transform.SetParent(eventData.pointerCurrentRaycast.gameObject.transform.parent.parent);\n                transform.position = eventData.pointerCurrentRaycast.gameObject.transform.parent.parent.position;\n                //Êõ¥Êç¢‰∏§‰∏™Áâ©‰Ωì‰ø°ÊÅØ\n                var temp = bag.list[currentItemId];\n                bag.list[currentItemId] = bag.list[eventData.pointerCurrentRaycast.gameObject.GetComponentInParent<Slot>().slotId];\n                bag.list[eventData.pointerCurrentRaycast.gameObject.GetComponentInParent<Slot>().slotId] = temp;\n                //Êõ¥Êç¢ÂΩìÂâçÈº†Ê†á‰ΩçÁΩÆÁâ©‰ΩìÁöÑ‰ΩçÁΩÆÂíåÁà∂Á∫ß‰∏∫ÂéüÁâ©‰ΩìÁöÑ‰ΩçÁΩÆ‰∏éÁà∂Á∫ß\n                eventData.pointerCurrentRaycast.gameObject.transform.parent.position = originParent.position;\n                eventData.pointerCurrentRaycast.gameObject.transform.parent.SetParent(originParent);\n\n                GetComponent<CanvasGroup>().blocksRaycasts = true;\n                return;\n            }\n            //Â¶ÇÊûúÊòØÁ©∫ÂÄºÔºåÂàô‰∫§Êç¢Á©∫ÂÄºÁöÑ‰ΩçÁΩÆ\n            //Êõ¥Êç¢ÂΩìÂâçÈº†Ê†á‰ΩçÁΩÆÁâ©‰ΩìÁöÑ‰ΩçÁΩÆÂíåÁà∂Á∫ß‰∏∫ÂéüÁâ©‰ΩìÁöÑ‰ΩçÁΩÆ‰∏éÁà∂Á∫ß\n            //eventData.pointerCurrentRaycast.gameObject.transform.GetChild(0).SetParent(originParent);\n            //eventData.pointerCurrentRaycast.gameObject.transform.GetChild(0).position = originParent.position;\n            if (eventData.pointerCurrentRaycast.gameObject.name == \"Slot(Clone)\")\n            {\n                transform.SetParent(eventData.pointerCurrentRaycast.gameObject.transform);\n                transform.position = eventData.pointerCurrentRaycast.gameObject.transform.position;\n\n                bag.list[eventData.pointerCurrentRaycast.gameObject.GetComponentInParent<Slot>().slotId] = bag.list[currentItemId];\n                //Âà§Êñ≠ÊòØ‰∏çÊòØÂêå‰∏Ä‰∏™‰ΩçÁΩÆ\n                //Âêå‰∏Ä‰ΩçÁΩÆÂàô‰∏çËÉΩËÆæÁΩÆ‰∏∫null\n                if (eventData.pointerCurrentRaycast.gameObject.GetComponentInParent<Slot>().slotId != currentItemId)\n                    bag.list[currentItemId] = null;\n\n                GetComponent<CanvasGroup>().blocksRaycasts = true;\n                return;\n            }\n        }\n        //Â¶ÇÊûúÊòØÂàôËøîÂõûÂéü‰ΩçÁΩÆ\n        transform.SetParent(originParent);\n        transform.position = originParent.position;\n        GetComponent<CanvasGroup>().blocksRaycasts = true;\n\n\n    }\n}\n\n```\n\n# Á™óÂè£ÁßªÂä®\n\n`MoveBag.cs`\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.EventSystems;\n\npublic class MoveBag : MonoBehaviour,IDragHandler\n{\n    RectTransform rectTransform;\n\n    private void Awake()\n    {\n        rectTransform = GetComponent<RectTransform>();\n    }\n    public void OnDrag(PointerEventData eventData)\n    {\n        //ÁßªÂä®anchor‰∏∫Èº†Ê†áÁßªÂä®ÁöÑË∑ùÁ¶ª\n        //Ë∞ÉËØïÁöÑÊó∂ÂÄôÂèØËÉΩ‰ºö‰∏çË∑üÊâãÔºåbuild‰πãÂêé‰∏ç‰ºöÂá∫Áé∞ËøôÁßçÊÉÖÂÜµ\n        rectTransform.anchoredPosition += eventData.delta;\n    }\n\n    // Start is called before the first frame update\n\n}\n\n```\n\n","slug":"003_Inventory","published":1,"updated":"2022-06-21T14:26:21.704Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4o9jzic0005isv9f3ktffid","content":"<h1 id=\"Introduce\"><a href=\"#Introduce\" class=\"headerlink\" title=\"Introduce\"></a>Introduce</h1><p>È¶ñÂÖàËøòÊòØË¶ÅÊÑüË∞¢È∫¶Êâ£ËÄÅÂ∏àÔºå<a href=\"https://www.bilibili.com/video/BV1YJ41197SU?p=2\">ËßÜÈ¢ëÈìæÊé•</a>„ÄÇ</p>\n<p>Âà∂‰Ωú‰πãÂêéÁöÑ(ÁÆÄÈôã)ÁïåÈù¢„ÄÇ</p>\n<p><img src=\"/2022/05/31/003_Inventory/image-20220603143654206.png\" alt=\"image-20220603143654206\"></p>\n<h1 id=\"UIÁïåÈù¢\"><a href=\"#UIÁïåÈù¢\" class=\"headerlink\" title=\"UIÁïåÈù¢\"></a>UIÁïåÈù¢</h1><p><strong>UIÂ±ÇÁ∫ß</strong></p>\n<ul>\n<li>Canvas  <code>BagManager.cs</code><ul>\n<li>Bag  <code>MoveBag.cs</code><ul>\n<li>Title  Ê†áÈ¢ò</li>\n<li>Exit   Âè≥‰∏äËßí ‚Äù√ó‚Äú</li>\n<li>Grid  Áâ©ÂìÅÊ†º</li>\n<li>Info   Áâ©ÂìÅ‰ªãÁªç</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>Grid ÈÄöËøá‰ΩøÁî®GridLayoutGroupÁªÑ‰ª∂ËøõË°åÊéíÂàóÁªÑÂêà</p>\n</blockquote>\n<p><strong>È¢ÑÂà∂‰ΩìSlotÁöÑÂà∂‰Ωú</strong></p>\n<p>SlotÂú®ËøôÈáå‰Ωú‰∏∫ÊØè‰∏™Ê†ºÂ≠êÊòæÁ§∫ÁöÑÊï¥‰ΩìÔºåÁßªÂä®ÊãñÊãΩÁÇπÂáªÊòæÁ§∫Á≠âÂäüËÉΩÈÉΩÊòØÈÄöËøáËøô‰∏™Slot„ÄÇ</p>\n<ul>\n<li>Slot  <code>Slot.cs</code><ul>\n<li>Item  Button/<code>ItemOnDrag.cs</code><ul>\n<li>ItemImage  ÊòæÁ§∫ÁöÑÂõæÂÉè</li>\n<li>Number  ÊòæÁ§∫Êï∞Èáè</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p><code>Slot.cs</code></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.UI;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">Slot</span> : <span class=\"title\">MonoBehaviour</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> slotId;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> Item item;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Image image;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Text num;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> GameObject itemInSlot;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">string</span> slotInfo;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">ItemOnClick</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        BagManager.instance.UpdateInfo(slotInfo);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">SetItem</span>(<span class=\"params\">Item item</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (item == <span class=\"literal\">null</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            itemInSlot.SetActive(<span class=\"literal\">false</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//ËµãÂÄº</span></span><br><span class=\"line\">        image.sprite = item.sprite;</span><br><span class=\"line\">        num.text = item.holdNum.ToString();</span><br><span class=\"line\">        slotInfo = item.info;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"ScriptableObjectÂ≠òÂÇ®\"><a href=\"#ScriptableObjectÂ≠òÂÇ®\" class=\"headerlink\" title=\"ScriptableObjectÂ≠òÂÇ®\"></a>ScriptableObjectÂ≠òÂÇ®</h1><p>Â≠òÂÇ®Áâ©ÂìÅÁöÑÂ±ûÊÄß:<code>Item.cs</code></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//ÂàõÂª∫Êñ∞ÁöÑËèúÂçï</span></span><br><span class=\"line\">[<span class=\"meta\">CreateAssetMenu(fileName = <span class=\"meta-string\">&quot;New Item&quot;</span>,menuName = <span class=\"meta-string\">&quot;Item/item&quot;</span>)</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">Item</span> : <span class=\"title\">ScriptableObject</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">string</span> _name;<span class=\"comment\">//Áâ©ÂìÅÂêçÂ≠ó</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Sprite sprite;<span class=\"comment\">//Áâ©ÂìÅÂõæÁâá</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> holdNum;<span class=\"comment\">//ÊåÅÊúâÊï∞Èáè</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">//‰ΩøÂæóÊñáÊú¨Ê°ÜÂèòÂ§ß</span></span><br><span class=\"line\">    [<span class=\"meta\">TextArea</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">string</span>  info;<span class=\"comment\">//Áâ©ÂìÅ‰ªãÁªç‰ø°ÊÅØ</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>ËÉåÂåÖÁöÑÂ≠òÂÇ®:<code>Bag.cs</code></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"meta\">CreateAssetMenu(fileName =<span class=\"meta-string\">&quot;New Bag&quot;</span>,menuName =<span class=\"meta-string\">&quot;Item/bag&quot;</span>)</span>]</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">Bag</span> : <span class=\"title\">ScriptableObject</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\">//ÂàõÂª∫ÂàóË°®ÔºåÂ≠òÂÇ®Áâ©ÂìÅ</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">List</span>&lt;<span class=\"title\">Item</span>&gt; list</span> = <span class=\"keyword\">new</span> List&lt;Item&gt;();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>Áâ©ÂìÅÊ∑ªÂä†ÊãæÂèñÂäüËÉΩ<code>shiqu.cs</code></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">Shiqu</span> : <span class=\"title\">MonoBehaviour</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> Item item;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Bag bag;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">OnTriggerEnter2D</span>(<span class=\"params\">Collider2D collision</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (collision.gameObject.CompareTag(<span class=\"string\">&quot;Player&quot;</span>))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"comment\">//Debug.Log(&quot;item&quot; + item.holdNum);</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (bag.list.Contains(item))</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                item.holdNum += <span class=\"number\">1</span>;</span><br><span class=\"line\">                <span class=\"comment\">//Debug.Log(&quot;bag:&quot; + bag.list[0].holdNum);</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span></span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"comment\">//bag.list.Add(item);</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"comment\">//Â¶ÇÊûúÊúâÁ©∫‰ΩçÂàôÊ∑ªÂä†</span></span><br><span class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"built_in\">int</span> i = <span class=\"number\">0</span>; i &lt; bag.list.Count; i++)</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (bag.list[i] == <span class=\"literal\">null</span>)</span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        bag.list[i] = item;</span><br><span class=\"line\">                        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            Destroy(gameObject);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        BagManager.instance.Refresh();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"ËÉåÂåÖÊòæÁ§∫\"><a href=\"#ËÉåÂåÖÊòæÁ§∫\" class=\"headerlink\" title=\"ËÉåÂåÖÊòæÁ§∫\"></a>ËÉåÂåÖÊòæÁ§∫</h1><p>‰∏ªË¶ÅÊÄùÊÉ≥ÊòØÂΩìÁé©ÂÆ∂ÊãæÂèñÁâ©ÂìÅ„ÄÅÊâìÂºÄËÉåÂåÖ‰πãÂêéÔºåÈÉΩ‰ºöËøõË°å‰∏ÄÊ¨°Âà∑Êñ∞„ÄÇ</p>\n<p><code>BagManager.cs</code></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.UI;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">BagManager</span> : <span class=\"title\">MonoBehaviour</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> BagManager instance;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Bag bag;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> GameObject slotGrid;</span><br><span class=\"line\">    <span class=\"comment\">//public Slot slot;</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> GameObject emptySlot;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Text info;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//ÊòæÁ§∫ÂΩìÂâçÁâ©ÂìÅÁöÑÂàóË°®Ôºå‰ªébagÈáåËé∑ÂèñÊï∞ÊçÆ</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">List</span>&lt;<span class=\"title\">GameObject</span>&gt; slots</span> = <span class=\"keyword\">new</span> List&lt;GameObject&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">Awake</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (instance != <span class=\"literal\">null</span>)</span><br><span class=\"line\">            Destroy(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">        instance = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">OnEnable</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        Refresh();</span><br><span class=\"line\">        info.text = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">UpdateInfo</span>(<span class=\"params\"><span class=\"built_in\">string</span> itemInfo</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        info.text = itemInfo;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/*ÁîüÊàêÊ†ºÂ≠êÔºåÊúâÂ§öÂ∞ëÁâ©ÂìÅÁîüÊàêÂ§öÂ∞ëÊ†ºÂ≠ê</span></span><br><span class=\"line\"><span class=\"comment\">    public void CreateSolt(Item item)</span></span><br><span class=\"line\"><span class=\"comment\">    &#123;</span></span><br><span class=\"line\"><span class=\"comment\">        Slot newslot = Instantiate(slot, instance.slotGrid.transform.position, Quaternion.identity);</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">        newslot.gameObject.transform.SetParent(instance.slotGrid.transform,false);</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">        newslot.image.sprite = item.sprite;</span></span><br><span class=\"line\"><span class=\"comment\">        newslot.item = item;</span></span><br><span class=\"line\"><span class=\"comment\">        newslot.num.text = item.holdNum.ToString();</span></span><br><span class=\"line\"><span class=\"comment\">    &#125;</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">Refresh</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//ÂÖàÊ∏ÖÁ©∫ÂéüÁâ©ÂìÅÂØπË±°ÂíåÂ≠òÂÇ®Áâ©ÂìÅÊï∞ÊçÆÁöÑÂàóË°®</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"built_in\">int</span> i = <span class=\"number\">0</span>; i &lt; slotGrid.transform.childCount; i++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (slotGrid.transform.childCount == <span class=\"number\">0</span>)</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"comment\">//Âà†Èô§Â≠êÈõÜÁöÑÁ©∫Áâ©‰Ωì</span></span><br><span class=\"line\">            Destroy(slotGrid.transform.GetChild(i).gameObject);</span><br><span class=\"line\">            <span class=\"comment\">//Ê∏ÖÁ©∫ÂàóË°®</span></span><br><span class=\"line\">            slots.Clear();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//ÈáçÊñ∞ÁîüÊàê</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"built_in\">int</span> i = <span class=\"number\">0</span>; i &lt; bag.list.Count; i++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"comment\">//CreateSolt(bag.list[i]);</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">//Ê∑ªÂä†Á©∫ÁôΩÊ†ºÂπ∂ËÆæÁΩÆÁà∂Á∫ß</span></span><br><span class=\"line\">            slots.Add(Instantiate(emptySlot));</span><br><span class=\"line\">            <span class=\"comment\">//ËÆæÁΩÆfalse‰ºö‰ΩøÂæóÂä†ËΩΩÁöÑÊó∂ÂÄôÂõæÁâá‰∏çË¢´Áº©Êîæ</span></span><br><span class=\"line\">            slots[i].transform.SetParent(slotGrid.transform,<span class=\"literal\">false</span>);</span><br><span class=\"line\">            <span class=\"comment\">//ËÆæÁΩÆÂõæÁâá Êï∞Èáè</span></span><br><span class=\"line\">            slots[i].GetComponent&lt;Slot&gt;().SetItem(bag.list[i]);</span><br><span class=\"line\">            <span class=\"comment\">//ËÆæÁΩÆÁâ©ÂìÅÁöÑÁºñÂè∑</span></span><br><span class=\"line\">            slots[i].GetComponent&lt;Slot&gt;().slotId = i;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Áâ©ÂìÅÊãñÊãΩ‰∏éÊï∞ÊçÆËΩ¨Êç¢\"><a href=\"#Áâ©ÂìÅÊãñÊãΩ‰∏éÊï∞ÊçÆËΩ¨Êç¢\" class=\"headerlink\" title=\"Áâ©ÂìÅÊãñÊãΩ‰∏éÊï∞ÊçÆËΩ¨Êç¢\"></a>Áâ©ÂìÅÊãñÊãΩ‰∏éÊï∞ÊçÆËΩ¨Êç¢</h1><p>ÂΩìÁâ©ÂìÅËøõË°åÊãñÊãΩÊó∂ÔºåÂÖàÂ∞ÜÂÖ∂Áà∂Á∫ßÊõ¥Êîπ‰∏∫Áà∂Á∫ßÁöÑÁà∂Á∫ßÔºåÈò≤Ê≠¢Âá∫Áé∞ÈÅÆÊå°ÁöÑÈóÆÈ¢òÔºåÁÑ∂ÂêéÊ†πÊçÆÂ∞ÑÁ∫øÈÅÆÊå°Âà§Êñ≠Èº†Ê†áÁßªÂä®ÁöÑ‰ΩçÁΩÆ„ÄÇ</p>\n<blockquote>\n<p>SlotÁöÑItemÊ∑ªÂä†‰∏§‰∏™ÁªÑ‰ª∂Ôºö</p>\n<p>Canvas GroupÔºöBlockRaycastsÂºÄÂêØÔºåÂΩìÈº†Ê†áÁßªÂä®ÁöÑÊó∂ÂÄôÁü•ÈÅìÁßªÂä®ÁöÑ‰ΩçÁΩÆ</p>\n<p>LayoutElementÔºöIgnoreLayoutÂºÄÂêØÔºåÊõ¥ÊîπÁà∂Á∫ßÂÖÉÁ¥†Êó∂Ôºå‰∏ç‰ºöË∑≥Âà∞ËøõÂÖ•Âà∞ÊéíÂ∫èË°åÂàó</p>\n</blockquote>\n<p><code>ItemOnDrag.cs</code></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"comment\">//ÂºïÁî®</span></span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.EventSystems;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//‰ΩøÁî®‰∏â‰∏™Êé•Âè£</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">ItemOnDrag</span> : <span class=\"title\">MonoBehaviour</span>, <span class=\"title\">IBeginDragHandler</span>, <span class=\"title\">IDragHandler</span>, <span class=\"title\">IEndDragHandler</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\">//ÁßªÂä®ÁöÑÁâ©‰ΩìÁöÑÂàùÂßãÁà∂Á∫ß</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Transform originParent;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Bag bag;</span><br><span class=\"line\">    <span class=\"built_in\">int</span> currentItemId;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">OnBeginDrag</span>(<span class=\"params\">PointerEventData eventData</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        originParent = transform.parent;</span><br><span class=\"line\">        currentItemId = originParent.GetComponent&lt;Slot&gt;().slotId;</span><br><span class=\"line\">        <span class=\"comment\">//Êõ¥Êç¢Áà∂Á∫ßÔºå‰ΩøÂÖ∂ÁΩÆ‰∫é‰∏äÂ±Ç‰∏çË¢´ÈÅÆÊå°</span></span><br><span class=\"line\">        transform.SetParent(transform.parent.parent);</span><br><span class=\"line\">        transform.position = eventData.position;</span><br><span class=\"line\">        <span class=\"comment\">//‰øÆÊîπÈº†Ê†áÁßªÂä®ÁöÑÁâ©‰ΩìÁöÑÈÅÆÊå°Â±ûÊÄß</span></span><br><span class=\"line\">        GetComponent&lt;CanvasGroup&gt;().blocksRaycasts = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">OnDrag</span>(<span class=\"params\">PointerEventData eventData</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        transform.position = eventData.position;</span><br><span class=\"line\">        Debug.Log(eventData.pointerCurrentRaycast.gameObject.name);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">OnEndDrag</span>(<span class=\"params\">PointerEventData eventData</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//Âà§Êñ≠ÊòØÂê¶Â±û‰∫éËÆæÁΩÆÁöÑÁïåÈù¢Â§ñ</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (eventData.pointerCurrentRaycast.gameObject != <span class=\"literal\">null</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"comment\">//Èº†Ê†áÂ∞ÑÁ∫øÁ¢∞ÊíûÂà∞ÁöÑÁâ©‰Ωì,ÂèØËÉΩÁ¢∞Âà∞ÂõæÁâáÊàñÊñáÂ≠ó</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (eventData.pointerCurrentRaycast.gameObject.name == <span class=\"string\">&quot;ItemImage&quot;</span> || eventData.pointerCurrentRaycast.gameObject.name == <span class=\"string\">&quot;Number&quot;</span>)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"comment\">//Êõ¥Êç¢Èº†Ê†áÁßªÂä®Áâ©‰ΩìÁöÑ‰ΩçÁΩÆÂíåÁà∂Á∫ß</span></span><br><span class=\"line\">                transform.SetParent(eventData.pointerCurrentRaycast.gameObject.transform.parent.parent);</span><br><span class=\"line\">                transform.position = eventData.pointerCurrentRaycast.gameObject.transform.parent.parent.position;</span><br><span class=\"line\">                <span class=\"comment\">//Êõ¥Êç¢‰∏§‰∏™Áâ©‰Ωì‰ø°ÊÅØ</span></span><br><span class=\"line\">                <span class=\"keyword\">var</span> temp = bag.list[currentItemId];</span><br><span class=\"line\">                bag.list[currentItemId] = bag.list[eventData.pointerCurrentRaycast.gameObject.GetComponentInParent&lt;Slot&gt;().slotId];</span><br><span class=\"line\">                bag.list[eventData.pointerCurrentRaycast.gameObject.GetComponentInParent&lt;Slot&gt;().slotId] = temp;</span><br><span class=\"line\">                <span class=\"comment\">//Êõ¥Êç¢ÂΩìÂâçÈº†Ê†á‰ΩçÁΩÆÁâ©‰ΩìÁöÑ‰ΩçÁΩÆÂíåÁà∂Á∫ß‰∏∫ÂéüÁâ©‰ΩìÁöÑ‰ΩçÁΩÆ‰∏éÁà∂Á∫ß</span></span><br><span class=\"line\">                eventData.pointerCurrentRaycast.gameObject.transform.parent.position = originParent.position;</span><br><span class=\"line\">                eventData.pointerCurrentRaycast.gameObject.transform.parent.SetParent(originParent);</span><br><span class=\"line\"></span><br><span class=\"line\">                GetComponent&lt;CanvasGroup&gt;().blocksRaycasts = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                <span class=\"keyword\">return</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">//Â¶ÇÊûúÊòØÁ©∫ÂÄºÔºåÂàô‰∫§Êç¢Á©∫ÂÄºÁöÑ‰ΩçÁΩÆ</span></span><br><span class=\"line\">            <span class=\"comment\">//Êõ¥Êç¢ÂΩìÂâçÈº†Ê†á‰ΩçÁΩÆÁâ©‰ΩìÁöÑ‰ΩçÁΩÆÂíåÁà∂Á∫ß‰∏∫ÂéüÁâ©‰ΩìÁöÑ‰ΩçÁΩÆ‰∏éÁà∂Á∫ß</span></span><br><span class=\"line\">            <span class=\"comment\">//eventData.pointerCurrentRaycast.gameObject.transform.GetChild(0).SetParent(originParent);</span></span><br><span class=\"line\">            <span class=\"comment\">//eventData.pointerCurrentRaycast.gameObject.transform.GetChild(0).position = originParent.position;</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (eventData.pointerCurrentRaycast.gameObject.name == <span class=\"string\">&quot;Slot(Clone)&quot;</span>)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                transform.SetParent(eventData.pointerCurrentRaycast.gameObject.transform);</span><br><span class=\"line\">                transform.position = eventData.pointerCurrentRaycast.gameObject.transform.position;</span><br><span class=\"line\"></span><br><span class=\"line\">                bag.list[eventData.pointerCurrentRaycast.gameObject.GetComponentInParent&lt;Slot&gt;().slotId] = bag.list[currentItemId];</span><br><span class=\"line\">                <span class=\"comment\">//Âà§Êñ≠ÊòØ‰∏çÊòØÂêå‰∏Ä‰∏™‰ΩçÁΩÆ</span></span><br><span class=\"line\">                <span class=\"comment\">//Âêå‰∏Ä‰ΩçÁΩÆÂàô‰∏çËÉΩËÆæÁΩÆ‰∏∫null</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (eventData.pointerCurrentRaycast.gameObject.GetComponentInParent&lt;Slot&gt;().slotId != currentItemId)</span><br><span class=\"line\">                    bag.list[currentItemId] = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">                GetComponent&lt;CanvasGroup&gt;().blocksRaycasts = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                <span class=\"keyword\">return</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//Â¶ÇÊûúÊòØÂàôËøîÂõûÂéü‰ΩçÁΩÆ</span></span><br><span class=\"line\">        transform.SetParent(originParent);</span><br><span class=\"line\">        transform.position = originParent.position;</span><br><span class=\"line\">        GetComponent&lt;CanvasGroup&gt;().blocksRaycasts = <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Á™óÂè£ÁßªÂä®\"><a href=\"#Á™óÂè£ÁßªÂä®\" class=\"headerlink\" title=\"Á™óÂè£ÁßªÂä®\"></a>Á™óÂè£ÁßªÂä®</h1><p><code>MoveBag.cs</code></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.EventSystems;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">MoveBag</span> : <span class=\"title\">MonoBehaviour</span>,<span class=\"title\">IDragHandler</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    RectTransform rectTransform;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">Awake</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        rectTransform = GetComponent&lt;RectTransform&gt;();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">OnDrag</span>(<span class=\"params\">PointerEventData eventData</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//ÁßªÂä®anchor‰∏∫Èº†Ê†áÁßªÂä®ÁöÑË∑ùÁ¶ª</span></span><br><span class=\"line\">        <span class=\"comment\">//Ë∞ÉËØïÁöÑÊó∂ÂÄôÂèØËÉΩ‰ºö‰∏çË∑üÊâãÔºåbuild‰πãÂêé‰∏ç‰ºöÂá∫Áé∞ËøôÁßçÊÉÖÂÜµ</span></span><br><span class=\"line\">        rectTransform.anchoredPosition += eventData.delta;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Start is called before the first frame update</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Introduce\"><a href=\"#Introduce\" class=\"headerlink\" title=\"Introduce\"></a>Introduce</h1><p>È¶ñÂÖàËøòÊòØË¶ÅÊÑüË∞¢È∫¶Êâ£ËÄÅÂ∏àÔºå<a href=\"https://www.bilibili.com/video/BV1YJ41197SU?p=2\">ËßÜÈ¢ëÈìæÊé•</a>„ÄÇ</p>\n<p>Âà∂‰Ωú‰πãÂêéÁöÑ(ÁÆÄÈôã)ÁïåÈù¢„ÄÇ</p>\n<p><img src=\"/2022/05/31/003_Inventory/image-20220603143654206.png\" alt=\"image-20220603143654206\"></p>\n<h1 id=\"UIÁïåÈù¢\"><a href=\"#UIÁïåÈù¢\" class=\"headerlink\" title=\"UIÁïåÈù¢\"></a>UIÁïåÈù¢</h1><p><strong>UIÂ±ÇÁ∫ß</strong></p>\n<ul>\n<li>Canvas  <code>BagManager.cs</code><ul>\n<li>Bag  <code>MoveBag.cs</code><ul>\n<li>Title  Ê†áÈ¢ò</li>\n<li>Exit   Âè≥‰∏äËßí ‚Äù√ó‚Äú</li>\n<li>Grid  Áâ©ÂìÅÊ†º</li>\n<li>Info   Áâ©ÂìÅ‰ªãÁªç</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>Grid ÈÄöËøá‰ΩøÁî®GridLayoutGroupÁªÑ‰ª∂ËøõË°åÊéíÂàóÁªÑÂêà</p>\n</blockquote>\n<p><strong>È¢ÑÂà∂‰ΩìSlotÁöÑÂà∂‰Ωú</strong></p>\n<p>SlotÂú®ËøôÈáå‰Ωú‰∏∫ÊØè‰∏™Ê†ºÂ≠êÊòæÁ§∫ÁöÑÊï¥‰ΩìÔºåÁßªÂä®ÊãñÊãΩÁÇπÂáªÊòæÁ§∫Á≠âÂäüËÉΩÈÉΩÊòØÈÄöËøáËøô‰∏™Slot„ÄÇ</p>\n<ul>\n<li>Slot  <code>Slot.cs</code><ul>\n<li>Item  Button/<code>ItemOnDrag.cs</code><ul>\n<li>ItemImage  ÊòæÁ§∫ÁöÑÂõæÂÉè</li>\n<li>Number  ÊòæÁ§∫Êï∞Èáè</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p><code>Slot.cs</code></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.UI;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">Slot</span> : <span class=\"title\">MonoBehaviour</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> slotId;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> Item item;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Image image;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Text num;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> GameObject itemInSlot;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">string</span> slotInfo;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">ItemOnClick</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        BagManager.instance.UpdateInfo(slotInfo);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">SetItem</span>(<span class=\"params\">Item item</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (item == <span class=\"literal\">null</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            itemInSlot.SetActive(<span class=\"literal\">false</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//ËµãÂÄº</span></span><br><span class=\"line\">        image.sprite = item.sprite;</span><br><span class=\"line\">        num.text = item.holdNum.ToString();</span><br><span class=\"line\">        slotInfo = item.info;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"ScriptableObjectÂ≠òÂÇ®\"><a href=\"#ScriptableObjectÂ≠òÂÇ®\" class=\"headerlink\" title=\"ScriptableObjectÂ≠òÂÇ®\"></a>ScriptableObjectÂ≠òÂÇ®</h1><p>Â≠òÂÇ®Áâ©ÂìÅÁöÑÂ±ûÊÄß:<code>Item.cs</code></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//ÂàõÂª∫Êñ∞ÁöÑËèúÂçï</span></span><br><span class=\"line\">[<span class=\"meta\">CreateAssetMenu(fileName = <span class=\"meta-string\">&quot;New Item&quot;</span>,menuName = <span class=\"meta-string\">&quot;Item/item&quot;</span>)</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">Item</span> : <span class=\"title\">ScriptableObject</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">string</span> _name;<span class=\"comment\">//Áâ©ÂìÅÂêçÂ≠ó</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Sprite sprite;<span class=\"comment\">//Áâ©ÂìÅÂõæÁâá</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> holdNum;<span class=\"comment\">//ÊåÅÊúâÊï∞Èáè</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">//‰ΩøÂæóÊñáÊú¨Ê°ÜÂèòÂ§ß</span></span><br><span class=\"line\">    [<span class=\"meta\">TextArea</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">string</span>  info;<span class=\"comment\">//Áâ©ÂìÅ‰ªãÁªç‰ø°ÊÅØ</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>ËÉåÂåÖÁöÑÂ≠òÂÇ®:<code>Bag.cs</code></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"meta\">CreateAssetMenu(fileName =<span class=\"meta-string\">&quot;New Bag&quot;</span>,menuName =<span class=\"meta-string\">&quot;Item/bag&quot;</span>)</span>]</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">Bag</span> : <span class=\"title\">ScriptableObject</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\">//ÂàõÂª∫ÂàóË°®ÔºåÂ≠òÂÇ®Áâ©ÂìÅ</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">List</span>&lt;<span class=\"title\">Item</span>&gt; list</span> = <span class=\"keyword\">new</span> List&lt;Item&gt;();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>Áâ©ÂìÅÊ∑ªÂä†ÊãæÂèñÂäüËÉΩ<code>shiqu.cs</code></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">Shiqu</span> : <span class=\"title\">MonoBehaviour</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> Item item;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Bag bag;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">OnTriggerEnter2D</span>(<span class=\"params\">Collider2D collision</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (collision.gameObject.CompareTag(<span class=\"string\">&quot;Player&quot;</span>))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"comment\">//Debug.Log(&quot;item&quot; + item.holdNum);</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (bag.list.Contains(item))</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                item.holdNum += <span class=\"number\">1</span>;</span><br><span class=\"line\">                <span class=\"comment\">//Debug.Log(&quot;bag:&quot; + bag.list[0].holdNum);</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span></span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"comment\">//bag.list.Add(item);</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"comment\">//Â¶ÇÊûúÊúâÁ©∫‰ΩçÂàôÊ∑ªÂä†</span></span><br><span class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"built_in\">int</span> i = <span class=\"number\">0</span>; i &lt; bag.list.Count; i++)</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (bag.list[i] == <span class=\"literal\">null</span>)</span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        bag.list[i] = item;</span><br><span class=\"line\">                        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            Destroy(gameObject);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        BagManager.instance.Refresh();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"ËÉåÂåÖÊòæÁ§∫\"><a href=\"#ËÉåÂåÖÊòæÁ§∫\" class=\"headerlink\" title=\"ËÉåÂåÖÊòæÁ§∫\"></a>ËÉåÂåÖÊòæÁ§∫</h1><p>‰∏ªË¶ÅÊÄùÊÉ≥ÊòØÂΩìÁé©ÂÆ∂ÊãæÂèñÁâ©ÂìÅ„ÄÅÊâìÂºÄËÉåÂåÖ‰πãÂêéÔºåÈÉΩ‰ºöËøõË°å‰∏ÄÊ¨°Âà∑Êñ∞„ÄÇ</p>\n<p><code>BagManager.cs</code></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.UI;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">BagManager</span> : <span class=\"title\">MonoBehaviour</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> BagManager instance;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Bag bag;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> GameObject slotGrid;</span><br><span class=\"line\">    <span class=\"comment\">//public Slot slot;</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> GameObject emptySlot;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Text info;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//ÊòæÁ§∫ÂΩìÂâçÁâ©ÂìÅÁöÑÂàóË°®Ôºå‰ªébagÈáåËé∑ÂèñÊï∞ÊçÆ</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">List</span>&lt;<span class=\"title\">GameObject</span>&gt; slots</span> = <span class=\"keyword\">new</span> List&lt;GameObject&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">Awake</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (instance != <span class=\"literal\">null</span>)</span><br><span class=\"line\">            Destroy(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">        instance = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">OnEnable</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        Refresh();</span><br><span class=\"line\">        info.text = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">UpdateInfo</span>(<span class=\"params\"><span class=\"built_in\">string</span> itemInfo</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        info.text = itemInfo;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/*ÁîüÊàêÊ†ºÂ≠êÔºåÊúâÂ§öÂ∞ëÁâ©ÂìÅÁîüÊàêÂ§öÂ∞ëÊ†ºÂ≠ê</span></span><br><span class=\"line\"><span class=\"comment\">    public void CreateSolt(Item item)</span></span><br><span class=\"line\"><span class=\"comment\">    &#123;</span></span><br><span class=\"line\"><span class=\"comment\">        Slot newslot = Instantiate(slot, instance.slotGrid.transform.position, Quaternion.identity);</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">        newslot.gameObject.transform.SetParent(instance.slotGrid.transform,false);</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">        newslot.image.sprite = item.sprite;</span></span><br><span class=\"line\"><span class=\"comment\">        newslot.item = item;</span></span><br><span class=\"line\"><span class=\"comment\">        newslot.num.text = item.holdNum.ToString();</span></span><br><span class=\"line\"><span class=\"comment\">    &#125;</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">Refresh</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//ÂÖàÊ∏ÖÁ©∫ÂéüÁâ©ÂìÅÂØπË±°ÂíåÂ≠òÂÇ®Áâ©ÂìÅÊï∞ÊçÆÁöÑÂàóË°®</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"built_in\">int</span> i = <span class=\"number\">0</span>; i &lt; slotGrid.transform.childCount; i++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (slotGrid.transform.childCount == <span class=\"number\">0</span>)</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"comment\">//Âà†Èô§Â≠êÈõÜÁöÑÁ©∫Áâ©‰Ωì</span></span><br><span class=\"line\">            Destroy(slotGrid.transform.GetChild(i).gameObject);</span><br><span class=\"line\">            <span class=\"comment\">//Ê∏ÖÁ©∫ÂàóË°®</span></span><br><span class=\"line\">            slots.Clear();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//ÈáçÊñ∞ÁîüÊàê</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"built_in\">int</span> i = <span class=\"number\">0</span>; i &lt; bag.list.Count; i++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"comment\">//CreateSolt(bag.list[i]);</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">//Ê∑ªÂä†Á©∫ÁôΩÊ†ºÂπ∂ËÆæÁΩÆÁà∂Á∫ß</span></span><br><span class=\"line\">            slots.Add(Instantiate(emptySlot));</span><br><span class=\"line\">            <span class=\"comment\">//ËÆæÁΩÆfalse‰ºö‰ΩøÂæóÂä†ËΩΩÁöÑÊó∂ÂÄôÂõæÁâá‰∏çË¢´Áº©Êîæ</span></span><br><span class=\"line\">            slots[i].transform.SetParent(slotGrid.transform,<span class=\"literal\">false</span>);</span><br><span class=\"line\">            <span class=\"comment\">//ËÆæÁΩÆÂõæÁâá Êï∞Èáè</span></span><br><span class=\"line\">            slots[i].GetComponent&lt;Slot&gt;().SetItem(bag.list[i]);</span><br><span class=\"line\">            <span class=\"comment\">//ËÆæÁΩÆÁâ©ÂìÅÁöÑÁºñÂè∑</span></span><br><span class=\"line\">            slots[i].GetComponent&lt;Slot&gt;().slotId = i;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Áâ©ÂìÅÊãñÊãΩ‰∏éÊï∞ÊçÆËΩ¨Êç¢\"><a href=\"#Áâ©ÂìÅÊãñÊãΩ‰∏éÊï∞ÊçÆËΩ¨Êç¢\" class=\"headerlink\" title=\"Áâ©ÂìÅÊãñÊãΩ‰∏éÊï∞ÊçÆËΩ¨Êç¢\"></a>Áâ©ÂìÅÊãñÊãΩ‰∏éÊï∞ÊçÆËΩ¨Êç¢</h1><p>ÂΩìÁâ©ÂìÅËøõË°åÊãñÊãΩÊó∂ÔºåÂÖàÂ∞ÜÂÖ∂Áà∂Á∫ßÊõ¥Êîπ‰∏∫Áà∂Á∫ßÁöÑÁà∂Á∫ßÔºåÈò≤Ê≠¢Âá∫Áé∞ÈÅÆÊå°ÁöÑÈóÆÈ¢òÔºåÁÑ∂ÂêéÊ†πÊçÆÂ∞ÑÁ∫øÈÅÆÊå°Âà§Êñ≠Èº†Ê†áÁßªÂä®ÁöÑ‰ΩçÁΩÆ„ÄÇ</p>\n<blockquote>\n<p>SlotÁöÑItemÊ∑ªÂä†‰∏§‰∏™ÁªÑ‰ª∂Ôºö</p>\n<p>Canvas GroupÔºöBlockRaycastsÂºÄÂêØÔºåÂΩìÈº†Ê†áÁßªÂä®ÁöÑÊó∂ÂÄôÁü•ÈÅìÁßªÂä®ÁöÑ‰ΩçÁΩÆ</p>\n<p>LayoutElementÔºöIgnoreLayoutÂºÄÂêØÔºåÊõ¥ÊîπÁà∂Á∫ßÂÖÉÁ¥†Êó∂Ôºå‰∏ç‰ºöË∑≥Âà∞ËøõÂÖ•Âà∞ÊéíÂ∫èË°åÂàó</p>\n</blockquote>\n<p><code>ItemOnDrag.cs</code></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"comment\">//ÂºïÁî®</span></span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.EventSystems;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//‰ΩøÁî®‰∏â‰∏™Êé•Âè£</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">ItemOnDrag</span> : <span class=\"title\">MonoBehaviour</span>, <span class=\"title\">IBeginDragHandler</span>, <span class=\"title\">IDragHandler</span>, <span class=\"title\">IEndDragHandler</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\">//ÁßªÂä®ÁöÑÁâ©‰ΩìÁöÑÂàùÂßãÁà∂Á∫ß</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Transform originParent;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Bag bag;</span><br><span class=\"line\">    <span class=\"built_in\">int</span> currentItemId;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">OnBeginDrag</span>(<span class=\"params\">PointerEventData eventData</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        originParent = transform.parent;</span><br><span class=\"line\">        currentItemId = originParent.GetComponent&lt;Slot&gt;().slotId;</span><br><span class=\"line\">        <span class=\"comment\">//Êõ¥Êç¢Áà∂Á∫ßÔºå‰ΩøÂÖ∂ÁΩÆ‰∫é‰∏äÂ±Ç‰∏çË¢´ÈÅÆÊå°</span></span><br><span class=\"line\">        transform.SetParent(transform.parent.parent);</span><br><span class=\"line\">        transform.position = eventData.position;</span><br><span class=\"line\">        <span class=\"comment\">//‰øÆÊîπÈº†Ê†áÁßªÂä®ÁöÑÁâ©‰ΩìÁöÑÈÅÆÊå°Â±ûÊÄß</span></span><br><span class=\"line\">        GetComponent&lt;CanvasGroup&gt;().blocksRaycasts = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">OnDrag</span>(<span class=\"params\">PointerEventData eventData</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        transform.position = eventData.position;</span><br><span class=\"line\">        Debug.Log(eventData.pointerCurrentRaycast.gameObject.name);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">OnEndDrag</span>(<span class=\"params\">PointerEventData eventData</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//Âà§Êñ≠ÊòØÂê¶Â±û‰∫éËÆæÁΩÆÁöÑÁïåÈù¢Â§ñ</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (eventData.pointerCurrentRaycast.gameObject != <span class=\"literal\">null</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"comment\">//Èº†Ê†áÂ∞ÑÁ∫øÁ¢∞ÊíûÂà∞ÁöÑÁâ©‰Ωì,ÂèØËÉΩÁ¢∞Âà∞ÂõæÁâáÊàñÊñáÂ≠ó</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (eventData.pointerCurrentRaycast.gameObject.name == <span class=\"string\">&quot;ItemImage&quot;</span> || eventData.pointerCurrentRaycast.gameObject.name == <span class=\"string\">&quot;Number&quot;</span>)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"comment\">//Êõ¥Êç¢Èº†Ê†áÁßªÂä®Áâ©‰ΩìÁöÑ‰ΩçÁΩÆÂíåÁà∂Á∫ß</span></span><br><span class=\"line\">                transform.SetParent(eventData.pointerCurrentRaycast.gameObject.transform.parent.parent);</span><br><span class=\"line\">                transform.position = eventData.pointerCurrentRaycast.gameObject.transform.parent.parent.position;</span><br><span class=\"line\">                <span class=\"comment\">//Êõ¥Êç¢‰∏§‰∏™Áâ©‰Ωì‰ø°ÊÅØ</span></span><br><span class=\"line\">                <span class=\"keyword\">var</span> temp = bag.list[currentItemId];</span><br><span class=\"line\">                bag.list[currentItemId] = bag.list[eventData.pointerCurrentRaycast.gameObject.GetComponentInParent&lt;Slot&gt;().slotId];</span><br><span class=\"line\">                bag.list[eventData.pointerCurrentRaycast.gameObject.GetComponentInParent&lt;Slot&gt;().slotId] = temp;</span><br><span class=\"line\">                <span class=\"comment\">//Êõ¥Êç¢ÂΩìÂâçÈº†Ê†á‰ΩçÁΩÆÁâ©‰ΩìÁöÑ‰ΩçÁΩÆÂíåÁà∂Á∫ß‰∏∫ÂéüÁâ©‰ΩìÁöÑ‰ΩçÁΩÆ‰∏éÁà∂Á∫ß</span></span><br><span class=\"line\">                eventData.pointerCurrentRaycast.gameObject.transform.parent.position = originParent.position;</span><br><span class=\"line\">                eventData.pointerCurrentRaycast.gameObject.transform.parent.SetParent(originParent);</span><br><span class=\"line\"></span><br><span class=\"line\">                GetComponent&lt;CanvasGroup&gt;().blocksRaycasts = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                <span class=\"keyword\">return</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">//Â¶ÇÊûúÊòØÁ©∫ÂÄºÔºåÂàô‰∫§Êç¢Á©∫ÂÄºÁöÑ‰ΩçÁΩÆ</span></span><br><span class=\"line\">            <span class=\"comment\">//Êõ¥Êç¢ÂΩìÂâçÈº†Ê†á‰ΩçÁΩÆÁâ©‰ΩìÁöÑ‰ΩçÁΩÆÂíåÁà∂Á∫ß‰∏∫ÂéüÁâ©‰ΩìÁöÑ‰ΩçÁΩÆ‰∏éÁà∂Á∫ß</span></span><br><span class=\"line\">            <span class=\"comment\">//eventData.pointerCurrentRaycast.gameObject.transform.GetChild(0).SetParent(originParent);</span></span><br><span class=\"line\">            <span class=\"comment\">//eventData.pointerCurrentRaycast.gameObject.transform.GetChild(0).position = originParent.position;</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (eventData.pointerCurrentRaycast.gameObject.name == <span class=\"string\">&quot;Slot(Clone)&quot;</span>)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                transform.SetParent(eventData.pointerCurrentRaycast.gameObject.transform);</span><br><span class=\"line\">                transform.position = eventData.pointerCurrentRaycast.gameObject.transform.position;</span><br><span class=\"line\"></span><br><span class=\"line\">                bag.list[eventData.pointerCurrentRaycast.gameObject.GetComponentInParent&lt;Slot&gt;().slotId] = bag.list[currentItemId];</span><br><span class=\"line\">                <span class=\"comment\">//Âà§Êñ≠ÊòØ‰∏çÊòØÂêå‰∏Ä‰∏™‰ΩçÁΩÆ</span></span><br><span class=\"line\">                <span class=\"comment\">//Âêå‰∏Ä‰ΩçÁΩÆÂàô‰∏çËÉΩËÆæÁΩÆ‰∏∫null</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (eventData.pointerCurrentRaycast.gameObject.GetComponentInParent&lt;Slot&gt;().slotId != currentItemId)</span><br><span class=\"line\">                    bag.list[currentItemId] = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">                GetComponent&lt;CanvasGroup&gt;().blocksRaycasts = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                <span class=\"keyword\">return</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//Â¶ÇÊûúÊòØÂàôËøîÂõûÂéü‰ΩçÁΩÆ</span></span><br><span class=\"line\">        transform.SetParent(originParent);</span><br><span class=\"line\">        transform.position = originParent.position;</span><br><span class=\"line\">        GetComponent&lt;CanvasGroup&gt;().blocksRaycasts = <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Á™óÂè£ÁßªÂä®\"><a href=\"#Á™óÂè£ÁßªÂä®\" class=\"headerlink\" title=\"Á™óÂè£ÁßªÂä®\"></a>Á™óÂè£ÁßªÂä®</h1><p><code>MoveBag.cs</code></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.EventSystems;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">MoveBag</span> : <span class=\"title\">MonoBehaviour</span>,<span class=\"title\">IDragHandler</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    RectTransform rectTransform;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">Awake</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        rectTransform = GetComponent&lt;RectTransform&gt;();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">OnDrag</span>(<span class=\"params\">PointerEventData eventData</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//ÁßªÂä®anchor‰∏∫Èº†Ê†áÁßªÂä®ÁöÑË∑ùÁ¶ª</span></span><br><span class=\"line\">        <span class=\"comment\">//Ë∞ÉËØïÁöÑÊó∂ÂÄôÂèØËÉΩ‰ºö‰∏çË∑üÊâãÔºåbuild‰πãÂêé‰∏ç‰ºöÂá∫Áé∞ËøôÁßçÊÉÖÂÜµ</span></span><br><span class=\"line\">        rectTransform.anchoredPosition += eventData.delta;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Start is called before the first frame update</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n"},{"title":"3DURPÊ∏∏ÊàèÂà∂‰ΩúÁ¨îËÆ∞","date":"2022-05-09T16:00:00.000Z","description":null,"top_image":"/img/002.png","cover":"/img/002.png","_content":"\n# 3DURPÊ∏∏ÊàèÂà∂‰ΩúÁ¨îËÆ∞\n\n> ÊÑüË∞¢È∫¶Êâ£ËÄÅÂ∏àÔºÅÔºÅÔºÅ\n>\n> [bÁ´ôÂú∞ÂùÄ](https://space.bilibili.com/370283072)\n>\n> Ëøô‰∫õÊòØÊàëË∑üÁùÄÂ≠¶‰π†Êï≤Âæó‰ª£Á†ÅÔºåÊúâ‰∫õÂèØËÉΩ‰∏ç‰∏ÄÊ†∑ÔºåÂÆåÂÖ®Â§çÂà∂ËÇØÂÆö‰ºöÊúâÈóÆÈ¢òÔºå‰∏ªË¶ÅÁî®Êù•ÁªôÂ≠¶‰π†ÁöÑÂêåÂ≠¶Á∫†Èîô\n\n\n\n### Ê∏∏ÊàèÁöÑÂàõÂª∫‰∏éÂú∞ÂõæÁöÑÈì∫ËÆæ\n\n‰ΩøÁî®Âà∞ÁöÑÊèí‰ª∂Êúâ**Pro Grids**,**ProBuilder**,**PloyBrush**\n\n1. ‰ΩøÁî®Âà∞ÁöÑÂú∞ÂõæÊ®°Êùø‰∏∫Ê≠£Â∏∏Ê®°ÊùøÔºåÁÑ∂ÂêéÂú®ProjectÊñá‰ª∂Â§π‰∏≠Êñ∞Âª∫URP„ÄÇ\n\n2. Âè≥‰∏äËßíEdit > Project Setting\n   1. Â∞ÜGraphicsÁöÑScirptable Render Pipeline Settings‰øÆÊîπ‰∏∫ÂàõÂª∫ÁöÑ**UniversalRenderPiepelineAsset**\n   2. QualityÁöÑRendering‰øÆÊîπ‰∏∫ÂàõÂª∫ÁöÑ**UniversalRenderPiepelineAsset**\n\n3. ‰ΩøÁî®Á¥†ÊùêÊó∂ÔºåÂçáÁ∫ßÁ¥†ÊùêÁöÑURP„ÄÇEdit > Render Pipeline > Universal Render Pipeline > Upgrade Project Materials To UniversalRP Materials\n\n4. ÂÖâÁÖßÁöÑËÆæÁΩÆ Windows > Rendering >Lighting„ÄÇÂú®SceneÁ™óÂè£ÁîüÊàê‰∏Ä‰∏™New Lighting Settings„ÄÇLighting Mode‰∏ÄËà¨‰∏∫Baked IndirectÔºàÁÆÄ‰ªãÁÉòÁÑôÔºâÔºåLightmapper‰∏ÄËà¨ÈÄâÊã©‰∏∫GPUÔºåÂèñÊ∂àÂãæÈÄâAuto GenerateÔºåÁÑ∂ÂêéËøõË°åGenerate Lighting„ÄÇ\n\n   > Â¶ÇÊûúÂèëÁîüÂú∫ÊôØÈ¢úËâ≤ÂèëÁîüÊîπÂèòÔºå‰∏çÊòØÂéüÊú¨ÁöÑÈ¢úËâ≤ÔºåÂèØ‰ª•Âú®Lighting > EnvironmentÈáåÈÄâÊã© Environment Lighting > Source ËÆæÁΩÆ‰∏∫Color„ÄÇ\n\n5. Ë∞ÉÊï¥ÊëÑÂÉèÊú∫ÁöÑÊäÄÂ∑ßÔºöCtrl + Shift + FÔºåË∞ÉÊï¥Áâ©‰ΩìÂùêÊ†áËΩ¥Âê∏ÈôÑ VÈîÆ„ÄÇ\n\n6. ÂØºÂÖ•Êèí‰ª∂**PloyBrush**Âπ∂‰∏îÂú®ÂØºÂÖ•Êó∂Â∞ÜSample‰∏≠ÁöÑURPÊñá‰ª∂‰∏ÄÂπ∂ÂØºÂÖ•„ÄÇ \n\n   > ‰ΩøÁî®PloybrushÁöÑÁ¨îÂà∑Âà∑È¢úËâ≤ÁöÑÊó∂ÂÄôÔºåÂèëÁé∞Âà∑‰∏ç‰∏äÈ¢úËâ≤ÁöÑÂéüÂõ†ÊòØÔºåÁâ©‰ΩìÁöÑÊùêË¥®Âπ∂Ê≤°Êúâ‰ΩøÁî®PloybrushÁöÑshaderÂàõÂª∫ÁöÑÊùêË¥®ÔºåÁî®shaderÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÊùêË¥®Âπ∂‰øÆÊîπÁâ©‰ΩìÁöÑÊùêË¥®ÔºàÊãñÊãΩ‰πüÂèØ‰ª•ÔºâÔºåÁÑ∂ÂêéËøõË°åÈ¢úËâ≤ÁöÑÊ∂ÇÊäπ\n\n7. Âπ≥Âè∞ÁöÑÂ§ßÂ∞èÂíåÂ∞ëÊï∞ÁöÑÈ°∂ÁÇπÂΩ±Âìç‰∫ÜÂú∞ÂõæÁöÑÂàõ‰ΩúÔºåÊâÄ‰ª•ÈúÄË¶Å**Probuilder**Êù•ÁîüÊàêÊõ¥Á≤æËá¥ÁöÑÂú∞ÂõæÂπ≥Âè∞\n\n   > ÂêåÊó∂Êåâ‰Ωè**Ctrl**Âíå**Alt**ÈîÆÁÇπÂáªIconÁöÑÈΩøËΩÆÔºå‰ºöË∞ÉÂá∫ÂçïÁã¨ÁöÑËÆæÁΩÆ\n   >\n   > ‰ΩøÁî®**Center Pivot**ÂèØ‰ª•Ë∞ÉÊï¥‰∏≠ÂøÉÁÇπ\n   >\n   > ÂÖ≥‰∫éÂ¶Ç‰Ωï‰ΩøÁî®preview packageÔºöEdit > Project Setting > Package manager ,**Enable Preview Packages**\n\n### Âú∞ÂõæÁöÑÁÉòBake\n\nÁ™óÂè£Âú® Window > AI > Navigation\n\n1. ËÆæÁΩÆÂú∞Èù¢‰∏∫Navigation staticÔºåÂú®Navigation > ObjectÈáåÁöÑNavigation Area ËÆæÁΩÆ‰∏∫Walkable„ÄÇ\n\n   > - ÈÄâ‰∏≠Áâ©‰Ωì‰πãÂêéÔºåÂú®InspectorÁ™óÂè£ÈáåÔºåÁ¨¨‰∏ÄË°åÊúâÈÄâÊã©ÊòØÂê¶‰∏∫StaticÔºå‰∏ãÊãâÂèØÈÄâÊã©Á±ªÂûã\n   > - ÈÄâ‰∏≠Áâ©‰Ωì‰πãÂêéÔºåÂú®Navigation > ObjectÈáåËÆæÁΩÆNavigation static‰∏∫**true**\n\n2. ÈÄâ‰∏≠‰∏çÂèØÁßªÂä®ÁöÑÁâ©‰ΩìÔºåÊØîÂ¶ÇÊ†ëÊú®Áü≥Â§¥Á≠âÔºåÊâπÈáèËÆæÁΩÆ‰∏∫Navigation staticÔºåÁâπÊÆäÁöÑÈô§Â§ñ„ÄÇ\n3. ‰∏∫ËßíËâ≤Ê∑ªÂä†Navigation agent ÁªÑ‰ª∂ÔºåËÆæÁΩÆ‰∫∫Áâ©ÁöÑÂúÜÊü±‰ΩìÂ§ßÂ∞è‰ª•ÂèäÂÆΩÂ∫¶„ÄÇ\n4. Âú®Navigation > Bake ÈáåÂêåÊ†∑ËÆæÁΩÆ‰∏∫‰∫∫Áâ©ÁöÑÂúÜÊü±‰ΩìÂ§ßÂ∞è‰ª•ÂèäÂÆΩÂ∫¶Á≠âÂÖ∂‰ªñÊï∞ÊçÆÔºåÁÑ∂ÂêéÁÇπÂáªbakeÔºåÂú®Âú∞Âõæ‰∏äÊòæÁ§∫‰∏∫ËìùËâ≤ÁöÑ‰∏∫ÂèØwalkÂå∫Âüü„ÄÇ\n5. Â¶ÇÊûúÊúâÁâ©‰ΩìÂèØ‰ª•ÁßªÂä®ÔºåÂπ∂‰∏î‰∏çÊÉ≥ÂèëÁîüÁ©øÊ®°ÊïàÊûúÔºåÂèØÈÄâÊã©Ê∑ªÂä†ÁªÑ‰ª∂Nav Mesh Obstacle,ËÆæÁΩÆCarve‰∏∫**True**ÔºåÂ∞±‰ºöÂú®Âú∞Èù¢ÂêåÊó∂ÂàáÂâ≤Âá∫‰∏ÄÈÉ®ÂàÜÔºå‰∫∫Áâ©‰∏çÂèØwalkÁöÑÂå∫Âüü„ÄÇ\n\n### Èº†Ê†áÊéßÂà∂ÁßªÂä®‰ª•ÂèäË¥¥Âõæ\n\n**ÊâÄÊúâÁÆ°ÁêÜÁ±ªÈÉΩ‰∏çË¶ÅÂøò‰∫ÜÂú®Ê∏∏ÊàèÈáåÂàõÂª∫‰∏Ä‰∏™Á©∫ÂØπË±°ÔºåÊ∑ªÂä†‰∏äËÑöÊú¨**\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing System;\n\n\npublic class MouseManager : SingleTon<MouseManager>\n{\n\n\t//‰∫ãÂä°ÂßîÊâò\n    public event Action<Vector3> OnMouseClicked;\n    public event Action<GameObject> OnClickedEnemy;\n\n    RaycastHit hitInfo;\n\t//Èº†Ê†áË¥¥Âõæ\n    public Texture2D point, doorway, attack, target, arrow;\n    \n    protected override void Awake()\n    {\n        base.Awake();\n    }\n\n    void Update()\n    {\n        SetCursorTexture();\n        MouseControl();\n    }\n\n    void SetCursorTexture()\n    {\n        Ray ray = Camera.main.ScreenPointToRay(Input.mousePosition);\n        if(Physics.Raycast(ray,out hitInfo))\n        {\n            //ÂàáÊç¢Èº†Ê†áË¥¥Âõæ\n            switch (hitInfo.collider.gameObject.tag)\n            {\n                case \"Ground\":\n                    Cursor.SetCursor(target, new Vector2(16, 16),CursorMode.Auto);\n                    break;\n                case \"Enemy\":\n                    Cursor.SetCursor(attack, new Vector2(2, 2), CursorMode.Auto);\n                    break;\n                case \"Attackable\":\n                    Cursor.SetCursor(attack, new Vector2(2, 2), CursorMode.Auto);\n                    break;\n                case \"Portal\":\n                    Cursor.SetCursor(doorway, new Vector2(2, 2), CursorMode.Auto);\n                    break;\n            }\n        }\n    }\n\n    void MouseControl()\n    {\n        if (Input.GetMouseButtonDown(0) && hitInfo.collider != null)\n        {\n            if (hitInfo.collider.gameObject.CompareTag(\"Ground\"))\n            {\n                OnMouseClicked?.Invoke(hitInfo.point);\n            }else if (hitInfo.collider.gameObject.CompareTag(\"Enemy\"))\n            {\n                OnClickedEnemy?.Invoke(hitInfo.collider.gameObject);\n            }\n            else if (hitInfo.collider.gameObject.CompareTag(\"Attackable\"))\n            {\n                OnClickedEnemy?.Invoke(hitInfo.collider.gameObject);\n            }\n            else if (hitInfo.collider.gameObject.CompareTag(\"Portal\"))\n            {\n                OnMouseClicked?.Invoke(hitInfo.point);\n            }\n        }\n    }\n}\n\n```\n\n**ÂÖ≥‰∫éÈº†Ê†áÁöÑË¥¥Âõæ**\n\nÈº†Ê†áË¥¥Âõæ‰∏∫**Texture**,‰∏ÄËà¨‰∏∫Êó†ËÉåÊôØÁöÑÂõæÁâáÔºåÂä†ËΩΩÂà∞Unity‰πãÂêéÔºåÈÄâ‰∏≠Ë¥¥ÂõæÂπ∂ÊääTexture type‰øÆÊîπ‰∏∫**Cursor**„ÄÇ\n\n### Cineramachine\n\nÈÄâ‰∏≠Main cameraÔºåGameobject > Align View to Selected,Â∞Ü‰∏ªÁõ∏Êú∫ÈîÅÂÆöËßÜËßí\n\nÁä∂ÊÄÅÊ†èCineramachineÈÄâÊã©‰∏Ä‰∏™ÂêàÈÄÇÁöÑÊëÑÂÉèÊú∫ ÔºåÂΩìÂâçÈÄâÊã©ÁöÑ‰∏∫CinemachineVirtualCanmera,ÂèñÊ∂à‰∏ªÊëÑÂÉèÊú∫ÁöÑAudio ListenerÔºåBodyÈÄâÊã©Framing Transposer,AimÈÄâÊã©Nothing\n\nFollow ÈÄâÊã©‰∏∫‰∫∫Áâ©ÂØπË±° ÔºåÂ¶ÇÊûú‰∫∫Áâ©ÂùêÊ†áËΩ¥Âú®‰∏ãÊñπÔºåÂèØ‰ª•Âú®‰∫∫Áâ©ÂØπË±°ÈáåÊñ∞Âª∫‰∏Ä‰∏™Á©∫Áâ©‰ΩìÔºåÁÑ∂ÂêéÂ∞ÜÂùêÊ†áËΩ¥ÁßªÂä®Âà∞‰∫∫Áâ©‰∏≠ÂøÉ‰ΩçÁΩÆÔºåÂ∞ÜÁâ©‰ΩìÊãñÊãΩÂà∞**Follow**„ÄÇ\n\n> **BODY**\n>\n> - Do NothingÔºö‰∏çÁßªÂä®ËôöÊãüÁõ∏Êú∫\n> - Framing TransposerÔºöË∑üÈöèÁõÆÊ†áÁßªÂä®ÔºåÂπ∂Âú®Â±èÂπïÁ©∫Èó¥‰øùÊåÅÁõ∏Êú∫ÂíåË∑üÈöèÁõÆÊ†áÁöÑÁõ∏ÂØπ‰ΩçÁΩÆ„ÄÇ\n> - Hard Lock to TargetÔºöËôöÊãüÁõ∏Êú∫ÂíåË∑üÈöèÁõÆÊ†á‰ΩøÁî®Áõ∏Âêå‰ΩçÁΩÆ„ÄÇ\n> - Orbital TransposerÔºöÁõ∏Êú∫ÂíåË∑üÈöèÁõÆÊ†áÁöÑÁõ∏ÂØπ‰ΩçÁΩÆÊòØÂèØÂèòÁöÑÔºåËøòËÉΩÊé•Êî∂Áî®Êà∑ÁöÑËæìÂÖ•„ÄÇÂ∏∏ËßÅ‰∫éÁé©ÂÆ∂ÊéßÂà∂ÁöÑÁõ∏Êú∫„ÄÇ\n> - Tracked DollyÔºöÁõ∏Êú∫Ê≤øÁùÄÈ¢ÑÂÖàËÆæÁΩÆÁöÑËΩ®ÈÅìÁßªÂä®„ÄÇ\n> - TransposerÔºöË∑üÈöèÁõÆÊ†áÁßªÂä®ÔºåÂπ∂Âú®‰∏ñÁïåÁ©∫Èó¥‰øùÊåÅÁõ∏Êú∫ÂíåË∑üÈöèÁõÆÊ†áÁöÑÁõ∏ÂØπ‰ΩçÁΩÆÂõ∫ÂÆö„ÄÇ\n>\n> **AIM**\n>\n> - Do Nothing: ‰∏çÊéßÂà∂Áõ∏Êú∫ÁöÑÊóãËΩ¨„ÄÇ\n> - Composer: ‰øùÊåÅÁõÆÊ†áÁâ©‰ΩìÂú®ÈïúÂ§¥ÂÜÖ\n> - Group Composer: ‰øùÊåÅÂ§ö‰∏™ÁõÆÊ†áÂú®ÈïúÂ§¥ÂÜÖ\n>\n> - Hard Look At: ‰øùÊåÅÁõÆÊ†áÂú®ÈïúÂ§¥ÁöÑ‰∏≠ÂøÉ\n> - POV: Âü∫‰∫éÁé©ÂÆ∂ÁöÑËæìÂÖ•ÊóãËΩ¨Áõ∏Êú∫\n\n**Ê∑ªÂä†ÁéØÂ¢ÉËø∑Èõæ**\n\nWindow > Rendering > Lighting > Environment > FogËÆæÁΩÆ‰∏∫True\n\n> Â¶ÇÊûúSenceÂú∫ÊôØÊ≤°ÊúâÊòæÁ§∫FogÔºåÂàôÈúÄË¶ÅÂú®Á™óÂè£‰∏≠ÊâìÂºÄFogÂºÄÂÖ≥\n>\n> ModeÔºöLinear ‰∏∫ÊúÄËøëÊúÄËøúÂ§ÑËÉΩËßÅÂ∫¶\n\n**Global** **Volume**\n\nÂØπÂú∫ÊôØËøõË°åÂêéÂ§ÑÁêÜÔºåadd ÂÖ∂‰ªñÂäüËÉΩÂØπÂú∫ÊôØËøõË°åÊ∏≤Êüì\n\n> Â¶ÇÊûúÂú∫ÊôØÊ≤°ÊúâÊòæÁ§∫Âá∫ÊïàÊûúÔºåÂú®Main Camera > Rendering > Post Peocessing ËÆæÁΩÆ‰∏∫True\n\n### ÈÅÆÊå°ÂâîÈô§\n\n\n\nÈÄöËøá**Shader**ÂàõÂª∫ÊùêË¥®ÊîæÂÖ•Âà∞URPÁöÑ UniversalRenderPipelineAsset_Renderer ÔºåÊñ∞Âª∫Add Renderer Feature,ÈÄâÊã©Ë¢´ÈÅÆÊå°ÁöÑLayer MaskÔºåÂèØ‰ª•Â§öÈÄâÔºåÁÑ∂ÂêéËÆæÁΩÆË¢´ÈÅÆÊå°ÂêéÁöÑÊùêË¥®ÔºåDepthËÆæÁΩÆ‰∏∫TrueÔºåDepth TestËÆæÁΩÆ‰∏∫Greater„ÄÇÂΩìË¢´ÈÅÆÊå°Áâ©‰ΩìÂ±ÇÁ∫ßGreaterÊó∂ÔºåÊòæÁ§∫Ë¢´ÈÅÆÊå°ÂêéÁöÑÊùêË¥®„ÄÇ\n\nÂêåÊ†∑Add Renderer FeatureÔºåÈÄâÊã©Áõ∏ÂêåË¢´ÈÅÆÊå°ÁöÑLayer MaskÔºåÂÖ∂‰ªñ‰∏çÂÅö‰øÆÊîπÔºåÂΩì‰∏çË¢´ÈÅÆÊå°Êó∂ÊòæÁ§∫ÂéüÊúâÊùêË¥®\n\n**ÂÖ≥‰∫éÈÅÆÊå°ÊùêË¥®ÁöÑÂà∂‰Ωú**\n\nshaderÂàõÂª∫ÔºöProject > Âè≥ÈîÆ > Shader > URP >UnLit Shader Graph\n\n> Graph Inspector > Grapj Settings > Universal > Alpha Clip,ÊâìÂºÄAlphaÈÄèÊòéÈÄöÈÅì\n\n1. ‰ΩøÁî®Fresnel Effect Âà∂‰ΩúÈÅÆÊå°ÁöÑÊïàÊûúÔºåÈÄöËøáÊñ∞Âª∫ÂèòÈáèColor‰øÆÊîπÈ¢úËâ≤„ÄÇÈÄöËøáMultiplyÊ∑∑ÂêàÔºå‰º†ÁªôBase color„ÄÇ\n2. DitherÂà∂‰ΩúÂô™ÁÇπÊïàÊûúÔºåÊñ∞Âª∫Float‰øÆÊîπDitherÁöÑXÂÄºÔºåout‰º†ÁªôFragment > AlphaÈÄöÈÅì\n3. ÂàõÂª∫Flaot ‰øÆÊîπAlpha Threshold„ÄÇ\n4. ÈÄâÊã©ShaderÂàõÂª∫ÊùêË¥®\n\n**ÂÖ≥‰∫éÈº†Ê†áÂ∞ÑÁ∫øÈÅÆÊå°**\n\n- ÈÄâ‰∏≠ÈÅÆÊå°ÁöÑÁâ©‰ΩìÔºåËÆæÁΩÆÂ±ÇÁ∫ß‰∏∫Ignore Raycast\n- ÂÖ≥Èó≠ÈÅÆÊå°Áâ©‰ΩìÁöÑMesh Collider\n\n### EnemyController\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.AI;\n\npublic enum EnemyStates {GUARD,PARTOL,CHASE,DEAD }\n//ÈÄöËøá‰ª£Á†ÅÊ∑ªÂä†ÁªÑ‰ª∂\n[RequireComponent(typeof(NavMeshAgent))]\n[RequireComponent(typeof(CharacterStats))]\n\n//‰ΩøÁî®Êé•Âè£\npublic class EnemyController : MonoBehaviour,IEndGameObserver\n{\n    NavMeshAgent agent;\n    EnemyStates enemyStates;\n    Animator anim;\n    protected CharacterStats characterStats;\n    Collider coll;\n    //ÊîªÂáªËåÉÂõ¥ \n    public float sightRadius;\n    //Â∑°ÈÄªËåÉÂõ¥\n    public float partolRadius;\n    public bool isGuard;\n    //Â∑°ÈÄªÂÅúÁïôÊó∂Èó¥\n    public float lookAtTime;\n    float remainLookAtTime;\n    float speed;\n    //cdÊó∂Èó¥\n    float lastAttackTime;\n    //‰∏ã‰∏Ä‰∏™ÂâçÂæÄÁöÑÂ∑°ÈÄªÁÇπ\n    Vector3 wayPoint;\n    //Ëµ∑ÂßãÁÇπ\n    Vector3 guardPoint;\n    Quaternion guardRotation;\n    protected GameObject attackTarget;\n    bool isWalk, isChase, isFollow, isDie;\n    bool playerDie;\n    private void Awake()\n    {\n        agent = GetComponent<NavMeshAgent>();\n        anim = GetComponent<Animator>();\n        characterStats = GetComponent<CharacterStats>();\n        coll = GetComponent<Collider>();\n        //‰øùÂ≠òÂéüÊúâÈÄüÂ∫¶Ôºõ\n        speed = agent.speed;\n        guardPoint = transform.position;\n        remainLookAtTime = lookAtTime;\n        lastAttackTime = characterStats.CoolDown;\n        guardRotation = transform.rotation;\n    }\n    void Start()\n    {\n        if (isGuard)\n        {\n            enemyStates = EnemyStates.GUARD;\n        }\n        else\n        {\n            enemyStates = EnemyStates.PARTOL;\n            GetNewPartolPoint();\n        }\n        //Â∞ÜÂØπË±°Ê∑ªÂä†ËøõgamemanagerÈáåÔºåÁî®‰∫éÂπøÊí≠\n        GameManager.Instance.AddObserver(this);\n    }\n\n    // Update is called once per frame\n    void Update()\n    {\n        if (characterStats.CurrentHealth == 0)\n        {\n            isDie = true;\n        }\n        if (!playerDie)\n        {\n            SwitchStates();\n            SwitchAnim();\n            if (lastAttackTime > 0f)\n            {\n                lastAttackTime -= Time.deltaTime;\n            }\n        }\n    }\n    \n    //private void OnEnable()\n    //{\n    //    Gamemanager.Instance.AddObserver(this);\n    //}\n\n    private void OnDisable()\n    {\n        if (!GameManager.isInitialized) return;\n        GameManager.Instance.RemoveObserver(this);\n    }\n\n    void SwitchStates()\n    {\n        if (isDie)\n        {\n            enemyStates = EnemyStates.DEAD;\n        }\n        else if (FindPlayer())\n        {\n            enemyStates = EnemyStates.CHASE;\n            \n        }\n        switch (enemyStates)\n        {\n            case EnemyStates.GUARD:\n                isChase = false;\n                isWalk = false;\n                if (transform.position!=guardPoint)\n                {\n                    isWalk = true;\n                    agent.isStopped = false;\n                    agent.destination = guardPoint;\n                    if(Vector3.SqrMagnitude(guardPoint - transform.position) <= agent.stoppingDistance)\n                    {\n                        isWalk = false;\n                        agent.isStopped = true;\n                        //ÊóãËΩ¨‰ºöÂàùÂßãÁöÑËßíÂ∫¶\n                        Quaternion.Lerp(transform.rotation, guardRotation, 0.1f);\n                    }\n                }\n                break;\n            case EnemyStates.PARTOL:\n                isChase = false;\n                agent.speed = speed * 0.5f;\n                if (Vector3.Distance(transform.position, wayPoint) <= 1)\n                {\n                    isWalk = false;\n                    if (remainLookAtTime < 0f)\n                    {\n                        GetNewPartolPoint();\n                        remainLookAtTime = lookAtTime;\n                    }\n                    else\n                        remainLookAtTime -= Time.deltaTime;\n                }\n                else\n                {\n                    isWalk = true;\n                    agent.destination = wayPoint;\n                }\n                break;\n            case EnemyStates.CHASE:\n\n                agent.speed = speed;\n                isWalk = false;\n                isChase = true;\n                //ËÑ±Êàò\n                if (!FindPlayer())\n                {\n                    isFollow = false;\n                    agent.destination = transform.position;\n                    if (remainLookAtTime > 0)\n                    {\n                        remainLookAtTime -= Time.deltaTime;\n                    }\n                    else\n                    {\n                        if (isGuard)\n                        {\n                            enemyStates = EnemyStates.GUARD;\n                        }\n                        else\n                        {\n                            enemyStates = EnemyStates.PARTOL;\n                        }\n                    }\n                }\n                else\n                {\n                    //ËøΩÂáª\n                    isFollow = true;\n                    agent.isStopped = false;\n                    agent.destination = attackTarget.transform.position;\n                    //Âà§Êñ≠ÊòØÂê¶ËøΩÂáªÂà∞\n                    if (TargetInAttackRange() || TargetInSkillRange())\n                    {\n                        isFollow = false;\n                        agent.isStopped = true;\n                        if (lastAttackTime < 0f)\n                        {\n                            lastAttackTime = characterStats.CoolDown;\n                            //Êö¥ÂáªÂà§Êñ≠\n                            characterStats.isCritical = Random.value < characterStats.CriticalChance;\n                            \n                            Attack();\n                        }\n                    }\n                }\n\n                break;\n            case EnemyStates.DEAD:\n                //enemyÊ≠ª‰∫°Êó∂‰∏ç‰ºöÂèëÁîüÁªßÁª≠ÊîªÂáªÁöÑÊÉÖÂÜµ\n                coll.enabled = false;\n                \n                //agent.enabled = false;\n                //ËÆæÁΩÆ‰πãÂêé‰∏ç‰ºöÈòªÊå°PlayerË°åÂä®\n                agent.radius = 0f;\n                Destroy(gameObject, 2f);\n                break;\n            default:\n                break;\n        }\n    }\n    void Attack()\n    {\n        transform.LookAt(attackTarget.transform);\n        anim.SetBool(\"Critical\", characterStats.isCritical);\n        if (TargetInAttackRange())\n        {\n            anim.SetTrigger(\"Attack\");\n        }\n        if(TargetInSkillRange())\n        {\n            anim.SetTrigger(\"Skill\");\n        }\n    }\n\n    bool FindPlayer()\n    {\n        Collider[] colliderNum = Physics.OverlapSphere(transform.position, sightRadius);\n        foreach (var collider in colliderNum)\n        {\n            \n            if (collider.gameObject.CompareTag(\"Player\"))\n            {\n                attackTarget = collider.gameObject;\n                return true;\n            }\n        }\n        return false;\n    }\n\n    void SwitchAnim()\n    {\n        anim.SetBool(\"Walk\", isWalk);\n        anim.SetBool(\"Chase\", isChase);\n        anim.SetBool(\"Follow\", isFollow);\n        anim.SetBool(\"Die\", isDie);\n    }\n\n    private void OnDrawGizmosSelected()\n    {\n        //ÁîªÂá∫ÊîªÂáªËåÉÂõ¥Âúà\n        Gizmos.color = Color.green;\n        Gizmos.DrawWireSphere(transform.position, sightRadius);\n    }\n    \n    void GetNewPartolPoint()\n    {\n        float ran_x = Random.Range(-partolRadius, partolRadius);\n        float ran_z = Random.Range(-partolRadius, partolRadius);\n        //‰∏ç‰øÆÊîπÈ´òÂ∫¶ÔºåÈò≤Ê≠¢ÂùëÂùëÊ¥ºÊ¥ºÁöÑÂú∞Èù¢\n        //guardPointÊòØ‰∏∫‰∫ÜÈöèÊú∫Âú®ÂàùÂßã‰ΩçÁΩÆÁÇπÁöÑÈöèÊú∫ÁßªÂä®\n        wayPoint = new Vector3(guardPoint.x + ran_x, transform.position.y, guardPoint.z + ran_z);\n        NavMeshHit hit;\n        //NavMesh.SamplePositionÔºàÔºâÊñπÊ≥ïÁöÑÊúÄÂêé‰∏Ä‰Ωç‰∏∫Á™óÂè£ Navigation > AreaÁöÑÂ∫èÂàóÔºå‰ªé1ÂºÄÂßã\n        //ÊñπÊ≥ï‰∏∫ Âú®waypointÁöÑsightRadiusËåÉÂõ¥ÂÜÖÂØªÊâæ1Â±ÇÁ∫ßÔºàÂèØÁßªÂä®Âà∞ÔºâÁöÑÁÇπ\n        //ÊñπÊ≥ïËøîÂõûÁöÑ‰∏∫TrueÂíåFalse\n        wayPoint = NavMesh.SamplePosition(wayPoint, out hit, sightRadius,1) ? hit.position : transform.position;\n        \n\n    }\n    bool TargetInAttackRange()\n    {\n        if (attackTarget != null)\n        {\n            return Vector3.Distance(attackTarget.transform.position, transform.position) < characterStats.AttackRange;\n        }\n        else\n        {\n            return false;\n        }\n    }\n    bool TargetInSkillRange()\n    {\n        if (attackTarget != null)\n        {\n            return Vector3.Distance(attackTarget.transform.position, transform.position) < characterStats.SkillRange;\n        }\n        else\n        {\n            return false;\n        }\n    }\n    void Hit()\n    {\n        if (attackTarget != null && transform.IsFacingTarget(attackTarget.transform))\n        {\n            var targetStats = attackTarget.GetComponent<CharacterStats>();\n            characterStats.TakeDamage(characterStats, targetStats);\n        }\n    }\n\n    public void EndsNotify()\n    {\n        isChase = false;\n        isWalk = false;\n        attackTarget = null;\n        playerDie = true;\n        anim.SetBool(\"Victory\", true);\n    }\n}\n\n```\n\n### PlayController\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.AI;\n\npublic class PlayerController : MonoBehaviour\n{\n    public float lastAttackTime;\n    //ÊîªÂáªÁõÆÊ†áÂØπË±°\n    GameObject attackTarget;\n    CharacterStats characterStats;\n    NavMeshAgent agent;\n    Animator anim;\n    bool isDie;\n    float stopDistance;\n    private void Awake()\n    {\n        agent = GetComponent<NavMeshAgent>();\n        anim = GetComponent<Animator>();\n        characterStats = GetComponent<CharacterStats>();\n\n    }\n\n    private void Start()\n    {\n        //Ê∑ªÂä†‰∫ã‰ª∂\n        MouseManager.Instance.OnMouseClicked += MoveToTarget;\n        MouseManager.Instance.OnClickedEnemy += EventAttack;\n        \n\t\t//Ê≥®ÂÜåGamemanagerÁöÑÂπøÊí≠\n        GameManager.Instance.RigisterPlayer(characterStats);\n        stopDistance = agent.stoppingDistance;\n    }\n    private void Update()\n    {\n        isDie = characterStats.CurrentHealth == 0;\n        if (isDie)\n        {\n            GameManager.Instance.NotifyObservers();\n        }\n        AnimationChange();\n        if(lastAttackTime>0f)\n            lastAttackTime -= Time.deltaTime;\n    }\n    void MoveToTarget(Vector3 target)\n    {\n        if (isDie) return;\n        agent.isStopped = false;\n        agent.stoppingDistance = stopDistance;\n        StopAllCoroutines();\n        agent.destination = target;\n    }\n\n    void AnimationChange()\n    {\n        anim.SetFloat(\"Speed\", agent.velocity.sqrMagnitude);\n        anim.SetBool(\"Die\", isDie);\n    }\n\n    void EventAttack(GameObject target)\n    {\n        if (isDie) return;\n\n        if (target != null)\n        {\n            attackTarget = target;\n            StartCoroutine(\"MoveToAttackTarget\");\n        }\n    }\n    //Âä®Áîª‰∫ã‰ª∂\n    void Hit()\n    {\n        if (attackTarget.CompareTag(\"Attackable\"))\n        {\n            if (attackTarget.GetComponent<Rock>())\n            {\n                //Âú®Á©∫‰∏≠‰πüÂèØ‰ª•ÂáªÈ£û\n                attackTarget.GetComponent<Rock>().rockStates = Rock.RockStates.HitEnemy;\n                //Ëµã‰∫àÂàùÂßãÈÄüÂ∫¶ÔºåÈò≤Ê≠¢fixudateÊó∂‰øÆÊîπrockÁä∂ÊÄÅ\n                attackTarget.GetComponent<Rigidbody>().velocity = Vector3.one;\n                attackTarget.GetComponent<Rigidbody>().AddForce(transform.forward * 20f,ForceMode.Impulse);\n\n            }\n        }\n        else\n        {\n            var targetStats = attackTarget.GetComponent<CharacterStats>();\n            characterStats.TakeDamage(characterStats, targetStats);\n        }\n    }\n    IEnumerator MoveToAttackTarget()\n    {\n        agent.stoppingDistance = characterStats.AttackRange;\n        agent.isStopped = false;\n        while (Vector3.Distance(attackTarget.transform.position, transform.position) > characterStats.AttackRange)\n        {\n            agent.destination = attackTarget.transform.position;\n            yield return null;\n        }\n        agent.isStopped = true;\n        if (lastAttackTime < 0)\n        {\n            transform.LookAt(attackTarget.transform.position);\n            //Êö¥ÂáªÁéáÁöÑËÆ°ÁÆó\n            characterStats.isCritical = Random.value < characterStats.CriticalChance;\n            anim.SetBool(\"Critical\",characterStats.isCritical);\n            anim.SetTrigger(\"Attack\");\n            //ÈáçÁΩÆÂÜ∑Âç¥Êó∂Èó¥\n            lastAttackTime = characterStats.CoolDown;\n        }\n    }\n}\n\n```\n\n### CharacterStats\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing System;\npublic class CharacterStats : MonoBehaviour\n{\n\n    public event Action<int, int> UpdateHealthBarOnAttack;\n\n    public Character_SO templateData;\n    public Character_SO character;\n    public AttackSO attackSO;\n    [HideInInspector]\n    public bool isCritical;\n\n    private void Awake()\n    {\n        //Áî®Ê®°Êùø‰∏∫characterÁîüÊàê‰∏ÄÁªÑÊï∞ÊçÆÔºåÈò≤Ê≠¢Â§ö‰∏™enemyËÆøÈóÆÂêå‰∏ÄÁªÑÊï∞ÊçÆ\n        if (templateData != null)\n        {\n            character = Instantiate(templateData);\n        }\n    }\n    public int MaxHealth\n    {\n        get { if (character != null) { return character.maxHealth; } else { return 0; } }\n        set { character.maxHealth = value; }\n    }\n    public int CurrentHealth\n    {\n        get { if (character != null) { return character.currentHealth; } else { return 0; } }\n        set { character.currentHealth = value; }\n    }\n    public int BaseDefence\n    {\n        get { if (character != null) { return character.baseDefence; } else { return 0; } }\n        set { character.baseDefence = value; }\n    }\n    public int CurrentDefence\n    {\n        get { if (character != null) { return character.currentDefence; } else { return 0; } }\n        set { character.currentDefence = value; }\n    }\n    public float AttackRange { get {  return attackSO.attackRange; } }\n    public float SkillRange { get { return attackSO.skillRange; } }\n    public float CoolDown { get { return attackSO.coolDown; } }\n    public float MinDamage { get { return attackSO.minDamage; } }\n    public float MaxDamage { get { return attackSO.maxDamage; } }\n\n    public float CriticalMultiplier { get { return attackSO.criticalMultiplier; } }\n    public float CriticalChance { get { return attackSO.criticalChance; } }\n    \n    public void TakeDamage(CharacterStats attacker,CharacterStats defender)\n    {\n        int damage = Mathf.Max(attacker.CurrentDamage() - defender.CurrentDefence, 0);\n        defender.CurrentHealth = Mathf.Max(defender.CurrentHealth - damage, 0);\n        //defenderÂèó‰º§ÁöÑÂä®Áîª Êö¥ÂáªÊâç‰ºöÊúâ\n        if (attacker.isCritical)\n        {\n            defender.GetComponent<Animator>().SetTrigger(\"Hit\");\n        }\n\t\t//‰øÆÊîπÈò≤Âæ°ËÄÖË°ÄÊù°\n        defender.UpdateHealthBarOnAttack?.Invoke(defender.CurrentHealth, defender.MaxHealth);\n        if (defender.CurrentHealth <= 0)\n        {\n            //Êõ¥Êñ∞ÊîªÂáªËÄÖÁªèÈ™å\n            attacker.character.UpdateExp(defender.character.killPoint);\n        }\n    }\n\n    public void TakeDamage(int damage,CharacterStats defender)\n    {\n        int currentDamage = Mathf.Max(damage - defender.CurrentDefence, 0);\n        defender.CurrentHealth = Mathf.Max(defender.CurrentHealth - currentDamage, 0);\n        UpdateHealthBarOnAttack?.Invoke(defender.CurrentHealth, defender.MaxHealth);\n\n    }\n\n    int CurrentDamage()\n    {\n        float damage = UnityEngine.Random.Range(MinDamage, MaxDamage); ;\n        if (isCritical)\n        {\n            damage *= CriticalMultiplier;\n            Debug.Log(\"Êö¥ÂáªÔºö\" + damage);\n\n        }\n        return (int)damage;\n    }\n}\n\n```\n\n**Character_SO**\n\n```csharp\nusing System;\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n\n\n//filename‰∏∫ÂàõÂª∫ÁöÑÊñá‰ª∂ÁöÑÊñá‰ª∂ÂêçÔºåmenuName‰∏∫Êñá‰ª∂Â§πÁõÆÂΩïÂ±ÇÁ∫ßÂêçÂ≠ó\n[CreateAssetMenu(fileName = \"New Data\", menuName = \"Character Stats/Data\")]\n\npublic class Character_SO : ScriptableObject\n{\n    [Header(\"Stats Info\")]\n    public int maxHealth;\n    public int currentHealth;\n    public int baseDefence;\n    public int currentDefence;\n\n    [Header(\"Kill\")]\n    public int killPoint;\n\n    [Header(\"Level\")]\n    public int currentLevel;\n    public int maxLevel;\n    public int baseExp;\n    public int currentExp;\n    public float levelBuff;\n\n    public void UpdateExp(int point)\n    {\n        currentExp += point;\n        if (currentExp >= baseExp)\n        {\n            currentExp -= baseExp;\n            LevelUP();\n        }\n    }\n\n    private void LevelUP()\n    {\n        currentLevel = Mathf.Clamp(currentLevel + 1, 0, maxLevel);\n        baseExp += (int)(baseExp * LevelMultiplier);\n        maxHealth = (int)(maxHealth * LevelMultiplier);\n        currentHealth = maxHealth;\n    }\n    public float LevelMultiplier\n    {\n        get {return 1+(currentLevel-1)*levelBuff ; }\n    }\n}\n\n```\n\n**Attack_SO**\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n\n[CreateAssetMenu(fileName =\"New Attack\",menuName =\"Attack/Attack Data\")]\npublic class AttackSO : ScriptableObject\n{\n    [Header(\"Attack Info\")]\n    public float attackRange;\n    public float skillRange;\n    public float coolDown;\n    public int minDamage;\n    public int maxDamage;\n    public float criticalMultiplier;\n    public float criticalChance;\n    \n}\n\n```\n\n### Ê≥õÂûãÂçï‰æãÊ®°ÂºèSingleton\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n\npublic class SingleTon<T> : MonoBehaviour where T:SingleTon<T>\n{\n    private static T instance;\n\n    public static T Instance\n    {\n        get { return instance; }\n    }\n\n    protected virtual void Awake()\n    {\n        if (instance != null)\n        {\n            Destroy(gameObject);\n        }\n        else\n        {\n            instance = (T)this;\n        }\n    }\n    public static bool isInitialized\n    {\n         get { return instance != null; }\n    }\n}\n\n```\n\n### Êé•Âè£Observer Pattern\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n\npublic interface IEndGameObserver\n{\n    //Âè™ÂÆö‰πâÔºå‰∏çÂÆûÁé∞ÁïôÁªô‰ΩøÁî®ÁöÑÂÆûÁé∞Ëøô‰∏™ÊñπÊ≥ï\n    void EndsNotify();\n}\n\n```\n\n### GameManger\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n\npublic class GameManager : SingleTon<GameManager>\n{\n    public CharacterStats playerStats;\n\t\n    //Êé•Âè£Á±ªÂûã\n    List<IEndGameObserver> endGameObeverses = new List<IEndGameObserver>();\n    \n    protected override void Awake()\n    {\n        base.Awake();\n    }\n    public void RigisterPlayer(CharacterStats characterStats)\n    {\n        playerStats = characterStats;\n    }\n\n    public void AddObserver(IEndGameObserver observer)\n    {\n        endGameObeverses.Add(observer);\n    }\n    public void RemoveObserver(IEndGameObserver observer)\n    {\n        endGameObeverses.Remove(observer);\n    }\n\n    public void NotifyObservers()\n    {\n        //ÈÅçÂéÜÊ∑ªÂä†ËøõÊù•ÁöÑÂØπË±°\n        //Êå®‰∏™Ë∞ÉÁî®EndsNotifyÔºàÔºâÊñπÊ≥ï\n        foreach (var observer in endGameObeverses)\n        {\n            observer.EndsNotify();\n        }\n    }\n}\n\n```\n\n### ËÆæÁΩÆÂÖΩ‰∫∫Grunt\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.AI;\n\n//ÁªßÊâø‰∫éEnemyController\npublic class Grunt : EnemyController\n{\n    [Header(\"GRUNTÊé®Âäõ\")]\n    public float kickForce = 15f;\n    //Âä®Áîª‰∫ã‰ª∂\n    void KickOff()\n    {\n        if (attackTarget != null)\n        {\n            transform.LookAt(attackTarget.transform);\n            Vector3 direction = attackTarget.transform.position - transform.position;\n            direction.Normalize();\n            //ÊâìÊñ≠playerË°åÂä®ÔºåËøõË°åÂáªÈÄÄ\n            attackTarget.GetComponent<NavMeshAgent>().isStopped = true;\n            attackTarget.GetComponent<NavMeshAgent>().velocity = direction * kickForce;\n            attackTarget.GetComponent<Animator>().SetTrigger(\"Dizzy\");\n        }\n    }\n}\n\n```\n\n### ÊãìÂ±ïÊñπÊ≥ïExtension Method\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n\n//ÊãìÂ±ïÊñπÊ≥ï \npublic static class ExtensionMethod \n{\n    private const float dotThreshold = 0.5f;\n\n    //ÊãìÂ±ïÁöÑÊòØthisÂêéÈù¢ÁöÑÊñπÊ≥ï,ÂêéÈù¢ÁöÑ‰∏∫ÊñπÊ≥ïÊâÄÈúÄË¶ÅÁöÑÂáΩÊï∞\n    //‰ΩøÁî®ÊñπÊ≥ï :transform.IsFacingTarget(target)\n    public static bool IsFacingTarget(this Transform transform,Transform target)\n    {\n        //ÂêëÈáèOA-OB=BA;O‰∏∫ÂéüÁÇπÔºõ\n        Vector3 vectorToTarget = target.position - transform.position;\n        vectorToTarget.Normalize();\n        //vector3.dot ‰∏∫ÁúãÂêëÁöÑÊñπÂêë‰∏évectortoTargetÁöÑÊñπÂêëÁöÑÂ§πËßíÔºåÊ≠£ÂØπÁùÄ‰∏∫1ÔºåËÉåÂØπÁùÄ‰∏∫-1ÔºåÂ∑¶Âè≥‰∏∫0Ôºõ\n        float dot = Vector3.Dot(transform.forward, vectorToTarget);\n        return dot >= dotThreshold;\n    }\n\n}\n```\n\n### Áü≥Â§¥‰∫∫Golem\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.AI;\n\npublic class Golem : EnemyController\n{\n    [Header(\"GRUNTÊé®Âäõ\")]\n    public float kickForce = 25f;\n\n    public GameObject rockPerfab;\n    public Transform handTransform;\n    //animation event\n    void KickOff()\n    {\n        if (attackTarget != null && transform.IsFacingTarget(attackTarget.transform))\n        {\n            var targetStats = attackTarget.GetComponent<CharacterStats>();\n            Vector3 direction = attackTarget.transform.position - transform.position;\n            direction.Normalize();\n            transform.LookAt(attackTarget.transform);\n            attackTarget.GetComponent<NavMeshAgent>().isStopped = true;\n            attackTarget.GetComponent<NavMeshAgent>().velocity = direction * kickForce;\n            attackTarget.GetComponent<Animator>().SetTrigger(\"Dizzy\");\n            characterStats.TakeDamage(characterStats, targetStats);\n        }\n    }\n    //animation event\n    void ThrowRock()\n    {\n        if (attackTarget != null)\n        {\n            GameObject rock = Instantiate(rockPerfab, handTransform.position, Quaternion.identity);\n            rock.GetComponent<Rock>().target = attackTarget;\n        }\n    }\n}\n\n```\n\n### ÊâîÁü≥Â§¥\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.AI;\nusing UnityEngine.Animations;\n\npublic class Rock : MonoBehaviour\n{\n    public enum RockStates { HitPlayer,HitEnemy,HitNothing}\n    public RockStates rockStates;\n\n    public GameObject target;\n    public GameObject rockBreak;\n    public float force;\n    public int damage;\n    Vector3 direction;\n    Rigidbody rb;\n    void Start()\n    {\n        rb = GetComponent<Rigidbody>();\n        rb.velocity = Vector3.one;\n        rockStates = RockStates.HitPlayer;\n        FlyToTarget();\n    }\n\n    private void FixedUpdate()\n    {\n        if (rb.velocity.sqrMagnitude < 0.5f)\n        {\n            rockStates = RockStates.HitNothing;\n        }\n    }\n   \n    void FlyToTarget()\n    {\n        if (target == null)\n            target = FindObjectOfType<PlayerController>().gameObject;\n        direction = (target.transform.position - transform.position+Vector3.up ).normalized;\n        rb.AddForce(direction * force, ForceMode.Impulse);\n    }\n\n    private void OnCollisionEnter(Collision collision)\n    {\n        switch (rockStates)\n        {\n            case RockStates.HitPlayer:\n                if (collision.collider.CompareTag(\"Player\"))\n                {\n                    collision.gameObject.GetComponent<NavMeshAgent>().isStopped = true;\n                    collision.gameObject.GetComponent<NavMeshAgent>().velocity = direction * force;\n                    collision.gameObject.GetComponent<Animator>().SetTrigger(\"Dizzy\");\n\n                    rockStates = RockStates.HitNothing;\n                    collision.gameObject.GetComponent<CharacterStats>().TakeDamage(damage, collision.gameObject.GetComponent<CharacterStats>());\n                }\n                break;\n            case RockStates.HitEnemy:\n                //Â¶ÇÊûúÊúâËøô‰∏™ÁªÑ‰ª∂ËøîÂõûtrueÔºõ\n                if (collision.gameObject.GetComponent<Golem>())\n                {\n                    collision.gameObject.GetComponent<CharacterStats>().TakeDamage(damage, collision.gameObject.GetComponent<CharacterStats>());\n                    \n                    //ÊîªÂáªÁü≥Â§¥‰∫∫‰πãÂêéÔºåÁü≥Â§¥Á¢éË£ÇÁîüÊàêÁ≤íÂ≠êÁâπÊïà\n                    Instantiate(rockBreak, transform.position, Quaternion.identity);\n                    Destroy(gameObject);\n                }\n                break;\n            case RockStates.HitNothing:\n                break;\n            default:\n                break;\n        }\n\n\n    }\n}\n\n```\n\n**Á≤íÂ≠êÁâπÊïà**\n\nHierarchy > Effects > Particle System\n\n### Ë°ÄÊù°ÊòæÁ§∫ HealthBar\n\n**ÊåÇËΩΩÂú®enemyË∫´‰∏ä**\n\n```csharp\nusing System;\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.UI;\npublic class HealthBar : MonoBehaviour\n{\n    public GameObject healthBarUiPerfab;\n\t//Ë°ÄÊù°ÁöÑ‰ΩçÁΩÆÔºåenemyËÆæÁΩÆ‰∏Ä‰∏™Á©∫ÂØπË±°ÔºåË∞ÉÊï¥‰ΩçÁΩÆ‰∏∫Â§¥ÈÉ®‰∏äÊñπ\n    public Transform barPoint;\n    //ÊòØÂê¶‰∏ÄÁõ¥ÊòæÁ§∫ ÊòæÁ§∫ÁöÑÊó∂Èïø\n    public bool alwaysVisible;\n    public float visibleTime;\n    float timeLeft;\n\n    Image healthSlider;\n    Transform UIBar;\n    Transform cam;\n    CharacterStats currentStats;\n\n    private void Awake()\n    {\n        //Ëé∑ÂèñÁªÑ‰ª∂\n        currentStats = GetComponent<CharacterStats>();\n        //Ê∑ªÂä†‰∫ãÂä°\n        currentStats.UpdateHealthBarOnAttack += UpdateHealthBar;\n    }\n    private void OnEnable()\n    {\n        cam = Camera.main.transform;\n        foreach (Canvas canvas in FindObjectsOfType<Canvas>())\n        {\n            if (canvas.renderMode == RenderMode.WorldSpace)\n            {\n                UIBar = Instantiate(healthBarUiPerfab, canvas.transform).transform;\n                healthSlider = UIBar.GetChild(0).GetComponent<Image>();\n                UIBar.gameObject.SetActive(alwaysVisible);\n            }\n        }\n\n    }\n\n    private void UpdateHealthBar(int currentHealth, int Maxhealth)\n    {\n        if (currentHealth <= 0)\n            Destroy(UIBar.gameObject);\n\n        UIBar.gameObject.SetActive(true);\n        //ÊîªÂáªÊó∂ÈáçÁΩÆÊòæÁ§∫Ââ©‰ΩôÊó∂Èó¥\n        timeLeft = visibleTime;\n        float sliderPercent = (float)currentHealth / Maxhealth;\n        //image TypeËÆæÁΩÆ‰∏∫FilledÔºåfillmethodËÆæÁΩÆ‰∏∫Horizontal\n        healthSlider.fillAmount = sliderPercent;\n\n    }\n    private void LateUpdate()\n    {\n        if (UIBar != null)\n        {\n            //‰ΩçÁΩÆ\n            UIBar.position = barPoint.position;\n            //uiÁöÑÊñπÂêë‰∏éÊëÑÂÉèÊú∫ÁöÑÊñπÂêëÁõ∏Âèç\n            UIBar.forward = -cam.forward;\n\n            if (timeLeft <= 0f&&!alwaysVisible)\n            {\n                UIBar.gameObject.SetActive(false);\n            }\n            else\n            {\n                timeLeft -= Time.deltaTime;\n\n            }\n        }\n\n\n    }\n}\n\n```\n\n### PlayerUI\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.UI;\n\npublic class PlayHealthBar : MonoBehaviour\n{\n    Text level;\n    Image healthSlider;\n    Image expSlider;\n\n    private void Awake()\n    {\n        level = transform.GetChild(2).GetComponent<Text>();\n        healthSlider = transform.GetChild(0).GetChild(0).GetComponent<Image>();\n        expSlider = transform.GetChild(1).GetChild(0).GetComponent<Image>();\n    }\n\n    private void LateUpdate()\n    {\n        level.text = \"Level  \" + GameManager.Instance.playerStats.character.currentLevel.ToString(\"00\");\n\n        UpdateHealth();\n\n        UpdateExp();\n    }\n\n    void UpdateHealth()\n    {\n        float sliderPercent = (float)GameManager.Instance.playerStats.CurrentHealth / GameManager.Instance.playerStats.MaxHealth;\n        healthSlider.fillAmount = sliderPercent;\n    }\n    void UpdateExp()\n    {\n        float sliderPercent = (float)GameManager.Instance.playerStats.character.currentExp / GameManager.Instance.playerStats.character.baseExp;\n        expSlider.fillAmount = sliderPercent;\n    }\n}\n\n```\n\n>ËÆæÁΩÆuiÊó∂ÔºåÈ¶ñÂÖàÈúÄË¶ÅË∞ÉÊï¥CanvasÁöÑScaler\n>\n>UI Scale ModeËÆæÁΩÆ‰∏∫Scale With Screen Size,MatchËÆæÁΩÆ‰∏∫0.5ÔºåÂêåÊó∂ÂÖºÈ°æÈ´òÂ∫¶ÂíåÂÆΩÂ∫¶\n\n>\n>\n>CanvasÊúâ‰∏™Canvas GroupÁªÑ‰ª∂ÔºåÂèØ‰ª•ËÆæÁΩÆÂèñÊ∂àÈòªÊå°Â∞ÑÁ∫ø\n>\n>‰πüÂèØ‰ª•ÈÄöËøáË∞ÉÊï¥AlphaÁöÑÂÄºÂéªÂÅöËΩ¨Âú∫\n\n### ‰º†ÈÄÅÈó®\n\n‰ΩøÁî®lit shader\n\nshaderÂà∂‰ΩúÊàêÊùêË¥®ÔºåÂàõÂª∫‰∏Ä‰∏™3D > planeÔºåÊãñÊãΩËµã‰∫àËøô‰∏™ÊùêË¥®ÔºåÂπ∂ÁîüÊàê‰∏Ä‰∏™‰º†ÈÄÅÁÇπ‰ΩçÁΩÆ\n\nÊûö‰∏æÁ±ª\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n\npublic class TransitionDestination : MonoBehaviour\n{\n    public enum DestinationTag { Enter,A,B,C}\n\n    public DestinationTag destinationTag;\n}\n\n```\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n\npublic class TransiationPoint : MonoBehaviour\n{\n    public enum TransitionType { SameScence,DifferentScence}\n\n    [Header(\"Transition Info\")]\n    public string scenceName;\n    public TransitionType transitionType;\n    //Êûö‰∏æÁªàÁÇπÁºñÂè∑\n    public TransitionDestination.DestinationTag destinationTag;\n\n    bool canTrans;\n\n    private void Update()\n    {\n        if (Input.GetKeyDown(KeyCode.E) && canTrans)\n        {\n            ScenceController.Instance.TransitionToDestination(this);\n        }\n    }\n    private void OnTriggerStay(Collider other)\n    {\n        if (other.CompareTag(\"Player\"))\n        {\n            canTrans = true;\n        }\n    }\n    private void OnTriggerExit(Collider other)\n    {\n        if (other.CompareTag(\"Player\"))\n        {\n            canTrans = false;\n        }\n    }\n}\n\n```\n\nÂÆûÁé∞Âú∫ÊôØËΩ¨Êç¢\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.SceneManagement;\n\nusing UnityEngine.AI;\n\npublic class ScenceController : SingleTon<ScenceController>\n{\n    GameObject player;\n    NavMeshAgent playerAgent;\n    public void TransitionToDestination(TransiationPoint transiationPoint)\n    {\n        switch (transiationPoint.transitionType)\n        {\n            case TransiationPoint.TransitionType.SameScence:\n                StartCoroutine(Transition(SceneManager.GetActiveScene().name, transiationPoint.destinationTag));\n                break;\n            case TransiationPoint.TransitionType.DifferentScence:\n                break;\n            default:\n                break;\n        }\n    }\n\n    IEnumerator Transition(string scenceName,TransitionDestination.DestinationTag destinationTag)\n    {\n        player = GameManager.Instance.playerStats.gameObject;\n\n        playerAgent = player.GetComponent<NavMeshAgent>();\n        playerAgent.isStopped = true;\n\n       //ËÆæÁΩÆ‰ΩçÁΩÆ‰∏éÊñπÂêëtransform.SetPositionAndRotationÔºàÔºâ\n        player.transform.SetPositionAndRotation(GetDestination(destinationTag).transform.position, GetDestination(destinationTag).transform.rotation);\n        yield return null;\n    }\n\t\n    //ÈÅçÂéÜËé∑ÂèñÁªàÁÇπÁöÑ‰ø°ÊÅØ\n    TransitionDestination GetDestination(TransitionDestination.DestinationTag destinationTag)\n    {\n        var entrances = FindObjectsOfType<TransitionDestination>();\n        foreach (var item in entrances)\n        {\n            if (item.destinationTag == destinationTag)\n            {\n                return item;\n            }\n        }\n        return null;\n    }\n}\n\n```\n\n### ‰øùÂ≠òÊï∞ÊçÆ\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n\npublic class SaveManager : SingleTon<SaveManager>\n{\n\n\n    private void Update()\n    {\n        if (Input.GetKeyDown(KeyCode.K))\n        {\n            Save(GameManager.Instance.playerStats.character, GameManager.Instance.playerStats.name);\n            Debug.Log(GameManager.Instance.playerStats.name);\n        }\n        if (Input.GetKeyDown(KeyCode.L))\n        {\n            Load(GameManager.Instance.playerStats.character, GameManager.Instance.playerStats.name);\n            \n        }\n    }\n\n    public void Save(object data,string key)\n    {\n        //Êï∞ÊçÆËΩ¨Êàêjson\n        var jsonData = JsonUtility.ToJson(data, true);\n        //jsonËΩ¨Êàê‰∫åËøõÂà∂\n        PlayerPrefs.SetString(key, jsonData);\n        PlayerPrefs.Save();\n    }\n    public void Load(object data, string key)\n    {\n        if (PlayerPrefs.HasKey(key))\n        {\n            //PlayerPrefs.GetString(key)Â∞Ü‰∫åËøõÂà∂ËΩ¨‰∏∫jsonÔºåË¶ÜÁõñÂà∞data‰∏ä\n            JsonUtility.FromJsonOverwrite(PlayerPrefs.GetString(key), data);\n            Debug.Log(\"111\");\n\n        }\n    }\n}\n\n```\n\n","source":"_posts/002_unityRpg.md","raw":"---\ntitle: 3DURPÊ∏∏ÊàèÂà∂‰ΩúÁ¨îËÆ∞\ndate: 2022-5-10\ndescription:\ntop_image: /img/002.png\ncover: /img/002.png\ncategories: \n- Unity\ntags: \n- Games\n- Ê∏∏ÊàèÂà∂‰Ωú\n- M_studio\n---\n\n# 3DURPÊ∏∏ÊàèÂà∂‰ΩúÁ¨îËÆ∞\n\n> ÊÑüË∞¢È∫¶Êâ£ËÄÅÂ∏àÔºÅÔºÅÔºÅ\n>\n> [bÁ´ôÂú∞ÂùÄ](https://space.bilibili.com/370283072)\n>\n> Ëøô‰∫õÊòØÊàëË∑üÁùÄÂ≠¶‰π†Êï≤Âæó‰ª£Á†ÅÔºåÊúâ‰∫õÂèØËÉΩ‰∏ç‰∏ÄÊ†∑ÔºåÂÆåÂÖ®Â§çÂà∂ËÇØÂÆö‰ºöÊúâÈóÆÈ¢òÔºå‰∏ªË¶ÅÁî®Êù•ÁªôÂ≠¶‰π†ÁöÑÂêåÂ≠¶Á∫†Èîô\n\n\n\n### Ê∏∏ÊàèÁöÑÂàõÂª∫‰∏éÂú∞ÂõæÁöÑÈì∫ËÆæ\n\n‰ΩøÁî®Âà∞ÁöÑÊèí‰ª∂Êúâ**Pro Grids**,**ProBuilder**,**PloyBrush**\n\n1. ‰ΩøÁî®Âà∞ÁöÑÂú∞ÂõæÊ®°Êùø‰∏∫Ê≠£Â∏∏Ê®°ÊùøÔºåÁÑ∂ÂêéÂú®ProjectÊñá‰ª∂Â§π‰∏≠Êñ∞Âª∫URP„ÄÇ\n\n2. Âè≥‰∏äËßíEdit > Project Setting\n   1. Â∞ÜGraphicsÁöÑScirptable Render Pipeline Settings‰øÆÊîπ‰∏∫ÂàõÂª∫ÁöÑ**UniversalRenderPiepelineAsset**\n   2. QualityÁöÑRendering‰øÆÊîπ‰∏∫ÂàõÂª∫ÁöÑ**UniversalRenderPiepelineAsset**\n\n3. ‰ΩøÁî®Á¥†ÊùêÊó∂ÔºåÂçáÁ∫ßÁ¥†ÊùêÁöÑURP„ÄÇEdit > Render Pipeline > Universal Render Pipeline > Upgrade Project Materials To UniversalRP Materials\n\n4. ÂÖâÁÖßÁöÑËÆæÁΩÆ Windows > Rendering >Lighting„ÄÇÂú®SceneÁ™óÂè£ÁîüÊàê‰∏Ä‰∏™New Lighting Settings„ÄÇLighting Mode‰∏ÄËà¨‰∏∫Baked IndirectÔºàÁÆÄ‰ªãÁÉòÁÑôÔºâÔºåLightmapper‰∏ÄËà¨ÈÄâÊã©‰∏∫GPUÔºåÂèñÊ∂àÂãæÈÄâAuto GenerateÔºåÁÑ∂ÂêéËøõË°åGenerate Lighting„ÄÇ\n\n   > Â¶ÇÊûúÂèëÁîüÂú∫ÊôØÈ¢úËâ≤ÂèëÁîüÊîπÂèòÔºå‰∏çÊòØÂéüÊú¨ÁöÑÈ¢úËâ≤ÔºåÂèØ‰ª•Âú®Lighting > EnvironmentÈáåÈÄâÊã© Environment Lighting > Source ËÆæÁΩÆ‰∏∫Color„ÄÇ\n\n5. Ë∞ÉÊï¥ÊëÑÂÉèÊú∫ÁöÑÊäÄÂ∑ßÔºöCtrl + Shift + FÔºåË∞ÉÊï¥Áâ©‰ΩìÂùêÊ†áËΩ¥Âê∏ÈôÑ VÈîÆ„ÄÇ\n\n6. ÂØºÂÖ•Êèí‰ª∂**PloyBrush**Âπ∂‰∏îÂú®ÂØºÂÖ•Êó∂Â∞ÜSample‰∏≠ÁöÑURPÊñá‰ª∂‰∏ÄÂπ∂ÂØºÂÖ•„ÄÇ \n\n   > ‰ΩøÁî®PloybrushÁöÑÁ¨îÂà∑Âà∑È¢úËâ≤ÁöÑÊó∂ÂÄôÔºåÂèëÁé∞Âà∑‰∏ç‰∏äÈ¢úËâ≤ÁöÑÂéüÂõ†ÊòØÔºåÁâ©‰ΩìÁöÑÊùêË¥®Âπ∂Ê≤°Êúâ‰ΩøÁî®PloybrushÁöÑshaderÂàõÂª∫ÁöÑÊùêË¥®ÔºåÁî®shaderÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÊùêË¥®Âπ∂‰øÆÊîπÁâ©‰ΩìÁöÑÊùêË¥®ÔºàÊãñÊãΩ‰πüÂèØ‰ª•ÔºâÔºåÁÑ∂ÂêéËøõË°åÈ¢úËâ≤ÁöÑÊ∂ÇÊäπ\n\n7. Âπ≥Âè∞ÁöÑÂ§ßÂ∞èÂíåÂ∞ëÊï∞ÁöÑÈ°∂ÁÇπÂΩ±Âìç‰∫ÜÂú∞ÂõæÁöÑÂàõ‰ΩúÔºåÊâÄ‰ª•ÈúÄË¶Å**Probuilder**Êù•ÁîüÊàêÊõ¥Á≤æËá¥ÁöÑÂú∞ÂõæÂπ≥Âè∞\n\n   > ÂêåÊó∂Êåâ‰Ωè**Ctrl**Âíå**Alt**ÈîÆÁÇπÂáªIconÁöÑÈΩøËΩÆÔºå‰ºöË∞ÉÂá∫ÂçïÁã¨ÁöÑËÆæÁΩÆ\n   >\n   > ‰ΩøÁî®**Center Pivot**ÂèØ‰ª•Ë∞ÉÊï¥‰∏≠ÂøÉÁÇπ\n   >\n   > ÂÖ≥‰∫éÂ¶Ç‰Ωï‰ΩøÁî®preview packageÔºöEdit > Project Setting > Package manager ,**Enable Preview Packages**\n\n### Âú∞ÂõæÁöÑÁÉòBake\n\nÁ™óÂè£Âú® Window > AI > Navigation\n\n1. ËÆæÁΩÆÂú∞Èù¢‰∏∫Navigation staticÔºåÂú®Navigation > ObjectÈáåÁöÑNavigation Area ËÆæÁΩÆ‰∏∫Walkable„ÄÇ\n\n   > - ÈÄâ‰∏≠Áâ©‰Ωì‰πãÂêéÔºåÂú®InspectorÁ™óÂè£ÈáåÔºåÁ¨¨‰∏ÄË°åÊúâÈÄâÊã©ÊòØÂê¶‰∏∫StaticÔºå‰∏ãÊãâÂèØÈÄâÊã©Á±ªÂûã\n   > - ÈÄâ‰∏≠Áâ©‰Ωì‰πãÂêéÔºåÂú®Navigation > ObjectÈáåËÆæÁΩÆNavigation static‰∏∫**true**\n\n2. ÈÄâ‰∏≠‰∏çÂèØÁßªÂä®ÁöÑÁâ©‰ΩìÔºåÊØîÂ¶ÇÊ†ëÊú®Áü≥Â§¥Á≠âÔºåÊâπÈáèËÆæÁΩÆ‰∏∫Navigation staticÔºåÁâπÊÆäÁöÑÈô§Â§ñ„ÄÇ\n3. ‰∏∫ËßíËâ≤Ê∑ªÂä†Navigation agent ÁªÑ‰ª∂ÔºåËÆæÁΩÆ‰∫∫Áâ©ÁöÑÂúÜÊü±‰ΩìÂ§ßÂ∞è‰ª•ÂèäÂÆΩÂ∫¶„ÄÇ\n4. Âú®Navigation > Bake ÈáåÂêåÊ†∑ËÆæÁΩÆ‰∏∫‰∫∫Áâ©ÁöÑÂúÜÊü±‰ΩìÂ§ßÂ∞è‰ª•ÂèäÂÆΩÂ∫¶Á≠âÂÖ∂‰ªñÊï∞ÊçÆÔºåÁÑ∂ÂêéÁÇπÂáªbakeÔºåÂú®Âú∞Âõæ‰∏äÊòæÁ§∫‰∏∫ËìùËâ≤ÁöÑ‰∏∫ÂèØwalkÂå∫Âüü„ÄÇ\n5. Â¶ÇÊûúÊúâÁâ©‰ΩìÂèØ‰ª•ÁßªÂä®ÔºåÂπ∂‰∏î‰∏çÊÉ≥ÂèëÁîüÁ©øÊ®°ÊïàÊûúÔºåÂèØÈÄâÊã©Ê∑ªÂä†ÁªÑ‰ª∂Nav Mesh Obstacle,ËÆæÁΩÆCarve‰∏∫**True**ÔºåÂ∞±‰ºöÂú®Âú∞Èù¢ÂêåÊó∂ÂàáÂâ≤Âá∫‰∏ÄÈÉ®ÂàÜÔºå‰∫∫Áâ©‰∏çÂèØwalkÁöÑÂå∫Âüü„ÄÇ\n\n### Èº†Ê†áÊéßÂà∂ÁßªÂä®‰ª•ÂèäË¥¥Âõæ\n\n**ÊâÄÊúâÁÆ°ÁêÜÁ±ªÈÉΩ‰∏çË¶ÅÂøò‰∫ÜÂú®Ê∏∏ÊàèÈáåÂàõÂª∫‰∏Ä‰∏™Á©∫ÂØπË±°ÔºåÊ∑ªÂä†‰∏äËÑöÊú¨**\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing System;\n\n\npublic class MouseManager : SingleTon<MouseManager>\n{\n\n\t//‰∫ãÂä°ÂßîÊâò\n    public event Action<Vector3> OnMouseClicked;\n    public event Action<GameObject> OnClickedEnemy;\n\n    RaycastHit hitInfo;\n\t//Èº†Ê†áË¥¥Âõæ\n    public Texture2D point, doorway, attack, target, arrow;\n    \n    protected override void Awake()\n    {\n        base.Awake();\n    }\n\n    void Update()\n    {\n        SetCursorTexture();\n        MouseControl();\n    }\n\n    void SetCursorTexture()\n    {\n        Ray ray = Camera.main.ScreenPointToRay(Input.mousePosition);\n        if(Physics.Raycast(ray,out hitInfo))\n        {\n            //ÂàáÊç¢Èº†Ê†áË¥¥Âõæ\n            switch (hitInfo.collider.gameObject.tag)\n            {\n                case \"Ground\":\n                    Cursor.SetCursor(target, new Vector2(16, 16),CursorMode.Auto);\n                    break;\n                case \"Enemy\":\n                    Cursor.SetCursor(attack, new Vector2(2, 2), CursorMode.Auto);\n                    break;\n                case \"Attackable\":\n                    Cursor.SetCursor(attack, new Vector2(2, 2), CursorMode.Auto);\n                    break;\n                case \"Portal\":\n                    Cursor.SetCursor(doorway, new Vector2(2, 2), CursorMode.Auto);\n                    break;\n            }\n        }\n    }\n\n    void MouseControl()\n    {\n        if (Input.GetMouseButtonDown(0) && hitInfo.collider != null)\n        {\n            if (hitInfo.collider.gameObject.CompareTag(\"Ground\"))\n            {\n                OnMouseClicked?.Invoke(hitInfo.point);\n            }else if (hitInfo.collider.gameObject.CompareTag(\"Enemy\"))\n            {\n                OnClickedEnemy?.Invoke(hitInfo.collider.gameObject);\n            }\n            else if (hitInfo.collider.gameObject.CompareTag(\"Attackable\"))\n            {\n                OnClickedEnemy?.Invoke(hitInfo.collider.gameObject);\n            }\n            else if (hitInfo.collider.gameObject.CompareTag(\"Portal\"))\n            {\n                OnMouseClicked?.Invoke(hitInfo.point);\n            }\n        }\n    }\n}\n\n```\n\n**ÂÖ≥‰∫éÈº†Ê†áÁöÑË¥¥Âõæ**\n\nÈº†Ê†áË¥¥Âõæ‰∏∫**Texture**,‰∏ÄËà¨‰∏∫Êó†ËÉåÊôØÁöÑÂõæÁâáÔºåÂä†ËΩΩÂà∞Unity‰πãÂêéÔºåÈÄâ‰∏≠Ë¥¥ÂõæÂπ∂ÊääTexture type‰øÆÊîπ‰∏∫**Cursor**„ÄÇ\n\n### Cineramachine\n\nÈÄâ‰∏≠Main cameraÔºåGameobject > Align View to Selected,Â∞Ü‰∏ªÁõ∏Êú∫ÈîÅÂÆöËßÜËßí\n\nÁä∂ÊÄÅÊ†èCineramachineÈÄâÊã©‰∏Ä‰∏™ÂêàÈÄÇÁöÑÊëÑÂÉèÊú∫ ÔºåÂΩìÂâçÈÄâÊã©ÁöÑ‰∏∫CinemachineVirtualCanmera,ÂèñÊ∂à‰∏ªÊëÑÂÉèÊú∫ÁöÑAudio ListenerÔºåBodyÈÄâÊã©Framing Transposer,AimÈÄâÊã©Nothing\n\nFollow ÈÄâÊã©‰∏∫‰∫∫Áâ©ÂØπË±° ÔºåÂ¶ÇÊûú‰∫∫Áâ©ÂùêÊ†áËΩ¥Âú®‰∏ãÊñπÔºåÂèØ‰ª•Âú®‰∫∫Áâ©ÂØπË±°ÈáåÊñ∞Âª∫‰∏Ä‰∏™Á©∫Áâ©‰ΩìÔºåÁÑ∂ÂêéÂ∞ÜÂùêÊ†áËΩ¥ÁßªÂä®Âà∞‰∫∫Áâ©‰∏≠ÂøÉ‰ΩçÁΩÆÔºåÂ∞ÜÁâ©‰ΩìÊãñÊãΩÂà∞**Follow**„ÄÇ\n\n> **BODY**\n>\n> - Do NothingÔºö‰∏çÁßªÂä®ËôöÊãüÁõ∏Êú∫\n> - Framing TransposerÔºöË∑üÈöèÁõÆÊ†áÁßªÂä®ÔºåÂπ∂Âú®Â±èÂπïÁ©∫Èó¥‰øùÊåÅÁõ∏Êú∫ÂíåË∑üÈöèÁõÆÊ†áÁöÑÁõ∏ÂØπ‰ΩçÁΩÆ„ÄÇ\n> - Hard Lock to TargetÔºöËôöÊãüÁõ∏Êú∫ÂíåË∑üÈöèÁõÆÊ†á‰ΩøÁî®Áõ∏Âêå‰ΩçÁΩÆ„ÄÇ\n> - Orbital TransposerÔºöÁõ∏Êú∫ÂíåË∑üÈöèÁõÆÊ†áÁöÑÁõ∏ÂØπ‰ΩçÁΩÆÊòØÂèØÂèòÁöÑÔºåËøòËÉΩÊé•Êî∂Áî®Êà∑ÁöÑËæìÂÖ•„ÄÇÂ∏∏ËßÅ‰∫éÁé©ÂÆ∂ÊéßÂà∂ÁöÑÁõ∏Êú∫„ÄÇ\n> - Tracked DollyÔºöÁõ∏Êú∫Ê≤øÁùÄÈ¢ÑÂÖàËÆæÁΩÆÁöÑËΩ®ÈÅìÁßªÂä®„ÄÇ\n> - TransposerÔºöË∑üÈöèÁõÆÊ†áÁßªÂä®ÔºåÂπ∂Âú®‰∏ñÁïåÁ©∫Èó¥‰øùÊåÅÁõ∏Êú∫ÂíåË∑üÈöèÁõÆÊ†áÁöÑÁõ∏ÂØπ‰ΩçÁΩÆÂõ∫ÂÆö„ÄÇ\n>\n> **AIM**\n>\n> - Do Nothing: ‰∏çÊéßÂà∂Áõ∏Êú∫ÁöÑÊóãËΩ¨„ÄÇ\n> - Composer: ‰øùÊåÅÁõÆÊ†áÁâ©‰ΩìÂú®ÈïúÂ§¥ÂÜÖ\n> - Group Composer: ‰øùÊåÅÂ§ö‰∏™ÁõÆÊ†áÂú®ÈïúÂ§¥ÂÜÖ\n>\n> - Hard Look At: ‰øùÊåÅÁõÆÊ†áÂú®ÈïúÂ§¥ÁöÑ‰∏≠ÂøÉ\n> - POV: Âü∫‰∫éÁé©ÂÆ∂ÁöÑËæìÂÖ•ÊóãËΩ¨Áõ∏Êú∫\n\n**Ê∑ªÂä†ÁéØÂ¢ÉËø∑Èõæ**\n\nWindow > Rendering > Lighting > Environment > FogËÆæÁΩÆ‰∏∫True\n\n> Â¶ÇÊûúSenceÂú∫ÊôØÊ≤°ÊúâÊòæÁ§∫FogÔºåÂàôÈúÄË¶ÅÂú®Á™óÂè£‰∏≠ÊâìÂºÄFogÂºÄÂÖ≥\n>\n> ModeÔºöLinear ‰∏∫ÊúÄËøëÊúÄËøúÂ§ÑËÉΩËßÅÂ∫¶\n\n**Global** **Volume**\n\nÂØπÂú∫ÊôØËøõË°åÂêéÂ§ÑÁêÜÔºåadd ÂÖ∂‰ªñÂäüËÉΩÂØπÂú∫ÊôØËøõË°åÊ∏≤Êüì\n\n> Â¶ÇÊûúÂú∫ÊôØÊ≤°ÊúâÊòæÁ§∫Âá∫ÊïàÊûúÔºåÂú®Main Camera > Rendering > Post Peocessing ËÆæÁΩÆ‰∏∫True\n\n### ÈÅÆÊå°ÂâîÈô§\n\n\n\nÈÄöËøá**Shader**ÂàõÂª∫ÊùêË¥®ÊîæÂÖ•Âà∞URPÁöÑ UniversalRenderPipelineAsset_Renderer ÔºåÊñ∞Âª∫Add Renderer Feature,ÈÄâÊã©Ë¢´ÈÅÆÊå°ÁöÑLayer MaskÔºåÂèØ‰ª•Â§öÈÄâÔºåÁÑ∂ÂêéËÆæÁΩÆË¢´ÈÅÆÊå°ÂêéÁöÑÊùêË¥®ÔºåDepthËÆæÁΩÆ‰∏∫TrueÔºåDepth TestËÆæÁΩÆ‰∏∫Greater„ÄÇÂΩìË¢´ÈÅÆÊå°Áâ©‰ΩìÂ±ÇÁ∫ßGreaterÊó∂ÔºåÊòæÁ§∫Ë¢´ÈÅÆÊå°ÂêéÁöÑÊùêË¥®„ÄÇ\n\nÂêåÊ†∑Add Renderer FeatureÔºåÈÄâÊã©Áõ∏ÂêåË¢´ÈÅÆÊå°ÁöÑLayer MaskÔºåÂÖ∂‰ªñ‰∏çÂÅö‰øÆÊîπÔºåÂΩì‰∏çË¢´ÈÅÆÊå°Êó∂ÊòæÁ§∫ÂéüÊúâÊùêË¥®\n\n**ÂÖ≥‰∫éÈÅÆÊå°ÊùêË¥®ÁöÑÂà∂‰Ωú**\n\nshaderÂàõÂª∫ÔºöProject > Âè≥ÈîÆ > Shader > URP >UnLit Shader Graph\n\n> Graph Inspector > Grapj Settings > Universal > Alpha Clip,ÊâìÂºÄAlphaÈÄèÊòéÈÄöÈÅì\n\n1. ‰ΩøÁî®Fresnel Effect Âà∂‰ΩúÈÅÆÊå°ÁöÑÊïàÊûúÔºåÈÄöËøáÊñ∞Âª∫ÂèòÈáèColor‰øÆÊîπÈ¢úËâ≤„ÄÇÈÄöËøáMultiplyÊ∑∑ÂêàÔºå‰º†ÁªôBase color„ÄÇ\n2. DitherÂà∂‰ΩúÂô™ÁÇπÊïàÊûúÔºåÊñ∞Âª∫Float‰øÆÊîπDitherÁöÑXÂÄºÔºåout‰º†ÁªôFragment > AlphaÈÄöÈÅì\n3. ÂàõÂª∫Flaot ‰øÆÊîπAlpha Threshold„ÄÇ\n4. ÈÄâÊã©ShaderÂàõÂª∫ÊùêË¥®\n\n**ÂÖ≥‰∫éÈº†Ê†áÂ∞ÑÁ∫øÈÅÆÊå°**\n\n- ÈÄâ‰∏≠ÈÅÆÊå°ÁöÑÁâ©‰ΩìÔºåËÆæÁΩÆÂ±ÇÁ∫ß‰∏∫Ignore Raycast\n- ÂÖ≥Èó≠ÈÅÆÊå°Áâ©‰ΩìÁöÑMesh Collider\n\n### EnemyController\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.AI;\n\npublic enum EnemyStates {GUARD,PARTOL,CHASE,DEAD }\n//ÈÄöËøá‰ª£Á†ÅÊ∑ªÂä†ÁªÑ‰ª∂\n[RequireComponent(typeof(NavMeshAgent))]\n[RequireComponent(typeof(CharacterStats))]\n\n//‰ΩøÁî®Êé•Âè£\npublic class EnemyController : MonoBehaviour,IEndGameObserver\n{\n    NavMeshAgent agent;\n    EnemyStates enemyStates;\n    Animator anim;\n    protected CharacterStats characterStats;\n    Collider coll;\n    //ÊîªÂáªËåÉÂõ¥ \n    public float sightRadius;\n    //Â∑°ÈÄªËåÉÂõ¥\n    public float partolRadius;\n    public bool isGuard;\n    //Â∑°ÈÄªÂÅúÁïôÊó∂Èó¥\n    public float lookAtTime;\n    float remainLookAtTime;\n    float speed;\n    //cdÊó∂Èó¥\n    float lastAttackTime;\n    //‰∏ã‰∏Ä‰∏™ÂâçÂæÄÁöÑÂ∑°ÈÄªÁÇπ\n    Vector3 wayPoint;\n    //Ëµ∑ÂßãÁÇπ\n    Vector3 guardPoint;\n    Quaternion guardRotation;\n    protected GameObject attackTarget;\n    bool isWalk, isChase, isFollow, isDie;\n    bool playerDie;\n    private void Awake()\n    {\n        agent = GetComponent<NavMeshAgent>();\n        anim = GetComponent<Animator>();\n        characterStats = GetComponent<CharacterStats>();\n        coll = GetComponent<Collider>();\n        //‰øùÂ≠òÂéüÊúâÈÄüÂ∫¶Ôºõ\n        speed = agent.speed;\n        guardPoint = transform.position;\n        remainLookAtTime = lookAtTime;\n        lastAttackTime = characterStats.CoolDown;\n        guardRotation = transform.rotation;\n    }\n    void Start()\n    {\n        if (isGuard)\n        {\n            enemyStates = EnemyStates.GUARD;\n        }\n        else\n        {\n            enemyStates = EnemyStates.PARTOL;\n            GetNewPartolPoint();\n        }\n        //Â∞ÜÂØπË±°Ê∑ªÂä†ËøõgamemanagerÈáåÔºåÁî®‰∫éÂπøÊí≠\n        GameManager.Instance.AddObserver(this);\n    }\n\n    // Update is called once per frame\n    void Update()\n    {\n        if (characterStats.CurrentHealth == 0)\n        {\n            isDie = true;\n        }\n        if (!playerDie)\n        {\n            SwitchStates();\n            SwitchAnim();\n            if (lastAttackTime > 0f)\n            {\n                lastAttackTime -= Time.deltaTime;\n            }\n        }\n    }\n    \n    //private void OnEnable()\n    //{\n    //    Gamemanager.Instance.AddObserver(this);\n    //}\n\n    private void OnDisable()\n    {\n        if (!GameManager.isInitialized) return;\n        GameManager.Instance.RemoveObserver(this);\n    }\n\n    void SwitchStates()\n    {\n        if (isDie)\n        {\n            enemyStates = EnemyStates.DEAD;\n        }\n        else if (FindPlayer())\n        {\n            enemyStates = EnemyStates.CHASE;\n            \n        }\n        switch (enemyStates)\n        {\n            case EnemyStates.GUARD:\n                isChase = false;\n                isWalk = false;\n                if (transform.position!=guardPoint)\n                {\n                    isWalk = true;\n                    agent.isStopped = false;\n                    agent.destination = guardPoint;\n                    if(Vector3.SqrMagnitude(guardPoint - transform.position) <= agent.stoppingDistance)\n                    {\n                        isWalk = false;\n                        agent.isStopped = true;\n                        //ÊóãËΩ¨‰ºöÂàùÂßãÁöÑËßíÂ∫¶\n                        Quaternion.Lerp(transform.rotation, guardRotation, 0.1f);\n                    }\n                }\n                break;\n            case EnemyStates.PARTOL:\n                isChase = false;\n                agent.speed = speed * 0.5f;\n                if (Vector3.Distance(transform.position, wayPoint) <= 1)\n                {\n                    isWalk = false;\n                    if (remainLookAtTime < 0f)\n                    {\n                        GetNewPartolPoint();\n                        remainLookAtTime = lookAtTime;\n                    }\n                    else\n                        remainLookAtTime -= Time.deltaTime;\n                }\n                else\n                {\n                    isWalk = true;\n                    agent.destination = wayPoint;\n                }\n                break;\n            case EnemyStates.CHASE:\n\n                agent.speed = speed;\n                isWalk = false;\n                isChase = true;\n                //ËÑ±Êàò\n                if (!FindPlayer())\n                {\n                    isFollow = false;\n                    agent.destination = transform.position;\n                    if (remainLookAtTime > 0)\n                    {\n                        remainLookAtTime -= Time.deltaTime;\n                    }\n                    else\n                    {\n                        if (isGuard)\n                        {\n                            enemyStates = EnemyStates.GUARD;\n                        }\n                        else\n                        {\n                            enemyStates = EnemyStates.PARTOL;\n                        }\n                    }\n                }\n                else\n                {\n                    //ËøΩÂáª\n                    isFollow = true;\n                    agent.isStopped = false;\n                    agent.destination = attackTarget.transform.position;\n                    //Âà§Êñ≠ÊòØÂê¶ËøΩÂáªÂà∞\n                    if (TargetInAttackRange() || TargetInSkillRange())\n                    {\n                        isFollow = false;\n                        agent.isStopped = true;\n                        if (lastAttackTime < 0f)\n                        {\n                            lastAttackTime = characterStats.CoolDown;\n                            //Êö¥ÂáªÂà§Êñ≠\n                            characterStats.isCritical = Random.value < characterStats.CriticalChance;\n                            \n                            Attack();\n                        }\n                    }\n                }\n\n                break;\n            case EnemyStates.DEAD:\n                //enemyÊ≠ª‰∫°Êó∂‰∏ç‰ºöÂèëÁîüÁªßÁª≠ÊîªÂáªÁöÑÊÉÖÂÜµ\n                coll.enabled = false;\n                \n                //agent.enabled = false;\n                //ËÆæÁΩÆ‰πãÂêé‰∏ç‰ºöÈòªÊå°PlayerË°åÂä®\n                agent.radius = 0f;\n                Destroy(gameObject, 2f);\n                break;\n            default:\n                break;\n        }\n    }\n    void Attack()\n    {\n        transform.LookAt(attackTarget.transform);\n        anim.SetBool(\"Critical\", characterStats.isCritical);\n        if (TargetInAttackRange())\n        {\n            anim.SetTrigger(\"Attack\");\n        }\n        if(TargetInSkillRange())\n        {\n            anim.SetTrigger(\"Skill\");\n        }\n    }\n\n    bool FindPlayer()\n    {\n        Collider[] colliderNum = Physics.OverlapSphere(transform.position, sightRadius);\n        foreach (var collider in colliderNum)\n        {\n            \n            if (collider.gameObject.CompareTag(\"Player\"))\n            {\n                attackTarget = collider.gameObject;\n                return true;\n            }\n        }\n        return false;\n    }\n\n    void SwitchAnim()\n    {\n        anim.SetBool(\"Walk\", isWalk);\n        anim.SetBool(\"Chase\", isChase);\n        anim.SetBool(\"Follow\", isFollow);\n        anim.SetBool(\"Die\", isDie);\n    }\n\n    private void OnDrawGizmosSelected()\n    {\n        //ÁîªÂá∫ÊîªÂáªËåÉÂõ¥Âúà\n        Gizmos.color = Color.green;\n        Gizmos.DrawWireSphere(transform.position, sightRadius);\n    }\n    \n    void GetNewPartolPoint()\n    {\n        float ran_x = Random.Range(-partolRadius, partolRadius);\n        float ran_z = Random.Range(-partolRadius, partolRadius);\n        //‰∏ç‰øÆÊîπÈ´òÂ∫¶ÔºåÈò≤Ê≠¢ÂùëÂùëÊ¥ºÊ¥ºÁöÑÂú∞Èù¢\n        //guardPointÊòØ‰∏∫‰∫ÜÈöèÊú∫Âú®ÂàùÂßã‰ΩçÁΩÆÁÇπÁöÑÈöèÊú∫ÁßªÂä®\n        wayPoint = new Vector3(guardPoint.x + ran_x, transform.position.y, guardPoint.z + ran_z);\n        NavMeshHit hit;\n        //NavMesh.SamplePositionÔºàÔºâÊñπÊ≥ïÁöÑÊúÄÂêé‰∏Ä‰Ωç‰∏∫Á™óÂè£ Navigation > AreaÁöÑÂ∫èÂàóÔºå‰ªé1ÂºÄÂßã\n        //ÊñπÊ≥ï‰∏∫ Âú®waypointÁöÑsightRadiusËåÉÂõ¥ÂÜÖÂØªÊâæ1Â±ÇÁ∫ßÔºàÂèØÁßªÂä®Âà∞ÔºâÁöÑÁÇπ\n        //ÊñπÊ≥ïËøîÂõûÁöÑ‰∏∫TrueÂíåFalse\n        wayPoint = NavMesh.SamplePosition(wayPoint, out hit, sightRadius,1) ? hit.position : transform.position;\n        \n\n    }\n    bool TargetInAttackRange()\n    {\n        if (attackTarget != null)\n        {\n            return Vector3.Distance(attackTarget.transform.position, transform.position) < characterStats.AttackRange;\n        }\n        else\n        {\n            return false;\n        }\n    }\n    bool TargetInSkillRange()\n    {\n        if (attackTarget != null)\n        {\n            return Vector3.Distance(attackTarget.transform.position, transform.position) < characterStats.SkillRange;\n        }\n        else\n        {\n            return false;\n        }\n    }\n    void Hit()\n    {\n        if (attackTarget != null && transform.IsFacingTarget(attackTarget.transform))\n        {\n            var targetStats = attackTarget.GetComponent<CharacterStats>();\n            characterStats.TakeDamage(characterStats, targetStats);\n        }\n    }\n\n    public void EndsNotify()\n    {\n        isChase = false;\n        isWalk = false;\n        attackTarget = null;\n        playerDie = true;\n        anim.SetBool(\"Victory\", true);\n    }\n}\n\n```\n\n### PlayController\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.AI;\n\npublic class PlayerController : MonoBehaviour\n{\n    public float lastAttackTime;\n    //ÊîªÂáªÁõÆÊ†áÂØπË±°\n    GameObject attackTarget;\n    CharacterStats characterStats;\n    NavMeshAgent agent;\n    Animator anim;\n    bool isDie;\n    float stopDistance;\n    private void Awake()\n    {\n        agent = GetComponent<NavMeshAgent>();\n        anim = GetComponent<Animator>();\n        characterStats = GetComponent<CharacterStats>();\n\n    }\n\n    private void Start()\n    {\n        //Ê∑ªÂä†‰∫ã‰ª∂\n        MouseManager.Instance.OnMouseClicked += MoveToTarget;\n        MouseManager.Instance.OnClickedEnemy += EventAttack;\n        \n\t\t//Ê≥®ÂÜåGamemanagerÁöÑÂπøÊí≠\n        GameManager.Instance.RigisterPlayer(characterStats);\n        stopDistance = agent.stoppingDistance;\n    }\n    private void Update()\n    {\n        isDie = characterStats.CurrentHealth == 0;\n        if (isDie)\n        {\n            GameManager.Instance.NotifyObservers();\n        }\n        AnimationChange();\n        if(lastAttackTime>0f)\n            lastAttackTime -= Time.deltaTime;\n    }\n    void MoveToTarget(Vector3 target)\n    {\n        if (isDie) return;\n        agent.isStopped = false;\n        agent.stoppingDistance = stopDistance;\n        StopAllCoroutines();\n        agent.destination = target;\n    }\n\n    void AnimationChange()\n    {\n        anim.SetFloat(\"Speed\", agent.velocity.sqrMagnitude);\n        anim.SetBool(\"Die\", isDie);\n    }\n\n    void EventAttack(GameObject target)\n    {\n        if (isDie) return;\n\n        if (target != null)\n        {\n            attackTarget = target;\n            StartCoroutine(\"MoveToAttackTarget\");\n        }\n    }\n    //Âä®Áîª‰∫ã‰ª∂\n    void Hit()\n    {\n        if (attackTarget.CompareTag(\"Attackable\"))\n        {\n            if (attackTarget.GetComponent<Rock>())\n            {\n                //Âú®Á©∫‰∏≠‰πüÂèØ‰ª•ÂáªÈ£û\n                attackTarget.GetComponent<Rock>().rockStates = Rock.RockStates.HitEnemy;\n                //Ëµã‰∫àÂàùÂßãÈÄüÂ∫¶ÔºåÈò≤Ê≠¢fixudateÊó∂‰øÆÊîπrockÁä∂ÊÄÅ\n                attackTarget.GetComponent<Rigidbody>().velocity = Vector3.one;\n                attackTarget.GetComponent<Rigidbody>().AddForce(transform.forward * 20f,ForceMode.Impulse);\n\n            }\n        }\n        else\n        {\n            var targetStats = attackTarget.GetComponent<CharacterStats>();\n            characterStats.TakeDamage(characterStats, targetStats);\n        }\n    }\n    IEnumerator MoveToAttackTarget()\n    {\n        agent.stoppingDistance = characterStats.AttackRange;\n        agent.isStopped = false;\n        while (Vector3.Distance(attackTarget.transform.position, transform.position) > characterStats.AttackRange)\n        {\n            agent.destination = attackTarget.transform.position;\n            yield return null;\n        }\n        agent.isStopped = true;\n        if (lastAttackTime < 0)\n        {\n            transform.LookAt(attackTarget.transform.position);\n            //Êö¥ÂáªÁéáÁöÑËÆ°ÁÆó\n            characterStats.isCritical = Random.value < characterStats.CriticalChance;\n            anim.SetBool(\"Critical\",characterStats.isCritical);\n            anim.SetTrigger(\"Attack\");\n            //ÈáçÁΩÆÂÜ∑Âç¥Êó∂Èó¥\n            lastAttackTime = characterStats.CoolDown;\n        }\n    }\n}\n\n```\n\n### CharacterStats\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing System;\npublic class CharacterStats : MonoBehaviour\n{\n\n    public event Action<int, int> UpdateHealthBarOnAttack;\n\n    public Character_SO templateData;\n    public Character_SO character;\n    public AttackSO attackSO;\n    [HideInInspector]\n    public bool isCritical;\n\n    private void Awake()\n    {\n        //Áî®Ê®°Êùø‰∏∫characterÁîüÊàê‰∏ÄÁªÑÊï∞ÊçÆÔºåÈò≤Ê≠¢Â§ö‰∏™enemyËÆøÈóÆÂêå‰∏ÄÁªÑÊï∞ÊçÆ\n        if (templateData != null)\n        {\n            character = Instantiate(templateData);\n        }\n    }\n    public int MaxHealth\n    {\n        get { if (character != null) { return character.maxHealth; } else { return 0; } }\n        set { character.maxHealth = value; }\n    }\n    public int CurrentHealth\n    {\n        get { if (character != null) { return character.currentHealth; } else { return 0; } }\n        set { character.currentHealth = value; }\n    }\n    public int BaseDefence\n    {\n        get { if (character != null) { return character.baseDefence; } else { return 0; } }\n        set { character.baseDefence = value; }\n    }\n    public int CurrentDefence\n    {\n        get { if (character != null) { return character.currentDefence; } else { return 0; } }\n        set { character.currentDefence = value; }\n    }\n    public float AttackRange { get {  return attackSO.attackRange; } }\n    public float SkillRange { get { return attackSO.skillRange; } }\n    public float CoolDown { get { return attackSO.coolDown; } }\n    public float MinDamage { get { return attackSO.minDamage; } }\n    public float MaxDamage { get { return attackSO.maxDamage; } }\n\n    public float CriticalMultiplier { get { return attackSO.criticalMultiplier; } }\n    public float CriticalChance { get { return attackSO.criticalChance; } }\n    \n    public void TakeDamage(CharacterStats attacker,CharacterStats defender)\n    {\n        int damage = Mathf.Max(attacker.CurrentDamage() - defender.CurrentDefence, 0);\n        defender.CurrentHealth = Mathf.Max(defender.CurrentHealth - damage, 0);\n        //defenderÂèó‰º§ÁöÑÂä®Áîª Êö¥ÂáªÊâç‰ºöÊúâ\n        if (attacker.isCritical)\n        {\n            defender.GetComponent<Animator>().SetTrigger(\"Hit\");\n        }\n\t\t//‰øÆÊîπÈò≤Âæ°ËÄÖË°ÄÊù°\n        defender.UpdateHealthBarOnAttack?.Invoke(defender.CurrentHealth, defender.MaxHealth);\n        if (defender.CurrentHealth <= 0)\n        {\n            //Êõ¥Êñ∞ÊîªÂáªËÄÖÁªèÈ™å\n            attacker.character.UpdateExp(defender.character.killPoint);\n        }\n    }\n\n    public void TakeDamage(int damage,CharacterStats defender)\n    {\n        int currentDamage = Mathf.Max(damage - defender.CurrentDefence, 0);\n        defender.CurrentHealth = Mathf.Max(defender.CurrentHealth - currentDamage, 0);\n        UpdateHealthBarOnAttack?.Invoke(defender.CurrentHealth, defender.MaxHealth);\n\n    }\n\n    int CurrentDamage()\n    {\n        float damage = UnityEngine.Random.Range(MinDamage, MaxDamage); ;\n        if (isCritical)\n        {\n            damage *= CriticalMultiplier;\n            Debug.Log(\"Êö¥ÂáªÔºö\" + damage);\n\n        }\n        return (int)damage;\n    }\n}\n\n```\n\n**Character_SO**\n\n```csharp\nusing System;\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n\n\n//filename‰∏∫ÂàõÂª∫ÁöÑÊñá‰ª∂ÁöÑÊñá‰ª∂ÂêçÔºåmenuName‰∏∫Êñá‰ª∂Â§πÁõÆÂΩïÂ±ÇÁ∫ßÂêçÂ≠ó\n[CreateAssetMenu(fileName = \"New Data\", menuName = \"Character Stats/Data\")]\n\npublic class Character_SO : ScriptableObject\n{\n    [Header(\"Stats Info\")]\n    public int maxHealth;\n    public int currentHealth;\n    public int baseDefence;\n    public int currentDefence;\n\n    [Header(\"Kill\")]\n    public int killPoint;\n\n    [Header(\"Level\")]\n    public int currentLevel;\n    public int maxLevel;\n    public int baseExp;\n    public int currentExp;\n    public float levelBuff;\n\n    public void UpdateExp(int point)\n    {\n        currentExp += point;\n        if (currentExp >= baseExp)\n        {\n            currentExp -= baseExp;\n            LevelUP();\n        }\n    }\n\n    private void LevelUP()\n    {\n        currentLevel = Mathf.Clamp(currentLevel + 1, 0, maxLevel);\n        baseExp += (int)(baseExp * LevelMultiplier);\n        maxHealth = (int)(maxHealth * LevelMultiplier);\n        currentHealth = maxHealth;\n    }\n    public float LevelMultiplier\n    {\n        get {return 1+(currentLevel-1)*levelBuff ; }\n    }\n}\n\n```\n\n**Attack_SO**\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n\n[CreateAssetMenu(fileName =\"New Attack\",menuName =\"Attack/Attack Data\")]\npublic class AttackSO : ScriptableObject\n{\n    [Header(\"Attack Info\")]\n    public float attackRange;\n    public float skillRange;\n    public float coolDown;\n    public int minDamage;\n    public int maxDamage;\n    public float criticalMultiplier;\n    public float criticalChance;\n    \n}\n\n```\n\n### Ê≥õÂûãÂçï‰æãÊ®°ÂºèSingleton\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n\npublic class SingleTon<T> : MonoBehaviour where T:SingleTon<T>\n{\n    private static T instance;\n\n    public static T Instance\n    {\n        get { return instance; }\n    }\n\n    protected virtual void Awake()\n    {\n        if (instance != null)\n        {\n            Destroy(gameObject);\n        }\n        else\n        {\n            instance = (T)this;\n        }\n    }\n    public static bool isInitialized\n    {\n         get { return instance != null; }\n    }\n}\n\n```\n\n### Êé•Âè£Observer Pattern\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n\npublic interface IEndGameObserver\n{\n    //Âè™ÂÆö‰πâÔºå‰∏çÂÆûÁé∞ÁïôÁªô‰ΩøÁî®ÁöÑÂÆûÁé∞Ëøô‰∏™ÊñπÊ≥ï\n    void EndsNotify();\n}\n\n```\n\n### GameManger\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n\npublic class GameManager : SingleTon<GameManager>\n{\n    public CharacterStats playerStats;\n\t\n    //Êé•Âè£Á±ªÂûã\n    List<IEndGameObserver> endGameObeverses = new List<IEndGameObserver>();\n    \n    protected override void Awake()\n    {\n        base.Awake();\n    }\n    public void RigisterPlayer(CharacterStats characterStats)\n    {\n        playerStats = characterStats;\n    }\n\n    public void AddObserver(IEndGameObserver observer)\n    {\n        endGameObeverses.Add(observer);\n    }\n    public void RemoveObserver(IEndGameObserver observer)\n    {\n        endGameObeverses.Remove(observer);\n    }\n\n    public void NotifyObservers()\n    {\n        //ÈÅçÂéÜÊ∑ªÂä†ËøõÊù•ÁöÑÂØπË±°\n        //Êå®‰∏™Ë∞ÉÁî®EndsNotifyÔºàÔºâÊñπÊ≥ï\n        foreach (var observer in endGameObeverses)\n        {\n            observer.EndsNotify();\n        }\n    }\n}\n\n```\n\n### ËÆæÁΩÆÂÖΩ‰∫∫Grunt\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.AI;\n\n//ÁªßÊâø‰∫éEnemyController\npublic class Grunt : EnemyController\n{\n    [Header(\"GRUNTÊé®Âäõ\")]\n    public float kickForce = 15f;\n    //Âä®Áîª‰∫ã‰ª∂\n    void KickOff()\n    {\n        if (attackTarget != null)\n        {\n            transform.LookAt(attackTarget.transform);\n            Vector3 direction = attackTarget.transform.position - transform.position;\n            direction.Normalize();\n            //ÊâìÊñ≠playerË°åÂä®ÔºåËøõË°åÂáªÈÄÄ\n            attackTarget.GetComponent<NavMeshAgent>().isStopped = true;\n            attackTarget.GetComponent<NavMeshAgent>().velocity = direction * kickForce;\n            attackTarget.GetComponent<Animator>().SetTrigger(\"Dizzy\");\n        }\n    }\n}\n\n```\n\n### ÊãìÂ±ïÊñπÊ≥ïExtension Method\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n\n//ÊãìÂ±ïÊñπÊ≥ï \npublic static class ExtensionMethod \n{\n    private const float dotThreshold = 0.5f;\n\n    //ÊãìÂ±ïÁöÑÊòØthisÂêéÈù¢ÁöÑÊñπÊ≥ï,ÂêéÈù¢ÁöÑ‰∏∫ÊñπÊ≥ïÊâÄÈúÄË¶ÅÁöÑÂáΩÊï∞\n    //‰ΩøÁî®ÊñπÊ≥ï :transform.IsFacingTarget(target)\n    public static bool IsFacingTarget(this Transform transform,Transform target)\n    {\n        //ÂêëÈáèOA-OB=BA;O‰∏∫ÂéüÁÇπÔºõ\n        Vector3 vectorToTarget = target.position - transform.position;\n        vectorToTarget.Normalize();\n        //vector3.dot ‰∏∫ÁúãÂêëÁöÑÊñπÂêë‰∏évectortoTargetÁöÑÊñπÂêëÁöÑÂ§πËßíÔºåÊ≠£ÂØπÁùÄ‰∏∫1ÔºåËÉåÂØπÁùÄ‰∏∫-1ÔºåÂ∑¶Âè≥‰∏∫0Ôºõ\n        float dot = Vector3.Dot(transform.forward, vectorToTarget);\n        return dot >= dotThreshold;\n    }\n\n}\n```\n\n### Áü≥Â§¥‰∫∫Golem\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.AI;\n\npublic class Golem : EnemyController\n{\n    [Header(\"GRUNTÊé®Âäõ\")]\n    public float kickForce = 25f;\n\n    public GameObject rockPerfab;\n    public Transform handTransform;\n    //animation event\n    void KickOff()\n    {\n        if (attackTarget != null && transform.IsFacingTarget(attackTarget.transform))\n        {\n            var targetStats = attackTarget.GetComponent<CharacterStats>();\n            Vector3 direction = attackTarget.transform.position - transform.position;\n            direction.Normalize();\n            transform.LookAt(attackTarget.transform);\n            attackTarget.GetComponent<NavMeshAgent>().isStopped = true;\n            attackTarget.GetComponent<NavMeshAgent>().velocity = direction * kickForce;\n            attackTarget.GetComponent<Animator>().SetTrigger(\"Dizzy\");\n            characterStats.TakeDamage(characterStats, targetStats);\n        }\n    }\n    //animation event\n    void ThrowRock()\n    {\n        if (attackTarget != null)\n        {\n            GameObject rock = Instantiate(rockPerfab, handTransform.position, Quaternion.identity);\n            rock.GetComponent<Rock>().target = attackTarget;\n        }\n    }\n}\n\n```\n\n### ÊâîÁü≥Â§¥\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.AI;\nusing UnityEngine.Animations;\n\npublic class Rock : MonoBehaviour\n{\n    public enum RockStates { HitPlayer,HitEnemy,HitNothing}\n    public RockStates rockStates;\n\n    public GameObject target;\n    public GameObject rockBreak;\n    public float force;\n    public int damage;\n    Vector3 direction;\n    Rigidbody rb;\n    void Start()\n    {\n        rb = GetComponent<Rigidbody>();\n        rb.velocity = Vector3.one;\n        rockStates = RockStates.HitPlayer;\n        FlyToTarget();\n    }\n\n    private void FixedUpdate()\n    {\n        if (rb.velocity.sqrMagnitude < 0.5f)\n        {\n            rockStates = RockStates.HitNothing;\n        }\n    }\n   \n    void FlyToTarget()\n    {\n        if (target == null)\n            target = FindObjectOfType<PlayerController>().gameObject;\n        direction = (target.transform.position - transform.position+Vector3.up ).normalized;\n        rb.AddForce(direction * force, ForceMode.Impulse);\n    }\n\n    private void OnCollisionEnter(Collision collision)\n    {\n        switch (rockStates)\n        {\n            case RockStates.HitPlayer:\n                if (collision.collider.CompareTag(\"Player\"))\n                {\n                    collision.gameObject.GetComponent<NavMeshAgent>().isStopped = true;\n                    collision.gameObject.GetComponent<NavMeshAgent>().velocity = direction * force;\n                    collision.gameObject.GetComponent<Animator>().SetTrigger(\"Dizzy\");\n\n                    rockStates = RockStates.HitNothing;\n                    collision.gameObject.GetComponent<CharacterStats>().TakeDamage(damage, collision.gameObject.GetComponent<CharacterStats>());\n                }\n                break;\n            case RockStates.HitEnemy:\n                //Â¶ÇÊûúÊúâËøô‰∏™ÁªÑ‰ª∂ËøîÂõûtrueÔºõ\n                if (collision.gameObject.GetComponent<Golem>())\n                {\n                    collision.gameObject.GetComponent<CharacterStats>().TakeDamage(damage, collision.gameObject.GetComponent<CharacterStats>());\n                    \n                    //ÊîªÂáªÁü≥Â§¥‰∫∫‰πãÂêéÔºåÁü≥Â§¥Á¢éË£ÇÁîüÊàêÁ≤íÂ≠êÁâπÊïà\n                    Instantiate(rockBreak, transform.position, Quaternion.identity);\n                    Destroy(gameObject);\n                }\n                break;\n            case RockStates.HitNothing:\n                break;\n            default:\n                break;\n        }\n\n\n    }\n}\n\n```\n\n**Á≤íÂ≠êÁâπÊïà**\n\nHierarchy > Effects > Particle System\n\n### Ë°ÄÊù°ÊòæÁ§∫ HealthBar\n\n**ÊåÇËΩΩÂú®enemyË∫´‰∏ä**\n\n```csharp\nusing System;\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.UI;\npublic class HealthBar : MonoBehaviour\n{\n    public GameObject healthBarUiPerfab;\n\t//Ë°ÄÊù°ÁöÑ‰ΩçÁΩÆÔºåenemyËÆæÁΩÆ‰∏Ä‰∏™Á©∫ÂØπË±°ÔºåË∞ÉÊï¥‰ΩçÁΩÆ‰∏∫Â§¥ÈÉ®‰∏äÊñπ\n    public Transform barPoint;\n    //ÊòØÂê¶‰∏ÄÁõ¥ÊòæÁ§∫ ÊòæÁ§∫ÁöÑÊó∂Èïø\n    public bool alwaysVisible;\n    public float visibleTime;\n    float timeLeft;\n\n    Image healthSlider;\n    Transform UIBar;\n    Transform cam;\n    CharacterStats currentStats;\n\n    private void Awake()\n    {\n        //Ëé∑ÂèñÁªÑ‰ª∂\n        currentStats = GetComponent<CharacterStats>();\n        //Ê∑ªÂä†‰∫ãÂä°\n        currentStats.UpdateHealthBarOnAttack += UpdateHealthBar;\n    }\n    private void OnEnable()\n    {\n        cam = Camera.main.transform;\n        foreach (Canvas canvas in FindObjectsOfType<Canvas>())\n        {\n            if (canvas.renderMode == RenderMode.WorldSpace)\n            {\n                UIBar = Instantiate(healthBarUiPerfab, canvas.transform).transform;\n                healthSlider = UIBar.GetChild(0).GetComponent<Image>();\n                UIBar.gameObject.SetActive(alwaysVisible);\n            }\n        }\n\n    }\n\n    private void UpdateHealthBar(int currentHealth, int Maxhealth)\n    {\n        if (currentHealth <= 0)\n            Destroy(UIBar.gameObject);\n\n        UIBar.gameObject.SetActive(true);\n        //ÊîªÂáªÊó∂ÈáçÁΩÆÊòæÁ§∫Ââ©‰ΩôÊó∂Èó¥\n        timeLeft = visibleTime;\n        float sliderPercent = (float)currentHealth / Maxhealth;\n        //image TypeËÆæÁΩÆ‰∏∫FilledÔºåfillmethodËÆæÁΩÆ‰∏∫Horizontal\n        healthSlider.fillAmount = sliderPercent;\n\n    }\n    private void LateUpdate()\n    {\n        if (UIBar != null)\n        {\n            //‰ΩçÁΩÆ\n            UIBar.position = barPoint.position;\n            //uiÁöÑÊñπÂêë‰∏éÊëÑÂÉèÊú∫ÁöÑÊñπÂêëÁõ∏Âèç\n            UIBar.forward = -cam.forward;\n\n            if (timeLeft <= 0f&&!alwaysVisible)\n            {\n                UIBar.gameObject.SetActive(false);\n            }\n            else\n            {\n                timeLeft -= Time.deltaTime;\n\n            }\n        }\n\n\n    }\n}\n\n```\n\n### PlayerUI\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.UI;\n\npublic class PlayHealthBar : MonoBehaviour\n{\n    Text level;\n    Image healthSlider;\n    Image expSlider;\n\n    private void Awake()\n    {\n        level = transform.GetChild(2).GetComponent<Text>();\n        healthSlider = transform.GetChild(0).GetChild(0).GetComponent<Image>();\n        expSlider = transform.GetChild(1).GetChild(0).GetComponent<Image>();\n    }\n\n    private void LateUpdate()\n    {\n        level.text = \"Level  \" + GameManager.Instance.playerStats.character.currentLevel.ToString(\"00\");\n\n        UpdateHealth();\n\n        UpdateExp();\n    }\n\n    void UpdateHealth()\n    {\n        float sliderPercent = (float)GameManager.Instance.playerStats.CurrentHealth / GameManager.Instance.playerStats.MaxHealth;\n        healthSlider.fillAmount = sliderPercent;\n    }\n    void UpdateExp()\n    {\n        float sliderPercent = (float)GameManager.Instance.playerStats.character.currentExp / GameManager.Instance.playerStats.character.baseExp;\n        expSlider.fillAmount = sliderPercent;\n    }\n}\n\n```\n\n>ËÆæÁΩÆuiÊó∂ÔºåÈ¶ñÂÖàÈúÄË¶ÅË∞ÉÊï¥CanvasÁöÑScaler\n>\n>UI Scale ModeËÆæÁΩÆ‰∏∫Scale With Screen Size,MatchËÆæÁΩÆ‰∏∫0.5ÔºåÂêåÊó∂ÂÖºÈ°æÈ´òÂ∫¶ÂíåÂÆΩÂ∫¶\n\n>\n>\n>CanvasÊúâ‰∏™Canvas GroupÁªÑ‰ª∂ÔºåÂèØ‰ª•ËÆæÁΩÆÂèñÊ∂àÈòªÊå°Â∞ÑÁ∫ø\n>\n>‰πüÂèØ‰ª•ÈÄöËøáË∞ÉÊï¥AlphaÁöÑÂÄºÂéªÂÅöËΩ¨Âú∫\n\n### ‰º†ÈÄÅÈó®\n\n‰ΩøÁî®lit shader\n\nshaderÂà∂‰ΩúÊàêÊùêË¥®ÔºåÂàõÂª∫‰∏Ä‰∏™3D > planeÔºåÊãñÊãΩËµã‰∫àËøô‰∏™ÊùêË¥®ÔºåÂπ∂ÁîüÊàê‰∏Ä‰∏™‰º†ÈÄÅÁÇπ‰ΩçÁΩÆ\n\nÊûö‰∏æÁ±ª\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n\npublic class TransitionDestination : MonoBehaviour\n{\n    public enum DestinationTag { Enter,A,B,C}\n\n    public DestinationTag destinationTag;\n}\n\n```\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n\npublic class TransiationPoint : MonoBehaviour\n{\n    public enum TransitionType { SameScence,DifferentScence}\n\n    [Header(\"Transition Info\")]\n    public string scenceName;\n    public TransitionType transitionType;\n    //Êûö‰∏æÁªàÁÇπÁºñÂè∑\n    public TransitionDestination.DestinationTag destinationTag;\n\n    bool canTrans;\n\n    private void Update()\n    {\n        if (Input.GetKeyDown(KeyCode.E) && canTrans)\n        {\n            ScenceController.Instance.TransitionToDestination(this);\n        }\n    }\n    private void OnTriggerStay(Collider other)\n    {\n        if (other.CompareTag(\"Player\"))\n        {\n            canTrans = true;\n        }\n    }\n    private void OnTriggerExit(Collider other)\n    {\n        if (other.CompareTag(\"Player\"))\n        {\n            canTrans = false;\n        }\n    }\n}\n\n```\n\nÂÆûÁé∞Âú∫ÊôØËΩ¨Êç¢\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.SceneManagement;\n\nusing UnityEngine.AI;\n\npublic class ScenceController : SingleTon<ScenceController>\n{\n    GameObject player;\n    NavMeshAgent playerAgent;\n    public void TransitionToDestination(TransiationPoint transiationPoint)\n    {\n        switch (transiationPoint.transitionType)\n        {\n            case TransiationPoint.TransitionType.SameScence:\n                StartCoroutine(Transition(SceneManager.GetActiveScene().name, transiationPoint.destinationTag));\n                break;\n            case TransiationPoint.TransitionType.DifferentScence:\n                break;\n            default:\n                break;\n        }\n    }\n\n    IEnumerator Transition(string scenceName,TransitionDestination.DestinationTag destinationTag)\n    {\n        player = GameManager.Instance.playerStats.gameObject;\n\n        playerAgent = player.GetComponent<NavMeshAgent>();\n        playerAgent.isStopped = true;\n\n       //ËÆæÁΩÆ‰ΩçÁΩÆ‰∏éÊñπÂêëtransform.SetPositionAndRotationÔºàÔºâ\n        player.transform.SetPositionAndRotation(GetDestination(destinationTag).transform.position, GetDestination(destinationTag).transform.rotation);\n        yield return null;\n    }\n\t\n    //ÈÅçÂéÜËé∑ÂèñÁªàÁÇπÁöÑ‰ø°ÊÅØ\n    TransitionDestination GetDestination(TransitionDestination.DestinationTag destinationTag)\n    {\n        var entrances = FindObjectsOfType<TransitionDestination>();\n        foreach (var item in entrances)\n        {\n            if (item.destinationTag == destinationTag)\n            {\n                return item;\n            }\n        }\n        return null;\n    }\n}\n\n```\n\n### ‰øùÂ≠òÊï∞ÊçÆ\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n\npublic class SaveManager : SingleTon<SaveManager>\n{\n\n\n    private void Update()\n    {\n        if (Input.GetKeyDown(KeyCode.K))\n        {\n            Save(GameManager.Instance.playerStats.character, GameManager.Instance.playerStats.name);\n            Debug.Log(GameManager.Instance.playerStats.name);\n        }\n        if (Input.GetKeyDown(KeyCode.L))\n        {\n            Load(GameManager.Instance.playerStats.character, GameManager.Instance.playerStats.name);\n            \n        }\n    }\n\n    public void Save(object data,string key)\n    {\n        //Êï∞ÊçÆËΩ¨Êàêjson\n        var jsonData = JsonUtility.ToJson(data, true);\n        //jsonËΩ¨Êàê‰∫åËøõÂà∂\n        PlayerPrefs.SetString(key, jsonData);\n        PlayerPrefs.Save();\n    }\n    public void Load(object data, string key)\n    {\n        if (PlayerPrefs.HasKey(key))\n        {\n            //PlayerPrefs.GetString(key)Â∞Ü‰∫åËøõÂà∂ËΩ¨‰∏∫jsonÔºåË¶ÜÁõñÂà∞data‰∏ä\n            JsonUtility.FromJsonOverwrite(PlayerPrefs.GetString(key), data);\n            Debug.Log(\"111\");\n\n        }\n    }\n}\n\n```\n\n","slug":"002_unityRpg","published":1,"updated":"2022-06-21T14:26:21.703Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4o9jzih0007isv90n9sgnuq","content":"<h1 id=\"3DURPÊ∏∏ÊàèÂà∂‰ΩúÁ¨îËÆ∞\"><a href=\"#3DURPÊ∏∏ÊàèÂà∂‰ΩúÁ¨îËÆ∞\" class=\"headerlink\" title=\"3DURPÊ∏∏ÊàèÂà∂‰ΩúÁ¨îËÆ∞\"></a>3DURPÊ∏∏ÊàèÂà∂‰ΩúÁ¨îËÆ∞</h1><blockquote>\n<p>ÊÑüË∞¢È∫¶Êâ£ËÄÅÂ∏àÔºÅÔºÅÔºÅ</p>\n<p><a href=\"https://space.bilibili.com/370283072\">bÁ´ôÂú∞ÂùÄ</a></p>\n<p>Ëøô‰∫õÊòØÊàëË∑üÁùÄÂ≠¶‰π†Êï≤Âæó‰ª£Á†ÅÔºåÊúâ‰∫õÂèØËÉΩ‰∏ç‰∏ÄÊ†∑ÔºåÂÆåÂÖ®Â§çÂà∂ËÇØÂÆö‰ºöÊúâÈóÆÈ¢òÔºå‰∏ªË¶ÅÁî®Êù•ÁªôÂ≠¶‰π†ÁöÑÂêåÂ≠¶Á∫†Èîô</p>\n</blockquote>\n<h3 id=\"Ê∏∏ÊàèÁöÑÂàõÂª∫‰∏éÂú∞ÂõæÁöÑÈì∫ËÆæ\"><a href=\"#Ê∏∏ÊàèÁöÑÂàõÂª∫‰∏éÂú∞ÂõæÁöÑÈì∫ËÆæ\" class=\"headerlink\" title=\"Ê∏∏ÊàèÁöÑÂàõÂª∫‰∏éÂú∞ÂõæÁöÑÈì∫ËÆæ\"></a>Ê∏∏ÊàèÁöÑÂàõÂª∫‰∏éÂú∞ÂõæÁöÑÈì∫ËÆæ</h3><p>‰ΩøÁî®Âà∞ÁöÑÊèí‰ª∂Êúâ<strong>Pro Grids</strong>,<strong>ProBuilder</strong>,<strong>PloyBrush</strong></p>\n<ol>\n<li><p>‰ΩøÁî®Âà∞ÁöÑÂú∞ÂõæÊ®°Êùø‰∏∫Ê≠£Â∏∏Ê®°ÊùøÔºåÁÑ∂ÂêéÂú®ProjectÊñá‰ª∂Â§π‰∏≠Êñ∞Âª∫URP„ÄÇ</p>\n</li>\n<li><p>Âè≥‰∏äËßíEdit &gt; Project Setting</p>\n<ol>\n<li>Â∞ÜGraphicsÁöÑScirptable Render Pipeline Settings‰øÆÊîπ‰∏∫ÂàõÂª∫ÁöÑ<strong>UniversalRenderPiepelineAsset</strong></li>\n<li>QualityÁöÑRendering‰øÆÊîπ‰∏∫ÂàõÂª∫ÁöÑ<strong>UniversalRenderPiepelineAsset</strong></li>\n</ol>\n</li>\n<li><p>‰ΩøÁî®Á¥†ÊùêÊó∂ÔºåÂçáÁ∫ßÁ¥†ÊùêÁöÑURP„ÄÇEdit &gt; Render Pipeline &gt; Universal Render Pipeline &gt; Upgrade Project Materials To UniversalRP Materials</p>\n</li>\n<li><p>ÂÖâÁÖßÁöÑËÆæÁΩÆ Windows &gt; Rendering &gt;Lighting„ÄÇÂú®SceneÁ™óÂè£ÁîüÊàê‰∏Ä‰∏™New Lighting Settings„ÄÇLighting Mode‰∏ÄËà¨‰∏∫Baked IndirectÔºàÁÆÄ‰ªãÁÉòÁÑôÔºâÔºåLightmapper‰∏ÄËà¨ÈÄâÊã©‰∏∫GPUÔºåÂèñÊ∂àÂãæÈÄâAuto GenerateÔºåÁÑ∂ÂêéËøõË°åGenerate Lighting„ÄÇ</p>\n<blockquote>\n<p>Â¶ÇÊûúÂèëÁîüÂú∫ÊôØÈ¢úËâ≤ÂèëÁîüÊîπÂèòÔºå‰∏çÊòØÂéüÊú¨ÁöÑÈ¢úËâ≤ÔºåÂèØ‰ª•Âú®Lighting &gt; EnvironmentÈáåÈÄâÊã© Environment Lighting &gt; Source ËÆæÁΩÆ‰∏∫Color„ÄÇ</p>\n</blockquote>\n</li>\n<li><p>Ë∞ÉÊï¥ÊëÑÂÉèÊú∫ÁöÑÊäÄÂ∑ßÔºöCtrl + Shift + FÔºåË∞ÉÊï¥Áâ©‰ΩìÂùêÊ†áËΩ¥Âê∏ÈôÑ VÈîÆ„ÄÇ</p>\n</li>\n<li><p>ÂØºÂÖ•Êèí‰ª∂<strong>PloyBrush</strong>Âπ∂‰∏îÂú®ÂØºÂÖ•Êó∂Â∞ÜSample‰∏≠ÁöÑURPÊñá‰ª∂‰∏ÄÂπ∂ÂØºÂÖ•„ÄÇ </p>\n<blockquote>\n<p>‰ΩøÁî®PloybrushÁöÑÁ¨îÂà∑Âà∑È¢úËâ≤ÁöÑÊó∂ÂÄôÔºåÂèëÁé∞Âà∑‰∏ç‰∏äÈ¢úËâ≤ÁöÑÂéüÂõ†ÊòØÔºåÁâ©‰ΩìÁöÑÊùêË¥®Âπ∂Ê≤°Êúâ‰ΩøÁî®PloybrushÁöÑshaderÂàõÂª∫ÁöÑÊùêË¥®ÔºåÁî®shaderÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÊùêË¥®Âπ∂‰øÆÊîπÁâ©‰ΩìÁöÑÊùêË¥®ÔºàÊãñÊãΩ‰πüÂèØ‰ª•ÔºâÔºåÁÑ∂ÂêéËøõË°åÈ¢úËâ≤ÁöÑÊ∂ÇÊäπ</p>\n</blockquote>\n</li>\n<li><p>Âπ≥Âè∞ÁöÑÂ§ßÂ∞èÂíåÂ∞ëÊï∞ÁöÑÈ°∂ÁÇπÂΩ±Âìç‰∫ÜÂú∞ÂõæÁöÑÂàõ‰ΩúÔºåÊâÄ‰ª•ÈúÄË¶Å<strong>Probuilder</strong>Êù•ÁîüÊàêÊõ¥Á≤æËá¥ÁöÑÂú∞ÂõæÂπ≥Âè∞</p>\n<blockquote>\n<p>ÂêåÊó∂Êåâ‰Ωè<strong>Ctrl</strong>Âíå<strong>Alt</strong>ÈîÆÁÇπÂáªIconÁöÑÈΩøËΩÆÔºå‰ºöË∞ÉÂá∫ÂçïÁã¨ÁöÑËÆæÁΩÆ</p>\n<p>‰ΩøÁî®<strong>Center Pivot</strong>ÂèØ‰ª•Ë∞ÉÊï¥‰∏≠ÂøÉÁÇπ</p>\n<p>ÂÖ≥‰∫éÂ¶Ç‰Ωï‰ΩøÁî®preview packageÔºöEdit &gt; Project Setting &gt; Package manager ,<strong>Enable Preview Packages</strong></p>\n</blockquote>\n</li>\n</ol>\n<h3 id=\"Âú∞ÂõæÁöÑÁÉòBake\"><a href=\"#Âú∞ÂõæÁöÑÁÉòBake\" class=\"headerlink\" title=\"Âú∞ÂõæÁöÑÁÉòBake\"></a>Âú∞ÂõæÁöÑÁÉòBake</h3><p>Á™óÂè£Âú® Window &gt; AI &gt; Navigation</p>\n<ol>\n<li><p>ËÆæÁΩÆÂú∞Èù¢‰∏∫Navigation staticÔºåÂú®Navigation &gt; ObjectÈáåÁöÑNavigation Area ËÆæÁΩÆ‰∏∫Walkable„ÄÇ</p>\n<blockquote>\n<ul>\n<li>ÈÄâ‰∏≠Áâ©‰Ωì‰πãÂêéÔºåÂú®InspectorÁ™óÂè£ÈáåÔºåÁ¨¨‰∏ÄË°åÊúâÈÄâÊã©ÊòØÂê¶‰∏∫StaticÔºå‰∏ãÊãâÂèØÈÄâÊã©Á±ªÂûã</li>\n<li>ÈÄâ‰∏≠Áâ©‰Ωì‰πãÂêéÔºåÂú®Navigation &gt; ObjectÈáåËÆæÁΩÆNavigation static‰∏∫<strong>true</strong></li>\n</ul>\n</blockquote>\n</li>\n<li><p>ÈÄâ‰∏≠‰∏çÂèØÁßªÂä®ÁöÑÁâ©‰ΩìÔºåÊØîÂ¶ÇÊ†ëÊú®Áü≥Â§¥Á≠âÔºåÊâπÈáèËÆæÁΩÆ‰∏∫Navigation staticÔºåÁâπÊÆäÁöÑÈô§Â§ñ„ÄÇ</p>\n</li>\n<li><p>‰∏∫ËßíËâ≤Ê∑ªÂä†Navigation agent ÁªÑ‰ª∂ÔºåËÆæÁΩÆ‰∫∫Áâ©ÁöÑÂúÜÊü±‰ΩìÂ§ßÂ∞è‰ª•ÂèäÂÆΩÂ∫¶„ÄÇ</p>\n</li>\n<li><p>Âú®Navigation &gt; Bake ÈáåÂêåÊ†∑ËÆæÁΩÆ‰∏∫‰∫∫Áâ©ÁöÑÂúÜÊü±‰ΩìÂ§ßÂ∞è‰ª•ÂèäÂÆΩÂ∫¶Á≠âÂÖ∂‰ªñÊï∞ÊçÆÔºåÁÑ∂ÂêéÁÇπÂáªbakeÔºåÂú®Âú∞Âõæ‰∏äÊòæÁ§∫‰∏∫ËìùËâ≤ÁöÑ‰∏∫ÂèØwalkÂå∫Âüü„ÄÇ</p>\n</li>\n<li><p>Â¶ÇÊûúÊúâÁâ©‰ΩìÂèØ‰ª•ÁßªÂä®ÔºåÂπ∂‰∏î‰∏çÊÉ≥ÂèëÁîüÁ©øÊ®°ÊïàÊûúÔºåÂèØÈÄâÊã©Ê∑ªÂä†ÁªÑ‰ª∂Nav Mesh Obstacle,ËÆæÁΩÆCarve‰∏∫<strong>True</strong>ÔºåÂ∞±‰ºöÂú®Âú∞Èù¢ÂêåÊó∂ÂàáÂâ≤Âá∫‰∏ÄÈÉ®ÂàÜÔºå‰∫∫Áâ©‰∏çÂèØwalkÁöÑÂå∫Âüü„ÄÇ</p>\n</li>\n</ol>\n<h3 id=\"Èº†Ê†áÊéßÂà∂ÁßªÂä®‰ª•ÂèäË¥¥Âõæ\"><a href=\"#Èº†Ê†áÊéßÂà∂ÁßªÂä®‰ª•ÂèäË¥¥Âõæ\" class=\"headerlink\" title=\"Èº†Ê†áÊéßÂà∂ÁßªÂä®‰ª•ÂèäË¥¥Âõæ\"></a>Èº†Ê†áÊéßÂà∂ÁßªÂä®‰ª•ÂèäË¥¥Âõæ</h3><p><strong>ÊâÄÊúâÁÆ°ÁêÜÁ±ªÈÉΩ‰∏çË¶ÅÂøò‰∫ÜÂú®Ê∏∏ÊàèÈáåÂàõÂª∫‰∏Ä‰∏™Á©∫ÂØπË±°ÔºåÊ∑ªÂä†‰∏äËÑöÊú¨</strong></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">MouseManager</span> : <span class=\"title\">SingleTon</span>&lt;<span class=\"title\">MouseManager</span>&gt;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">//‰∫ãÂä°ÂßîÊâò</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">event</span> Action&lt;Vector3&gt; OnMouseClicked;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">event</span> Action&lt;GameObject&gt; OnClickedEnemy;</span><br><span class=\"line\"></span><br><span class=\"line\">    RaycastHit hitInfo;</span><br><span class=\"line\">\t<span class=\"comment\">//Èº†Ê†áË¥¥Âõæ</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Texture2D point, doorway, attack, target, arrow;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">override</span> <span class=\"keyword\">void</span> <span class=\"title\">Awake</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">base</span>.Awake();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Update</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        SetCursorTexture();</span><br><span class=\"line\">        MouseControl();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">SetCursorTexture</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        Ray ray = Camera.main.ScreenPointToRay(Input.mousePosition);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(Physics.Raycast(ray,<span class=\"keyword\">out</span> hitInfo))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"comment\">//ÂàáÊç¢Èº†Ê†áË¥¥Âõæ</span></span><br><span class=\"line\">            <span class=\"keyword\">switch</span> (hitInfo.collider.gameObject.tag)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"string\">&quot;Ground&quot;</span>:</span><br><span class=\"line\">                    Cursor.SetCursor(target, <span class=\"keyword\">new</span> Vector2(<span class=\"number\">16</span>, <span class=\"number\">16</span>),CursorMode.Auto);</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"string\">&quot;Enemy&quot;</span>:</span><br><span class=\"line\">                    Cursor.SetCursor(attack, <span class=\"keyword\">new</span> Vector2(<span class=\"number\">2</span>, <span class=\"number\">2</span>), CursorMode.Auto);</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"string\">&quot;Attackable&quot;</span>:</span><br><span class=\"line\">                    Cursor.SetCursor(attack, <span class=\"keyword\">new</span> Vector2(<span class=\"number\">2</span>, <span class=\"number\">2</span>), CursorMode.Auto);</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"string\">&quot;Portal&quot;</span>:</span><br><span class=\"line\">                    Cursor.SetCursor(doorway, <span class=\"keyword\">new</span> Vector2(<span class=\"number\">2</span>, <span class=\"number\">2</span>), CursorMode.Auto);</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">MouseControl</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (Input.GetMouseButtonDown(<span class=\"number\">0</span>) &amp;&amp; hitInfo.collider != <span class=\"literal\">null</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (hitInfo.collider.gameObject.CompareTag(<span class=\"string\">&quot;Ground&quot;</span>))</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                OnMouseClicked?.Invoke(hitInfo.point);</span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (hitInfo.collider.gameObject.CompareTag(<span class=\"string\">&quot;Enemy&quot;</span>))</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                OnClickedEnemy?.Invoke(hitInfo.collider.gameObject);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (hitInfo.collider.gameObject.CompareTag(<span class=\"string\">&quot;Attackable&quot;</span>))</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                OnClickedEnemy?.Invoke(hitInfo.collider.gameObject);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (hitInfo.collider.gameObject.CompareTag(<span class=\"string\">&quot;Portal&quot;</span>))</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                OnMouseClicked?.Invoke(hitInfo.point);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><strong>ÂÖ≥‰∫éÈº†Ê†áÁöÑË¥¥Âõæ</strong></p>\n<p>Èº†Ê†áË¥¥Âõæ‰∏∫<strong>Texture</strong>,‰∏ÄËà¨‰∏∫Êó†ËÉåÊôØÁöÑÂõæÁâáÔºåÂä†ËΩΩÂà∞Unity‰πãÂêéÔºåÈÄâ‰∏≠Ë¥¥ÂõæÂπ∂ÊääTexture type‰øÆÊîπ‰∏∫<strong>Cursor</strong>„ÄÇ</p>\n<h3 id=\"Cineramachine\"><a href=\"#Cineramachine\" class=\"headerlink\" title=\"Cineramachine\"></a>Cineramachine</h3><p>ÈÄâ‰∏≠Main cameraÔºåGameobject &gt; Align View to Selected,Â∞Ü‰∏ªÁõ∏Êú∫ÈîÅÂÆöËßÜËßí</p>\n<p>Áä∂ÊÄÅÊ†èCineramachineÈÄâÊã©‰∏Ä‰∏™ÂêàÈÄÇÁöÑÊëÑÂÉèÊú∫ ÔºåÂΩìÂâçÈÄâÊã©ÁöÑ‰∏∫CinemachineVirtualCanmera,ÂèñÊ∂à‰∏ªÊëÑÂÉèÊú∫ÁöÑAudio ListenerÔºåBodyÈÄâÊã©Framing Transposer,AimÈÄâÊã©Nothing</p>\n<p>Follow ÈÄâÊã©‰∏∫‰∫∫Áâ©ÂØπË±° ÔºåÂ¶ÇÊûú‰∫∫Áâ©ÂùêÊ†áËΩ¥Âú®‰∏ãÊñπÔºåÂèØ‰ª•Âú®‰∫∫Áâ©ÂØπË±°ÈáåÊñ∞Âª∫‰∏Ä‰∏™Á©∫Áâ©‰ΩìÔºåÁÑ∂ÂêéÂ∞ÜÂùêÊ†áËΩ¥ÁßªÂä®Âà∞‰∫∫Áâ©‰∏≠ÂøÉ‰ΩçÁΩÆÔºåÂ∞ÜÁâ©‰ΩìÊãñÊãΩÂà∞<strong>Follow</strong>„ÄÇ</p>\n<blockquote>\n<p><strong>BODY</strong></p>\n<ul>\n<li>Do NothingÔºö‰∏çÁßªÂä®ËôöÊãüÁõ∏Êú∫</li>\n<li>Framing TransposerÔºöË∑üÈöèÁõÆÊ†áÁßªÂä®ÔºåÂπ∂Âú®Â±èÂπïÁ©∫Èó¥‰øùÊåÅÁõ∏Êú∫ÂíåË∑üÈöèÁõÆÊ†áÁöÑÁõ∏ÂØπ‰ΩçÁΩÆ„ÄÇ</li>\n<li>Hard Lock to TargetÔºöËôöÊãüÁõ∏Êú∫ÂíåË∑üÈöèÁõÆÊ†á‰ΩøÁî®Áõ∏Âêå‰ΩçÁΩÆ„ÄÇ</li>\n<li>Orbital TransposerÔºöÁõ∏Êú∫ÂíåË∑üÈöèÁõÆÊ†áÁöÑÁõ∏ÂØπ‰ΩçÁΩÆÊòØÂèØÂèòÁöÑÔºåËøòËÉΩÊé•Êî∂Áî®Êà∑ÁöÑËæìÂÖ•„ÄÇÂ∏∏ËßÅ‰∫éÁé©ÂÆ∂ÊéßÂà∂ÁöÑÁõ∏Êú∫„ÄÇ</li>\n<li>Tracked DollyÔºöÁõ∏Êú∫Ê≤øÁùÄÈ¢ÑÂÖàËÆæÁΩÆÁöÑËΩ®ÈÅìÁßªÂä®„ÄÇ</li>\n<li>TransposerÔºöË∑üÈöèÁõÆÊ†áÁßªÂä®ÔºåÂπ∂Âú®‰∏ñÁïåÁ©∫Èó¥‰øùÊåÅÁõ∏Êú∫ÂíåË∑üÈöèÁõÆÊ†áÁöÑÁõ∏ÂØπ‰ΩçÁΩÆÂõ∫ÂÆö„ÄÇ</li>\n</ul>\n<p><strong>AIM</strong></p>\n<ul>\n<li><p>Do Nothing: ‰∏çÊéßÂà∂Áõ∏Êú∫ÁöÑÊóãËΩ¨„ÄÇ</p>\n</li>\n<li><p>Composer: ‰øùÊåÅÁõÆÊ†áÁâ©‰ΩìÂú®ÈïúÂ§¥ÂÜÖ</p>\n</li>\n<li><p>Group Composer: ‰øùÊåÅÂ§ö‰∏™ÁõÆÊ†áÂú®ÈïúÂ§¥ÂÜÖ</p>\n</li>\n<li><p>Hard Look At: ‰øùÊåÅÁõÆÊ†áÂú®ÈïúÂ§¥ÁöÑ‰∏≠ÂøÉ</p>\n</li>\n<li><p>POV: Âü∫‰∫éÁé©ÂÆ∂ÁöÑËæìÂÖ•ÊóãËΩ¨Áõ∏Êú∫</p>\n</li>\n</ul>\n</blockquote>\n<p><strong>Ê∑ªÂä†ÁéØÂ¢ÉËø∑Èõæ</strong></p>\n<p>Window &gt; Rendering &gt; Lighting &gt; Environment &gt; FogËÆæÁΩÆ‰∏∫True</p>\n<blockquote>\n<p>Â¶ÇÊûúSenceÂú∫ÊôØÊ≤°ÊúâÊòæÁ§∫FogÔºåÂàôÈúÄË¶ÅÂú®Á™óÂè£‰∏≠ÊâìÂºÄFogÂºÄÂÖ≥</p>\n<p>ModeÔºöLinear ‰∏∫ÊúÄËøëÊúÄËøúÂ§ÑËÉΩËßÅÂ∫¶</p>\n</blockquote>\n<p><strong>Global</strong> <strong>Volume</strong></p>\n<p>ÂØπÂú∫ÊôØËøõË°åÂêéÂ§ÑÁêÜÔºåadd ÂÖ∂‰ªñÂäüËÉΩÂØπÂú∫ÊôØËøõË°åÊ∏≤Êüì</p>\n<blockquote>\n<p>Â¶ÇÊûúÂú∫ÊôØÊ≤°ÊúâÊòæÁ§∫Âá∫ÊïàÊûúÔºåÂú®Main Camera &gt; Rendering &gt; Post Peocessing ËÆæÁΩÆ‰∏∫True</p>\n</blockquote>\n<h3 id=\"ÈÅÆÊå°ÂâîÈô§\"><a href=\"#ÈÅÆÊå°ÂâîÈô§\" class=\"headerlink\" title=\"ÈÅÆÊå°ÂâîÈô§\"></a>ÈÅÆÊå°ÂâîÈô§</h3><p>ÈÄöËøá<strong>Shader</strong>ÂàõÂª∫ÊùêË¥®ÊîæÂÖ•Âà∞URPÁöÑ UniversalRenderPipelineAsset_Renderer ÔºåÊñ∞Âª∫Add Renderer Feature,ÈÄâÊã©Ë¢´ÈÅÆÊå°ÁöÑLayer MaskÔºåÂèØ‰ª•Â§öÈÄâÔºåÁÑ∂ÂêéËÆæÁΩÆË¢´ÈÅÆÊå°ÂêéÁöÑÊùêË¥®ÔºåDepthËÆæÁΩÆ‰∏∫TrueÔºåDepth TestËÆæÁΩÆ‰∏∫Greater„ÄÇÂΩìË¢´ÈÅÆÊå°Áâ©‰ΩìÂ±ÇÁ∫ßGreaterÊó∂ÔºåÊòæÁ§∫Ë¢´ÈÅÆÊå°ÂêéÁöÑÊùêË¥®„ÄÇ</p>\n<p>ÂêåÊ†∑Add Renderer FeatureÔºåÈÄâÊã©Áõ∏ÂêåË¢´ÈÅÆÊå°ÁöÑLayer MaskÔºåÂÖ∂‰ªñ‰∏çÂÅö‰øÆÊîπÔºåÂΩì‰∏çË¢´ÈÅÆÊå°Êó∂ÊòæÁ§∫ÂéüÊúâÊùêË¥®</p>\n<p><strong>ÂÖ≥‰∫éÈÅÆÊå°ÊùêË¥®ÁöÑÂà∂‰Ωú</strong></p>\n<p>shaderÂàõÂª∫ÔºöProject &gt; Âè≥ÈîÆ &gt; Shader &gt; URP &gt;UnLit Shader Graph</p>\n<blockquote>\n<p>Graph Inspector &gt; Grapj Settings &gt; Universal &gt; Alpha Clip,ÊâìÂºÄAlphaÈÄèÊòéÈÄöÈÅì</p>\n</blockquote>\n<ol>\n<li>‰ΩøÁî®Fresnel Effect Âà∂‰ΩúÈÅÆÊå°ÁöÑÊïàÊûúÔºåÈÄöËøáÊñ∞Âª∫ÂèòÈáèColor‰øÆÊîπÈ¢úËâ≤„ÄÇÈÄöËøáMultiplyÊ∑∑ÂêàÔºå‰º†ÁªôBase color„ÄÇ</li>\n<li>DitherÂà∂‰ΩúÂô™ÁÇπÊïàÊûúÔºåÊñ∞Âª∫Float‰øÆÊîπDitherÁöÑXÂÄºÔºåout‰º†ÁªôFragment &gt; AlphaÈÄöÈÅì</li>\n<li>ÂàõÂª∫Flaot ‰øÆÊîπAlpha Threshold„ÄÇ</li>\n<li>ÈÄâÊã©ShaderÂàõÂª∫ÊùêË¥®</li>\n</ol>\n<p><strong>ÂÖ≥‰∫éÈº†Ê†áÂ∞ÑÁ∫øÈÅÆÊå°</strong></p>\n<ul>\n<li>ÈÄâ‰∏≠ÈÅÆÊå°ÁöÑÁâ©‰ΩìÔºåËÆæÁΩÆÂ±ÇÁ∫ß‰∏∫Ignore Raycast</li>\n<li>ÂÖ≥Èó≠ÈÅÆÊå°Áâ©‰ΩìÁöÑMesh Collider</li>\n</ul>\n<h3 id=\"EnemyController\"><a href=\"#EnemyController\" class=\"headerlink\" title=\"EnemyController\"></a>EnemyController</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.AI;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"built_in\">enum</span> EnemyStates &#123;GUARD,PARTOL,CHASE,DEAD &#125;</span><br><span class=\"line\"><span class=\"comment\">//ÈÄöËøá‰ª£Á†ÅÊ∑ªÂä†ÁªÑ‰ª∂</span></span><br><span class=\"line\">[<span class=\"meta\">RequireComponent(typeof(NavMeshAgent))</span>]</span><br><span class=\"line\">[<span class=\"meta\">RequireComponent(typeof(CharacterStats))</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//‰ΩøÁî®Êé•Âè£</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">EnemyController</span> : <span class=\"title\">MonoBehaviour</span>,<span class=\"title\">IEndGameObserver</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    NavMeshAgent agent;</span><br><span class=\"line\">    EnemyStates enemyStates;</span><br><span class=\"line\">    Animator anim;</span><br><span class=\"line\">    <span class=\"keyword\">protected</span> CharacterStats characterStats;</span><br><span class=\"line\">    Collider coll;</span><br><span class=\"line\">    <span class=\"comment\">//ÊîªÂáªËåÉÂõ¥ </span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> sightRadius;</span><br><span class=\"line\">    <span class=\"comment\">//Â∑°ÈÄªËåÉÂõ¥</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> partolRadius;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">bool</span> isGuard;</span><br><span class=\"line\">    <span class=\"comment\">//Â∑°ÈÄªÂÅúÁïôÊó∂Èó¥</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> lookAtTime;</span><br><span class=\"line\">    <span class=\"built_in\">float</span> remainLookAtTime;</span><br><span class=\"line\">    <span class=\"built_in\">float</span> speed;</span><br><span class=\"line\">    <span class=\"comment\">//cdÊó∂Èó¥</span></span><br><span class=\"line\">    <span class=\"built_in\">float</span> lastAttackTime;</span><br><span class=\"line\">    <span class=\"comment\">//‰∏ã‰∏Ä‰∏™ÂâçÂæÄÁöÑÂ∑°ÈÄªÁÇπ</span></span><br><span class=\"line\">    Vector3 wayPoint;</span><br><span class=\"line\">    <span class=\"comment\">//Ëµ∑ÂßãÁÇπ</span></span><br><span class=\"line\">    Vector3 guardPoint;</span><br><span class=\"line\">    Quaternion guardRotation;</span><br><span class=\"line\">    <span class=\"keyword\">protected</span> GameObject attackTarget;</span><br><span class=\"line\">    <span class=\"built_in\">bool</span> isWalk, isChase, isFollow, isDie;</span><br><span class=\"line\">    <span class=\"built_in\">bool</span> playerDie;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">Awake</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        agent = GetComponent&lt;NavMeshAgent&gt;();</span><br><span class=\"line\">        anim = GetComponent&lt;Animator&gt;();</span><br><span class=\"line\">        characterStats = GetComponent&lt;CharacterStats&gt;();</span><br><span class=\"line\">        coll = GetComponent&lt;Collider&gt;();</span><br><span class=\"line\">        <span class=\"comment\">//‰øùÂ≠òÂéüÊúâÈÄüÂ∫¶Ôºõ</span></span><br><span class=\"line\">        speed = agent.speed;</span><br><span class=\"line\">        guardPoint = transform.position;</span><br><span class=\"line\">        remainLookAtTime = lookAtTime;</span><br><span class=\"line\">        lastAttackTime = characterStats.CoolDown;</span><br><span class=\"line\">        guardRotation = transform.rotation;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Start</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (isGuard)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            enemyStates = EnemyStates.GUARD;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            enemyStates = EnemyStates.PARTOL;</span><br><span class=\"line\">            GetNewPartolPoint();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//Â∞ÜÂØπË±°Ê∑ªÂä†ËøõgamemanagerÈáåÔºåÁî®‰∫éÂπøÊí≠</span></span><br><span class=\"line\">        GameManager.Instance.AddObserver(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Update is called once per frame</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Update</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (characterStats.CurrentHealth == <span class=\"number\">0</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            isDie = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!playerDie)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            SwitchStates();</span><br><span class=\"line\">            SwitchAnim();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (lastAttackTime &gt; <span class=\"number\">0f</span>)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                lastAttackTime -= Time.deltaTime;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">//private void OnEnable()</span></span><br><span class=\"line\">    <span class=\"comment\">//&#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//    Gamemanager.Instance.AddObserver(this);</span></span><br><span class=\"line\">    <span class=\"comment\">//&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">OnDisable</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!GameManager.isInitialized) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        GameManager.Instance.RemoveObserver(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">SwitchStates</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (isDie)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            enemyStates = EnemyStates.DEAD;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (FindPlayer())</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            enemyStates = EnemyStates.CHASE;</span><br><span class=\"line\">            </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (enemyStates)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> EnemyStates.GUARD:</span><br><span class=\"line\">                isChase = <span class=\"literal\">false</span>;</span><br><span class=\"line\">                isWalk = <span class=\"literal\">false</span>;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (transform.position!=guardPoint)</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    isWalk = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                    agent.isStopped = <span class=\"literal\">false</span>;</span><br><span class=\"line\">                    agent.destination = guardPoint;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span>(Vector3.SqrMagnitude(guardPoint - transform.position) &lt;= agent.stoppingDistance)</span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        isWalk = <span class=\"literal\">false</span>;</span><br><span class=\"line\">                        agent.isStopped = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                        <span class=\"comment\">//ÊóãËΩ¨‰ºöÂàùÂßãÁöÑËßíÂ∫¶</span></span><br><span class=\"line\">                        Quaternion.Lerp(transform.rotation, guardRotation, <span class=\"number\">0.1f</span>);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> EnemyStates.PARTOL:</span><br><span class=\"line\">                isChase = <span class=\"literal\">false</span>;</span><br><span class=\"line\">                agent.speed = speed * <span class=\"number\">0.5f</span>;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (Vector3.Distance(transform.position, wayPoint) &lt;= <span class=\"number\">1</span>)</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    isWalk = <span class=\"literal\">false</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (remainLookAtTime &lt; <span class=\"number\">0f</span>)</span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        GetNewPartolPoint();</span><br><span class=\"line\">                        remainLookAtTime = lookAtTime;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">else</span></span><br><span class=\"line\">                        remainLookAtTime -= Time.deltaTime;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">else</span></span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    isWalk = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                    agent.destination = wayPoint;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> EnemyStates.CHASE:</span><br><span class=\"line\"></span><br><span class=\"line\">                agent.speed = speed;</span><br><span class=\"line\">                isWalk = <span class=\"literal\">false</span>;</span><br><span class=\"line\">                isChase = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                <span class=\"comment\">//ËÑ±Êàò</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (!FindPlayer())</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    isFollow = <span class=\"literal\">false</span>;</span><br><span class=\"line\">                    agent.destination = transform.position;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (remainLookAtTime &gt; <span class=\"number\">0</span>)</span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        remainLookAtTime -= Time.deltaTime;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">else</span></span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (isGuard)</span><br><span class=\"line\">                        &#123;</span><br><span class=\"line\">                            enemyStates = EnemyStates.GUARD;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                        <span class=\"keyword\">else</span></span><br><span class=\"line\">                        &#123;</span><br><span class=\"line\">                            enemyStates = EnemyStates.PARTOL;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">else</span></span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    <span class=\"comment\">//ËøΩÂáª</span></span><br><span class=\"line\">                    isFollow = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                    agent.isStopped = <span class=\"literal\">false</span>;</span><br><span class=\"line\">                    agent.destination = attackTarget.transform.position;</span><br><span class=\"line\">                    <span class=\"comment\">//Âà§Êñ≠ÊòØÂê¶ËøΩÂáªÂà∞</span></span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (TargetInAttackRange() || TargetInSkillRange())</span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        isFollow = <span class=\"literal\">false</span>;</span><br><span class=\"line\">                        agent.isStopped = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (lastAttackTime &lt; <span class=\"number\">0f</span>)</span><br><span class=\"line\">                        &#123;</span><br><span class=\"line\">                            lastAttackTime = characterStats.CoolDown;</span><br><span class=\"line\">                            <span class=\"comment\">//Êö¥ÂáªÂà§Êñ≠</span></span><br><span class=\"line\">                            characterStats.isCritical = Random.<span class=\"keyword\">value</span> &lt; characterStats.CriticalChance;</span><br><span class=\"line\">                            </span><br><span class=\"line\">                            Attack();</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> EnemyStates.DEAD:</span><br><span class=\"line\">                <span class=\"comment\">//enemyÊ≠ª‰∫°Êó∂‰∏ç‰ºöÂèëÁîüÁªßÁª≠ÊîªÂáªÁöÑÊÉÖÂÜµ</span></span><br><span class=\"line\">                coll.enabled = <span class=\"literal\">false</span>;</span><br><span class=\"line\">                </span><br><span class=\"line\">                <span class=\"comment\">//agent.enabled = false;</span></span><br><span class=\"line\">                <span class=\"comment\">//ËÆæÁΩÆ‰πãÂêé‰∏ç‰ºöÈòªÊå°PlayerË°åÂä®</span></span><br><span class=\"line\">                agent.radius = <span class=\"number\">0f</span>;</span><br><span class=\"line\">                Destroy(gameObject, <span class=\"number\">2f</span>);</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"literal\">default</span>:</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Attack</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        transform.LookAt(attackTarget.transform);</span><br><span class=\"line\">        anim.SetBool(<span class=\"string\">&quot;Critical&quot;</span>, characterStats.isCritical);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (TargetInAttackRange())</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            anim.SetTrigger(<span class=\"string\">&quot;Attack&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(TargetInSkillRange())</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            anim.SetTrigger(<span class=\"string\">&quot;Skill&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">bool</span> <span class=\"title\">FindPlayer</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        Collider[] colliderNum = Physics.OverlapSphere(transform.position, sightRadius);</span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"keyword\">var</span> collider <span class=\"keyword\">in</span> colliderNum)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            </span><br><span class=\"line\">            <span class=\"keyword\">if</span> (collider.gameObject.CompareTag(<span class=\"string\">&quot;Player&quot;</span>))</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                attackTarget = collider.gameObject;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">SwitchAnim</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        anim.SetBool(<span class=\"string\">&quot;Walk&quot;</span>, isWalk);</span><br><span class=\"line\">        anim.SetBool(<span class=\"string\">&quot;Chase&quot;</span>, isChase);</span><br><span class=\"line\">        anim.SetBool(<span class=\"string\">&quot;Follow&quot;</span>, isFollow);</span><br><span class=\"line\">        anim.SetBool(<span class=\"string\">&quot;Die&quot;</span>, isDie);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">OnDrawGizmosSelected</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//ÁîªÂá∫ÊîªÂáªËåÉÂõ¥Âúà</span></span><br><span class=\"line\">        Gizmos.color = Color.green;</span><br><span class=\"line\">        Gizmos.DrawWireSphere(transform.position, sightRadius);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">GetNewPartolPoint</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">float</span> ran_x = Random.Range(-partolRadius, partolRadius);</span><br><span class=\"line\">        <span class=\"built_in\">float</span> ran_z = Random.Range(-partolRadius, partolRadius);</span><br><span class=\"line\">        <span class=\"comment\">//‰∏ç‰øÆÊîπÈ´òÂ∫¶ÔºåÈò≤Ê≠¢ÂùëÂùëÊ¥ºÊ¥ºÁöÑÂú∞Èù¢</span></span><br><span class=\"line\">        <span class=\"comment\">//guardPointÊòØ‰∏∫‰∫ÜÈöèÊú∫Âú®ÂàùÂßã‰ΩçÁΩÆÁÇπÁöÑÈöèÊú∫ÁßªÂä®</span></span><br><span class=\"line\">        wayPoint = <span class=\"keyword\">new</span> Vector3(guardPoint.x + ran_x, transform.position.y, guardPoint.z + ran_z);</span><br><span class=\"line\">        NavMeshHit hit;</span><br><span class=\"line\">        <span class=\"comment\">//NavMesh.SamplePositionÔºàÔºâÊñπÊ≥ïÁöÑÊúÄÂêé‰∏Ä‰Ωç‰∏∫Á™óÂè£ Navigation &gt; AreaÁöÑÂ∫èÂàóÔºå‰ªé1ÂºÄÂßã</span></span><br><span class=\"line\">        <span class=\"comment\">//ÊñπÊ≥ï‰∏∫ Âú®waypointÁöÑsightRadiusËåÉÂõ¥ÂÜÖÂØªÊâæ1Â±ÇÁ∫ßÔºàÂèØÁßªÂä®Âà∞ÔºâÁöÑÁÇπ</span></span><br><span class=\"line\">        <span class=\"comment\">//ÊñπÊ≥ïËøîÂõûÁöÑ‰∏∫TrueÂíåFalse</span></span><br><span class=\"line\">        wayPoint = NavMesh.SamplePosition(wayPoint, <span class=\"keyword\">out</span> hit, sightRadius,<span class=\"number\">1</span>) ? hit.position : transform.position;</span><br><span class=\"line\">        </span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">bool</span> <span class=\"title\">TargetInAttackRange</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (attackTarget != <span class=\"literal\">null</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> Vector3.Distance(attackTarget.transform.position, transform.position) &lt; characterStats.AttackRange;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">bool</span> <span class=\"title\">TargetInSkillRange</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (attackTarget != <span class=\"literal\">null</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> Vector3.Distance(attackTarget.transform.position, transform.position) &lt; characterStats.SkillRange;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Hit</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (attackTarget != <span class=\"literal\">null</span> &amp;&amp; transform.IsFacingTarget(attackTarget.transform))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> targetStats = attackTarget.GetComponent&lt;CharacterStats&gt;();</span><br><span class=\"line\">            characterStats.TakeDamage(characterStats, targetStats);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">EndsNotify</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        isChase = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        isWalk = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        attackTarget = <span class=\"literal\">null</span>;</span><br><span class=\"line\">        playerDie = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        anim.SetBool(<span class=\"string\">&quot;Victory&quot;</span>, <span class=\"literal\">true</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"PlayController\"><a href=\"#PlayController\" class=\"headerlink\" title=\"PlayController\"></a>PlayController</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.AI;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">PlayerController</span> : <span class=\"title\">MonoBehaviour</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> lastAttackTime;</span><br><span class=\"line\">    <span class=\"comment\">//ÊîªÂáªÁõÆÊ†áÂØπË±°</span></span><br><span class=\"line\">    GameObject attackTarget;</span><br><span class=\"line\">    CharacterStats characterStats;</span><br><span class=\"line\">    NavMeshAgent agent;</span><br><span class=\"line\">    Animator anim;</span><br><span class=\"line\">    <span class=\"built_in\">bool</span> isDie;</span><br><span class=\"line\">    <span class=\"built_in\">float</span> stopDistance;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">Awake</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        agent = GetComponent&lt;NavMeshAgent&gt;();</span><br><span class=\"line\">        anim = GetComponent&lt;Animator&gt;();</span><br><span class=\"line\">        characterStats = GetComponent&lt;CharacterStats&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">Start</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//Ê∑ªÂä†‰∫ã‰ª∂</span></span><br><span class=\"line\">        MouseManager.Instance.OnMouseClicked += MoveToTarget;</span><br><span class=\"line\">        MouseManager.Instance.OnClickedEnemy += EventAttack;</span><br><span class=\"line\">        </span><br><span class=\"line\">\t\t<span class=\"comment\">//Ê≥®ÂÜåGamemanagerÁöÑÂπøÊí≠</span></span><br><span class=\"line\">        GameManager.Instance.RigisterPlayer(characterStats);</span><br><span class=\"line\">        stopDistance = agent.stoppingDistance;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">Update</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        isDie = characterStats.CurrentHealth == <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (isDie)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            GameManager.Instance.NotifyObservers();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        AnimationChange();</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(lastAttackTime&gt;<span class=\"number\">0f</span>)</span><br><span class=\"line\">            lastAttackTime -= Time.deltaTime;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">MoveToTarget</span>(<span class=\"params\">Vector3 target</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (isDie) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        agent.isStopped = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        agent.stoppingDistance = stopDistance;</span><br><span class=\"line\">        StopAllCoroutines();</span><br><span class=\"line\">        agent.destination = target;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">AnimationChange</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        anim.SetFloat(<span class=\"string\">&quot;Speed&quot;</span>, agent.velocity.sqrMagnitude);</span><br><span class=\"line\">        anim.SetBool(<span class=\"string\">&quot;Die&quot;</span>, isDie);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">EventAttack</span>(<span class=\"params\">GameObject target</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (isDie) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (target != <span class=\"literal\">null</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            attackTarget = target;</span><br><span class=\"line\">            StartCoroutine(<span class=\"string\">&quot;MoveToAttackTarget&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//Âä®Áîª‰∫ã‰ª∂</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Hit</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (attackTarget.CompareTag(<span class=\"string\">&quot;Attackable&quot;</span>))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (attackTarget.GetComponent&lt;Rock&gt;())</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"comment\">//Âú®Á©∫‰∏≠‰πüÂèØ‰ª•ÂáªÈ£û</span></span><br><span class=\"line\">                attackTarget.GetComponent&lt;Rock&gt;().rockStates = Rock.RockStates.HitEnemy;</span><br><span class=\"line\">                <span class=\"comment\">//Ëµã‰∫àÂàùÂßãÈÄüÂ∫¶ÔºåÈò≤Ê≠¢fixudateÊó∂‰øÆÊîπrockÁä∂ÊÄÅ</span></span><br><span class=\"line\">                attackTarget.GetComponent&lt;Rigidbody&gt;().velocity = Vector3.one;</span><br><span class=\"line\">                attackTarget.GetComponent&lt;Rigidbody&gt;().AddForce(transform.forward * <span class=\"number\">20f</span>,ForceMode.Impulse);</span><br><span class=\"line\"></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> targetStats = attackTarget.GetComponent&lt;CharacterStats&gt;();</span><br><span class=\"line\">            characterStats.TakeDamage(characterStats, targetStats);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\">IEnumerator <span class=\"title\">MoveToAttackTarget</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        agent.stoppingDistance = characterStats.AttackRange;</span><br><span class=\"line\">        agent.isStopped = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (Vector3.Distance(attackTarget.transform.position, transform.position) &gt; characterStats.AttackRange)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            agent.destination = attackTarget.transform.position;</span><br><span class=\"line\">            <span class=\"keyword\">yield</span> <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        agent.isStopped = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (lastAttackTime &lt; <span class=\"number\">0</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            transform.LookAt(attackTarget.transform.position);</span><br><span class=\"line\">            <span class=\"comment\">//Êö¥ÂáªÁéáÁöÑËÆ°ÁÆó</span></span><br><span class=\"line\">            characterStats.isCritical = Random.<span class=\"keyword\">value</span> &lt; characterStats.CriticalChance;</span><br><span class=\"line\">            anim.SetBool(<span class=\"string\">&quot;Critical&quot;</span>,characterStats.isCritical);</span><br><span class=\"line\">            anim.SetTrigger(<span class=\"string\">&quot;Attack&quot;</span>);</span><br><span class=\"line\">            <span class=\"comment\">//ÈáçÁΩÆÂÜ∑Âç¥Êó∂Èó¥</span></span><br><span class=\"line\">            lastAttackTime = characterStats.CoolDown;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"CharacterStats\"><a href=\"#CharacterStats\" class=\"headerlink\" title=\"CharacterStats\"></a>CharacterStats</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">CharacterStats</span> : <span class=\"title\">MonoBehaviour</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">event</span> Action&lt;<span class=\"built_in\">int</span>, <span class=\"built_in\">int</span>&gt; UpdateHealthBarOnAttack;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Character_SO templateData;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> Character_SO character;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> AttackSO attackSO;</span><br><span class=\"line\">    [<span class=\"meta\">HideInInspector</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">bool</span> isCritical;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">Awake</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//Áî®Ê®°Êùø‰∏∫characterÁîüÊàê‰∏ÄÁªÑÊï∞ÊçÆÔºåÈò≤Ê≠¢Â§ö‰∏™enemyËÆøÈóÆÂêå‰∏ÄÁªÑÊï∞ÊçÆ</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (templateData != <span class=\"literal\">null</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            character = Instantiate(templateData);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> MaxHealth</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">get</span> &#123; <span class=\"keyword\">if</span> (character != <span class=\"literal\">null</span>) &#123; <span class=\"keyword\">return</span> character.maxHealth; &#125; <span class=\"keyword\">else</span> &#123; <span class=\"keyword\">return</span> <span class=\"number\">0</span>; &#125; &#125;</span><br><span class=\"line\">        <span class=\"keyword\">set</span> &#123; character.maxHealth = <span class=\"keyword\">value</span>; &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> CurrentHealth</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">get</span> &#123; <span class=\"keyword\">if</span> (character != <span class=\"literal\">null</span>) &#123; <span class=\"keyword\">return</span> character.currentHealth; &#125; <span class=\"keyword\">else</span> &#123; <span class=\"keyword\">return</span> <span class=\"number\">0</span>; &#125; &#125;</span><br><span class=\"line\">        <span class=\"keyword\">set</span> &#123; character.currentHealth = <span class=\"keyword\">value</span>; &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> BaseDefence</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">get</span> &#123; <span class=\"keyword\">if</span> (character != <span class=\"literal\">null</span>) &#123; <span class=\"keyword\">return</span> character.baseDefence; &#125; <span class=\"keyword\">else</span> &#123; <span class=\"keyword\">return</span> <span class=\"number\">0</span>; &#125; &#125;</span><br><span class=\"line\">        <span class=\"keyword\">set</span> &#123; character.baseDefence = <span class=\"keyword\">value</span>; &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> CurrentDefence</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">get</span> &#123; <span class=\"keyword\">if</span> (character != <span class=\"literal\">null</span>) &#123; <span class=\"keyword\">return</span> character.currentDefence; &#125; <span class=\"keyword\">else</span> &#123; <span class=\"keyword\">return</span> <span class=\"number\">0</span>; &#125; &#125;</span><br><span class=\"line\">        <span class=\"keyword\">set</span> &#123; character.currentDefence = <span class=\"keyword\">value</span>; &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> AttackRange &#123; <span class=\"keyword\">get</span> &#123;  <span class=\"keyword\">return</span> attackSO.attackRange; &#125; &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> SkillRange &#123; <span class=\"keyword\">get</span> &#123; <span class=\"keyword\">return</span> attackSO.skillRange; &#125; &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> CoolDown &#123; <span class=\"keyword\">get</span> &#123; <span class=\"keyword\">return</span> attackSO.coolDown; &#125; &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> MinDamage &#123; <span class=\"keyword\">get</span> &#123; <span class=\"keyword\">return</span> attackSO.minDamage; &#125; &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> MaxDamage &#123; <span class=\"keyword\">get</span> &#123; <span class=\"keyword\">return</span> attackSO.maxDamage; &#125; &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> CriticalMultiplier &#123; <span class=\"keyword\">get</span> &#123; <span class=\"keyword\">return</span> attackSO.criticalMultiplier; &#125; &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> CriticalChance &#123; <span class=\"keyword\">get</span> &#123; <span class=\"keyword\">return</span> attackSO.criticalChance; &#125; &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">TakeDamage</span>(<span class=\"params\">CharacterStats attacker,CharacterStats defender</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">int</span> damage = Mathf.Max(attacker.CurrentDamage() - defender.CurrentDefence, <span class=\"number\">0</span>);</span><br><span class=\"line\">        defender.CurrentHealth = Mathf.Max(defender.CurrentHealth - damage, <span class=\"number\">0</span>);</span><br><span class=\"line\">        <span class=\"comment\">//defenderÂèó‰º§ÁöÑÂä®Áîª Êö¥ÂáªÊâç‰ºöÊúâ</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (attacker.isCritical)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            defender.GetComponent&lt;Animator&gt;().SetTrigger(<span class=\"string\">&quot;Hit&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">\t\t<span class=\"comment\">//‰øÆÊîπÈò≤Âæ°ËÄÖË°ÄÊù°</span></span><br><span class=\"line\">        defender.UpdateHealthBarOnAttack?.Invoke(defender.CurrentHealth, defender.MaxHealth);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (defender.CurrentHealth &lt;= <span class=\"number\">0</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"comment\">//Êõ¥Êñ∞ÊîªÂáªËÄÖÁªèÈ™å</span></span><br><span class=\"line\">            attacker.character.UpdateExp(defender.character.killPoint);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">TakeDamage</span>(<span class=\"params\"><span class=\"built_in\">int</span> damage,CharacterStats defender</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">int</span> currentDamage = Mathf.Max(damage - defender.CurrentDefence, <span class=\"number\">0</span>);</span><br><span class=\"line\">        defender.CurrentHealth = Mathf.Max(defender.CurrentHealth - currentDamage, <span class=\"number\">0</span>);</span><br><span class=\"line\">        UpdateHealthBarOnAttack?.Invoke(defender.CurrentHealth, defender.MaxHealth);</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">int</span> <span class=\"title\">CurrentDamage</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">float</span> damage = UnityEngine.Random.Range(MinDamage, MaxDamage); ;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (isCritical)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            damage *= CriticalMultiplier;</span><br><span class=\"line\">            Debug.Log(<span class=\"string\">&quot;Êö¥ÂáªÔºö&quot;</span> + damage);</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (<span class=\"built_in\">int</span>)damage;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><strong>Character_SO</strong></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//filename‰∏∫ÂàõÂª∫ÁöÑÊñá‰ª∂ÁöÑÊñá‰ª∂ÂêçÔºåmenuName‰∏∫Êñá‰ª∂Â§πÁõÆÂΩïÂ±ÇÁ∫ßÂêçÂ≠ó</span></span><br><span class=\"line\">[<span class=\"meta\">CreateAssetMenu(fileName = <span class=\"meta-string\">&quot;New Data&quot;</span>, menuName = <span class=\"meta-string\">&quot;Character Stats/Data&quot;</span>)</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">Character_SO</span> : <span class=\"title\">ScriptableObject</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    [<span class=\"meta\">Header(<span class=\"meta-string\">&quot;Stats Info&quot;</span>)</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> maxHealth;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> currentHealth;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> baseDefence;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> currentDefence;</span><br><span class=\"line\"></span><br><span class=\"line\">    [<span class=\"meta\">Header(<span class=\"meta-string\">&quot;Kill&quot;</span>)</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> killPoint;</span><br><span class=\"line\"></span><br><span class=\"line\">    [<span class=\"meta\">Header(<span class=\"meta-string\">&quot;Level&quot;</span>)</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> currentLevel;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> maxLevel;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> baseExp;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> currentExp;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> levelBuff;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">UpdateExp</span>(<span class=\"params\"><span class=\"built_in\">int</span> point</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        currentExp += point;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (currentExp &gt;= baseExp)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            currentExp -= baseExp;</span><br><span class=\"line\">            LevelUP();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">LevelUP</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        currentLevel = Mathf.Clamp(currentLevel + <span class=\"number\">1</span>, <span class=\"number\">0</span>, maxLevel);</span><br><span class=\"line\">        baseExp += (<span class=\"built_in\">int</span>)(baseExp * LevelMultiplier);</span><br><span class=\"line\">        maxHealth = (<span class=\"built_in\">int</span>)(maxHealth * LevelMultiplier);</span><br><span class=\"line\">        currentHealth = maxHealth;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> LevelMultiplier</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">get</span> &#123;<span class=\"keyword\">return</span> <span class=\"number\">1</span>+(currentLevel<span class=\"number\">-1</span>)*levelBuff ; &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><strong>Attack_SO</strong></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"meta\">CreateAssetMenu(fileName =<span class=\"meta-string\">&quot;New Attack&quot;</span>,menuName =<span class=\"meta-string\">&quot;Attack/Attack Data&quot;</span>)</span>]</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">AttackSO</span> : <span class=\"title\">ScriptableObject</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    [<span class=\"meta\">Header(<span class=\"meta-string\">&quot;Attack Info&quot;</span>)</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> attackRange;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> skillRange;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> coolDown;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> minDamage;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> maxDamage;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> criticalMultiplier;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> criticalChance;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Ê≥õÂûãÂçï‰æãÊ®°ÂºèSingleton\"><a href=\"#Ê≥õÂûãÂçï‰æãÊ®°ÂºèSingleton\" class=\"headerlink\" title=\"Ê≥õÂûãÂçï‰æãÊ®°ÂºèSingleton\"></a>Ê≥õÂûãÂçï‰æãÊ®°ÂºèSingleton</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">SingleTon</span>&lt;<span class=\"title\">T</span>&gt; : <span class=\"title\">MonoBehaviour</span> <span class=\"keyword\">where</span> <span class=\"title\">T</span>:<span class=\"title\">SingleTon</span>&lt;<span class=\"title\">T</span>&gt;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> T instance;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> T Instance</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">get</span> &#123; <span class=\"keyword\">return</span> instance; &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">Awake</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (instance != <span class=\"literal\">null</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            Destroy(gameObject);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            instance = (T)<span class=\"keyword\">this</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"built_in\">bool</span> isInitialized</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">         <span class=\"keyword\">get</span> &#123; <span class=\"keyword\">return</span> instance != <span class=\"literal\">null</span>; &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Êé•Âè£Observer-Pattern\"><a href=\"#Êé•Âè£Observer-Pattern\" class=\"headerlink\" title=\"Êé•Âè£Observer Pattern\"></a>Êé•Âè£Observer Pattern</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title\">IEndGameObserver</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\">//Âè™ÂÆö‰πâÔºå‰∏çÂÆûÁé∞ÁïôÁªô‰ΩøÁî®ÁöÑÂÆûÁé∞Ëøô‰∏™ÊñπÊ≥ï</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">EndsNotify</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"GameManger\"><a href=\"#GameManger\" class=\"headerlink\" title=\"GameManger\"></a>GameManger</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">GameManager</span> : <span class=\"title\">SingleTon</span>&lt;<span class=\"title\">GameManager</span>&gt;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> CharacterStats playerStats;</span><br><span class=\"line\">\t</span><br><span class=\"line\">    <span class=\"comment\">//Êé•Âè£Á±ªÂûã</span></span><br><span class=\"line\">    List&lt;IEndGameObserver&gt; endGameObeverses = <span class=\"keyword\">new</span> List&lt;IEndGameObserver&gt;();</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">override</span> <span class=\"keyword\">void</span> <span class=\"title\">Awake</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">base</span>.Awake();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">RigisterPlayer</span>(<span class=\"params\">CharacterStats characterStats</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        playerStats = characterStats;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">AddObserver</span>(<span class=\"params\">IEndGameObserver observer</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        endGameObeverses.Add(observer);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">RemoveObserver</span>(<span class=\"params\">IEndGameObserver observer</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        endGameObeverses.Remove(observer);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">NotifyObservers</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//ÈÅçÂéÜÊ∑ªÂä†ËøõÊù•ÁöÑÂØπË±°</span></span><br><span class=\"line\">        <span class=\"comment\">//Êå®‰∏™Ë∞ÉÁî®EndsNotifyÔºàÔºâÊñπÊ≥ï</span></span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"keyword\">var</span> observer <span class=\"keyword\">in</span> endGameObeverses)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            observer.EndsNotify();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ËÆæÁΩÆÂÖΩ‰∫∫Grunt\"><a href=\"#ËÆæÁΩÆÂÖΩ‰∫∫Grunt\" class=\"headerlink\" title=\"ËÆæÁΩÆÂÖΩ‰∫∫Grunt\"></a>ËÆæÁΩÆÂÖΩ‰∫∫Grunt</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.AI;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//ÁªßÊâø‰∫éEnemyController</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">Grunt</span> : <span class=\"title\">EnemyController</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    [<span class=\"meta\">Header(<span class=\"meta-string\">&quot;GRUNTÊé®Âäõ&quot;</span>)</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> kickForce = <span class=\"number\">15f</span>;</span><br><span class=\"line\">    <span class=\"comment\">//Âä®Áîª‰∫ã‰ª∂</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">KickOff</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (attackTarget != <span class=\"literal\">null</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            transform.LookAt(attackTarget.transform);</span><br><span class=\"line\">            Vector3 direction = attackTarget.transform.position - transform.position;</span><br><span class=\"line\">            direction.Normalize();</span><br><span class=\"line\">            <span class=\"comment\">//ÊâìÊñ≠playerË°åÂä®ÔºåËøõË°åÂáªÈÄÄ</span></span><br><span class=\"line\">            attackTarget.GetComponent&lt;NavMeshAgent&gt;().isStopped = <span class=\"literal\">true</span>;</span><br><span class=\"line\">            attackTarget.GetComponent&lt;NavMeshAgent&gt;().velocity = direction * kickForce;</span><br><span class=\"line\">            attackTarget.GetComponent&lt;Animator&gt;().SetTrigger(<span class=\"string\">&quot;Dizzy&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ÊãìÂ±ïÊñπÊ≥ïExtension-Method\"><a href=\"#ÊãìÂ±ïÊñπÊ≥ïExtension-Method\" class=\"headerlink\" title=\"ÊãìÂ±ïÊñπÊ≥ïExtension Method\"></a>ÊãìÂ±ïÊñπÊ≥ïExtension Method</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//ÊãìÂ±ïÊñπÊ≥ï </span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">class</span> <span class=\"title\">ExtensionMethod</span> </span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">const</span> <span class=\"built_in\">float</span> dotThreshold = <span class=\"number\">0.5f</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//ÊãìÂ±ïÁöÑÊòØthisÂêéÈù¢ÁöÑÊñπÊ≥ï,ÂêéÈù¢ÁöÑ‰∏∫ÊñπÊ≥ïÊâÄÈúÄË¶ÅÁöÑÂáΩÊï∞</span></span><br><span class=\"line\">    <span class=\"comment\">//‰ΩøÁî®ÊñπÊ≥ï :transform.IsFacingTarget(target)</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"built_in\">bool</span> <span class=\"title\">IsFacingTarget</span>(<span class=\"params\"><span class=\"keyword\">this</span> Transform transform,Transform target</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//ÂêëÈáèOA-OB=BA;O‰∏∫ÂéüÁÇπÔºõ</span></span><br><span class=\"line\">        Vector3 vectorToTarget = target.position - transform.position;</span><br><span class=\"line\">        vectorToTarget.Normalize();</span><br><span class=\"line\">        <span class=\"comment\">//vector3.dot ‰∏∫ÁúãÂêëÁöÑÊñπÂêë‰∏évectortoTargetÁöÑÊñπÂêëÁöÑÂ§πËßíÔºåÊ≠£ÂØπÁùÄ‰∏∫1ÔºåËÉåÂØπÁùÄ‰∏∫-1ÔºåÂ∑¶Âè≥‰∏∫0Ôºõ</span></span><br><span class=\"line\">        <span class=\"built_in\">float</span> dot = Vector3.Dot(transform.forward, vectorToTarget);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dot &gt;= dotThreshold;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Áü≥Â§¥‰∫∫Golem\"><a href=\"#Áü≥Â§¥‰∫∫Golem\" class=\"headerlink\" title=\"Áü≥Â§¥‰∫∫Golem\"></a>Áü≥Â§¥‰∫∫Golem</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.AI;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">Golem</span> : <span class=\"title\">EnemyController</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    [<span class=\"meta\">Header(<span class=\"meta-string\">&quot;GRUNTÊé®Âäõ&quot;</span>)</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> kickForce = <span class=\"number\">25f</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> GameObject rockPerfab;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> Transform handTransform;</span><br><span class=\"line\">    <span class=\"comment\">//animation event</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">KickOff</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (attackTarget != <span class=\"literal\">null</span> &amp;&amp; transform.IsFacingTarget(attackTarget.transform))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> targetStats = attackTarget.GetComponent&lt;CharacterStats&gt;();</span><br><span class=\"line\">            Vector3 direction = attackTarget.transform.position - transform.position;</span><br><span class=\"line\">            direction.Normalize();</span><br><span class=\"line\">            transform.LookAt(attackTarget.transform);</span><br><span class=\"line\">            attackTarget.GetComponent&lt;NavMeshAgent&gt;().isStopped = <span class=\"literal\">true</span>;</span><br><span class=\"line\">            attackTarget.GetComponent&lt;NavMeshAgent&gt;().velocity = direction * kickForce;</span><br><span class=\"line\">            attackTarget.GetComponent&lt;Animator&gt;().SetTrigger(<span class=\"string\">&quot;Dizzy&quot;</span>);</span><br><span class=\"line\">            characterStats.TakeDamage(characterStats, targetStats);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//animation event</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">ThrowRock</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (attackTarget != <span class=\"literal\">null</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            GameObject rock = Instantiate(rockPerfab, handTransform.position, Quaternion.identity);</span><br><span class=\"line\">            rock.GetComponent&lt;Rock&gt;().target = attackTarget;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ÊâîÁü≥Â§¥\"><a href=\"#ÊâîÁü≥Â§¥\" class=\"headerlink\" title=\"ÊâîÁü≥Â§¥\"></a>ÊâîÁü≥Â§¥</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.AI;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.Animations;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">Rock</span> : <span class=\"title\">MonoBehaviour</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">enum</span> RockStates &#123; HitPlayer,HitEnemy,HitNothing&#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> RockStates rockStates;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> GameObject target;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> GameObject rockBreak;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> force;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> damage;</span><br><span class=\"line\">    Vector3 direction;</span><br><span class=\"line\">    Rigidbody rb;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Start</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        rb = GetComponent&lt;Rigidbody&gt;();</span><br><span class=\"line\">        rb.velocity = Vector3.one;</span><br><span class=\"line\">        rockStates = RockStates.HitPlayer;</span><br><span class=\"line\">        FlyToTarget();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">FixedUpdate</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (rb.velocity.sqrMagnitude &lt; <span class=\"number\">0.5f</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            rockStates = RockStates.HitNothing;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">FlyToTarget</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (target == <span class=\"literal\">null</span>)</span><br><span class=\"line\">            target = FindObjectOfType&lt;PlayerController&gt;().gameObject;</span><br><span class=\"line\">        direction = (target.transform.position - transform.position+Vector3.up ).normalized;</span><br><span class=\"line\">        rb.AddForce(direction * force, ForceMode.Impulse);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">OnCollisionEnter</span>(<span class=\"params\">Collision collision</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (rockStates)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> RockStates.HitPlayer:</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (collision.collider.CompareTag(<span class=\"string\">&quot;Player&quot;</span>))</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    collision.gameObject.GetComponent&lt;NavMeshAgent&gt;().isStopped = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                    collision.gameObject.GetComponent&lt;NavMeshAgent&gt;().velocity = direction * force;</span><br><span class=\"line\">                    collision.gameObject.GetComponent&lt;Animator&gt;().SetTrigger(<span class=\"string\">&quot;Dizzy&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">                    rockStates = RockStates.HitNothing;</span><br><span class=\"line\">                    collision.gameObject.GetComponent&lt;CharacterStats&gt;().TakeDamage(damage, collision.gameObject.GetComponent&lt;CharacterStats&gt;());</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> RockStates.HitEnemy:</span><br><span class=\"line\">                <span class=\"comment\">//Â¶ÇÊûúÊúâËøô‰∏™ÁªÑ‰ª∂ËøîÂõûtrueÔºõ</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (collision.gameObject.GetComponent&lt;Golem&gt;())</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    collision.gameObject.GetComponent&lt;CharacterStats&gt;().TakeDamage(damage, collision.gameObject.GetComponent&lt;CharacterStats&gt;());</span><br><span class=\"line\">                    </span><br><span class=\"line\">                    <span class=\"comment\">//ÊîªÂáªÁü≥Â§¥‰∫∫‰πãÂêéÔºåÁü≥Â§¥Á¢éË£ÇÁîüÊàêÁ≤íÂ≠êÁâπÊïà</span></span><br><span class=\"line\">                    Instantiate(rockBreak, transform.position, Quaternion.identity);</span><br><span class=\"line\">                    Destroy(gameObject);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> RockStates.HitNothing:</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"literal\">default</span>:</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><strong>Á≤íÂ≠êÁâπÊïà</strong></p>\n<p>Hierarchy &gt; Effects &gt; Particle System</p>\n<h3 id=\"Ë°ÄÊù°ÊòæÁ§∫-HealthBar\"><a href=\"#Ë°ÄÊù°ÊòæÁ§∫-HealthBar\" class=\"headerlink\" title=\"Ë°ÄÊù°ÊòæÁ§∫ HealthBar\"></a>Ë°ÄÊù°ÊòæÁ§∫ HealthBar</h3><p><strong>ÊåÇËΩΩÂú®enemyË∫´‰∏ä</strong></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.UI;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">HealthBar</span> : <span class=\"title\">MonoBehaviour</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> GameObject healthBarUiPerfab;</span><br><span class=\"line\">\t<span class=\"comment\">//Ë°ÄÊù°ÁöÑ‰ΩçÁΩÆÔºåenemyËÆæÁΩÆ‰∏Ä‰∏™Á©∫ÂØπË±°ÔºåË∞ÉÊï¥‰ΩçÁΩÆ‰∏∫Â§¥ÈÉ®‰∏äÊñπ</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Transform barPoint;</span><br><span class=\"line\">    <span class=\"comment\">//ÊòØÂê¶‰∏ÄÁõ¥ÊòæÁ§∫ ÊòæÁ§∫ÁöÑÊó∂Èïø</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">bool</span> alwaysVisible;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> visibleTime;</span><br><span class=\"line\">    <span class=\"built_in\">float</span> timeLeft;</span><br><span class=\"line\"></span><br><span class=\"line\">    Image healthSlider;</span><br><span class=\"line\">    Transform UIBar;</span><br><span class=\"line\">    Transform cam;</span><br><span class=\"line\">    CharacterStats currentStats;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">Awake</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//Ëé∑ÂèñÁªÑ‰ª∂</span></span><br><span class=\"line\">        currentStats = GetComponent&lt;CharacterStats&gt;();</span><br><span class=\"line\">        <span class=\"comment\">//Ê∑ªÂä†‰∫ãÂä°</span></span><br><span class=\"line\">        currentStats.UpdateHealthBarOnAttack += UpdateHealthBar;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">OnEnable</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        cam = Camera.main.transform;</span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"function\">Canvas canvas <span class=\"keyword\">in</span> <span class=\"title\">FindObjectsOfType</span>&lt;<span class=\"title\">Canvas</span>&gt;(<span class=\"params\"></span>))</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (canvas.renderMode == RenderMode.WorldSpace)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                UIBar = Instantiate(healthBarUiPerfab, canvas.transform).transform;</span><br><span class=\"line\">                healthSlider = UIBar.GetChild(<span class=\"number\">0</span>).GetComponent&lt;Image&gt;();</span><br><span class=\"line\">                UIBar.gameObject.SetActive(alwaysVisible);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">UpdateHealthBar</span>(<span class=\"params\"><span class=\"built_in\">int</span> currentHealth, <span class=\"built_in\">int</span> Maxhealth</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (currentHealth &lt;= <span class=\"number\">0</span>)</span><br><span class=\"line\">            Destroy(UIBar.gameObject);</span><br><span class=\"line\"></span><br><span class=\"line\">        UIBar.gameObject.SetActive(<span class=\"literal\">true</span>);</span><br><span class=\"line\">        <span class=\"comment\">//ÊîªÂáªÊó∂ÈáçÁΩÆÊòæÁ§∫Ââ©‰ΩôÊó∂Èó¥</span></span><br><span class=\"line\">        timeLeft = visibleTime;</span><br><span class=\"line\">        <span class=\"built_in\">float</span> sliderPercent = (<span class=\"built_in\">float</span>)currentHealth / Maxhealth;</span><br><span class=\"line\">        <span class=\"comment\">//image TypeËÆæÁΩÆ‰∏∫FilledÔºåfillmethodËÆæÁΩÆ‰∏∫Horizontal</span></span><br><span class=\"line\">        healthSlider.fillAmount = sliderPercent;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">LateUpdate</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (UIBar != <span class=\"literal\">null</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"comment\">//‰ΩçÁΩÆ</span></span><br><span class=\"line\">            UIBar.position = barPoint.position;</span><br><span class=\"line\">            <span class=\"comment\">//uiÁöÑÊñπÂêë‰∏éÊëÑÂÉèÊú∫ÁöÑÊñπÂêëÁõ∏Âèç</span></span><br><span class=\"line\">            UIBar.forward = -cam.forward;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (timeLeft &lt;= <span class=\"number\">0f</span>&amp;&amp;!alwaysVisible)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                UIBar.gameObject.SetActive(<span class=\"literal\">false</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span></span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                timeLeft -= Time.deltaTime;</span><br><span class=\"line\"></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"PlayerUI\"><a href=\"#PlayerUI\" class=\"headerlink\" title=\"PlayerUI\"></a>PlayerUI</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.UI;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">PlayHealthBar</span> : <span class=\"title\">MonoBehaviour</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    Text level;</span><br><span class=\"line\">    Image healthSlider;</span><br><span class=\"line\">    Image expSlider;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">Awake</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        level = transform.GetChild(<span class=\"number\">2</span>).GetComponent&lt;Text&gt;();</span><br><span class=\"line\">        healthSlider = transform.GetChild(<span class=\"number\">0</span>).GetChild(<span class=\"number\">0</span>).GetComponent&lt;Image&gt;();</span><br><span class=\"line\">        expSlider = transform.GetChild(<span class=\"number\">1</span>).GetChild(<span class=\"number\">0</span>).GetComponent&lt;Image&gt;();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">LateUpdate</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        level.text = <span class=\"string\">&quot;Level  &quot;</span> + GameManager.Instance.playerStats.character.currentLevel.ToString(<span class=\"string\">&quot;00&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        UpdateHealth();</span><br><span class=\"line\"></span><br><span class=\"line\">        UpdateExp();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">UpdateHealth</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">float</span> sliderPercent = (<span class=\"built_in\">float</span>)GameManager.Instance.playerStats.CurrentHealth / GameManager.Instance.playerStats.MaxHealth;</span><br><span class=\"line\">        healthSlider.fillAmount = sliderPercent;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">UpdateExp</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">float</span> sliderPercent = (<span class=\"built_in\">float</span>)GameManager.Instance.playerStats.character.currentExp / GameManager.Instance.playerStats.character.baseExp;</span><br><span class=\"line\">        expSlider.fillAmount = sliderPercent;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ËÆæÁΩÆuiÊó∂ÔºåÈ¶ñÂÖàÈúÄË¶ÅË∞ÉÊï¥CanvasÁöÑScaler</p>\n<p>UI Scale ModeËÆæÁΩÆ‰∏∫Scale With Screen Size,MatchËÆæÁΩÆ‰∏∫0.5ÔºåÂêåÊó∂ÂÖºÈ°æÈ´òÂ∫¶ÂíåÂÆΩÂ∫¶</p>\n</blockquote>\n<blockquote>\n<p>CanvasÊúâ‰∏™Canvas GroupÁªÑ‰ª∂ÔºåÂèØ‰ª•ËÆæÁΩÆÂèñÊ∂àÈòªÊå°Â∞ÑÁ∫ø</p>\n<p>‰πüÂèØ‰ª•ÈÄöËøáË∞ÉÊï¥AlphaÁöÑÂÄºÂéªÂÅöËΩ¨Âú∫</p>\n</blockquote>\n<h3 id=\"‰º†ÈÄÅÈó®\"><a href=\"#‰º†ÈÄÅÈó®\" class=\"headerlink\" title=\"‰º†ÈÄÅÈó®\"></a>‰º†ÈÄÅÈó®</h3><p>‰ΩøÁî®lit shader</p>\n<p>shaderÂà∂‰ΩúÊàêÊùêË¥®ÔºåÂàõÂª∫‰∏Ä‰∏™3D &gt; planeÔºåÊãñÊãΩËµã‰∫àËøô‰∏™ÊùêË¥®ÔºåÂπ∂ÁîüÊàê‰∏Ä‰∏™‰º†ÈÄÅÁÇπ‰ΩçÁΩÆ</p>\n<p>Êûö‰∏æÁ±ª</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">TransitionDestination</span> : <span class=\"title\">MonoBehaviour</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">enum</span> DestinationTag &#123; Enter,A,B,C&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> DestinationTag destinationTag;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">TransiationPoint</span> : <span class=\"title\">MonoBehaviour</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">enum</span> TransitionType &#123; SameScence,DifferentScence&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    [<span class=\"meta\">Header(<span class=\"meta-string\">&quot;Transition Info&quot;</span>)</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">string</span> scenceName;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> TransitionType transitionType;</span><br><span class=\"line\">    <span class=\"comment\">//Êûö‰∏æÁªàÁÇπÁºñÂè∑</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> TransitionDestination.DestinationTag destinationTag;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">bool</span> canTrans;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">Update</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (Input.GetKeyDown(KeyCode.E) &amp;&amp; canTrans)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            ScenceController.Instance.TransitionToDestination(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">OnTriggerStay</span>(<span class=\"params\">Collider other</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (other.CompareTag(<span class=\"string\">&quot;Player&quot;</span>))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            canTrans = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">OnTriggerExit</span>(<span class=\"params\">Collider other</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (other.CompareTag(<span class=\"string\">&quot;Player&quot;</span>))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            canTrans = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>ÂÆûÁé∞Âú∫ÊôØËΩ¨Êç¢</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.SceneManagement;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.AI;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">ScenceController</span> : <span class=\"title\">SingleTon</span>&lt;<span class=\"title\">ScenceController</span>&gt;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    GameObject player;</span><br><span class=\"line\">    NavMeshAgent playerAgent;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">TransitionToDestination</span>(<span class=\"params\">TransiationPoint transiationPoint</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (transiationPoint.transitionType)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> TransiationPoint.TransitionType.SameScence:</span><br><span class=\"line\">                StartCoroutine(Transition(SceneManager.GetActiveScene().name, transiationPoint.destinationTag));</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> TransiationPoint.TransitionType.DifferentScence:</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"literal\">default</span>:</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\">IEnumerator <span class=\"title\">Transition</span>(<span class=\"params\"><span class=\"built_in\">string</span> scenceName,TransitionDestination.DestinationTag destinationTag</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        player = GameManager.Instance.playerStats.gameObject;</span><br><span class=\"line\"></span><br><span class=\"line\">        playerAgent = player.GetComponent&lt;NavMeshAgent&gt;();</span><br><span class=\"line\">        playerAgent.isStopped = <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"comment\">//ËÆæÁΩÆ‰ΩçÁΩÆ‰∏éÊñπÂêëtransform.SetPositionAndRotationÔºàÔºâ</span></span><br><span class=\"line\">        player.transform.SetPositionAndRotation(GetDestination(destinationTag).transform.position, GetDestination(destinationTag).transform.rotation);</span><br><span class=\"line\">        <span class=\"keyword\">yield</span> <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">    <span class=\"comment\">//ÈÅçÂéÜËé∑ÂèñÁªàÁÇπÁöÑ‰ø°ÊÅØ</span></span><br><span class=\"line\">    <span class=\"function\">TransitionDestination <span class=\"title\">GetDestination</span>(<span class=\"params\">TransitionDestination.DestinationTag destinationTag</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> entrances = FindObjectsOfType&lt;TransitionDestination&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"keyword\">var</span> item <span class=\"keyword\">in</span> entrances)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (item.destinationTag == destinationTag)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> item;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"‰øùÂ≠òÊï∞ÊçÆ\"><a href=\"#‰øùÂ≠òÊï∞ÊçÆ\" class=\"headerlink\" title=\"‰øùÂ≠òÊï∞ÊçÆ\"></a>‰øùÂ≠òÊï∞ÊçÆ</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">SaveManager</span> : <span class=\"title\">SingleTon</span>&lt;<span class=\"title\">SaveManager</span>&gt;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">Update</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (Input.GetKeyDown(KeyCode.K))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            Save(GameManager.Instance.playerStats.character, GameManager.Instance.playerStats.name);</span><br><span class=\"line\">            Debug.Log(GameManager.Instance.playerStats.name);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (Input.GetKeyDown(KeyCode.L))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            Load(GameManager.Instance.playerStats.character, GameManager.Instance.playerStats.name);</span><br><span class=\"line\">            </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">Save</span>(<span class=\"params\"><span class=\"built_in\">object</span> data,<span class=\"built_in\">string</span> key</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//Êï∞ÊçÆËΩ¨Êàêjson</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> jsonData = JsonUtility.ToJson(data, <span class=\"literal\">true</span>);</span><br><span class=\"line\">        <span class=\"comment\">//jsonËΩ¨Êàê‰∫åËøõÂà∂</span></span><br><span class=\"line\">        PlayerPrefs.SetString(key, jsonData);</span><br><span class=\"line\">        PlayerPrefs.Save();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">Load</span>(<span class=\"params\"><span class=\"built_in\">object</span> data, <span class=\"built_in\">string</span> key</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (PlayerPrefs.HasKey(key))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"comment\">//PlayerPrefs.GetString(key)Â∞Ü‰∫åËøõÂà∂ËΩ¨‰∏∫jsonÔºåË¶ÜÁõñÂà∞data‰∏ä</span></span><br><span class=\"line\">            JsonUtility.FromJsonOverwrite(PlayerPrefs.GetString(key), data);</span><br><span class=\"line\">            Debug.Log(<span class=\"string\">&quot;111&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"3DURPÊ∏∏ÊàèÂà∂‰ΩúÁ¨îËÆ∞\"><a href=\"#3DURPÊ∏∏ÊàèÂà∂‰ΩúÁ¨îËÆ∞\" class=\"headerlink\" title=\"3DURPÊ∏∏ÊàèÂà∂‰ΩúÁ¨îËÆ∞\"></a>3DURPÊ∏∏ÊàèÂà∂‰ΩúÁ¨îËÆ∞</h1><blockquote>\n<p>ÊÑüË∞¢È∫¶Êâ£ËÄÅÂ∏àÔºÅÔºÅÔºÅ</p>\n<p><a href=\"https://space.bilibili.com/370283072\">bÁ´ôÂú∞ÂùÄ</a></p>\n<p>Ëøô‰∫õÊòØÊàëË∑üÁùÄÂ≠¶‰π†Êï≤Âæó‰ª£Á†ÅÔºåÊúâ‰∫õÂèØËÉΩ‰∏ç‰∏ÄÊ†∑ÔºåÂÆåÂÖ®Â§çÂà∂ËÇØÂÆö‰ºöÊúâÈóÆÈ¢òÔºå‰∏ªË¶ÅÁî®Êù•ÁªôÂ≠¶‰π†ÁöÑÂêåÂ≠¶Á∫†Èîô</p>\n</blockquote>\n<h3 id=\"Ê∏∏ÊàèÁöÑÂàõÂª∫‰∏éÂú∞ÂõæÁöÑÈì∫ËÆæ\"><a href=\"#Ê∏∏ÊàèÁöÑÂàõÂª∫‰∏éÂú∞ÂõæÁöÑÈì∫ËÆæ\" class=\"headerlink\" title=\"Ê∏∏ÊàèÁöÑÂàõÂª∫‰∏éÂú∞ÂõæÁöÑÈì∫ËÆæ\"></a>Ê∏∏ÊàèÁöÑÂàõÂª∫‰∏éÂú∞ÂõæÁöÑÈì∫ËÆæ</h3><p>‰ΩøÁî®Âà∞ÁöÑÊèí‰ª∂Êúâ<strong>Pro Grids</strong>,<strong>ProBuilder</strong>,<strong>PloyBrush</strong></p>\n<ol>\n<li><p>‰ΩøÁî®Âà∞ÁöÑÂú∞ÂõæÊ®°Êùø‰∏∫Ê≠£Â∏∏Ê®°ÊùøÔºåÁÑ∂ÂêéÂú®ProjectÊñá‰ª∂Â§π‰∏≠Êñ∞Âª∫URP„ÄÇ</p>\n</li>\n<li><p>Âè≥‰∏äËßíEdit &gt; Project Setting</p>\n<ol>\n<li>Â∞ÜGraphicsÁöÑScirptable Render Pipeline Settings‰øÆÊîπ‰∏∫ÂàõÂª∫ÁöÑ<strong>UniversalRenderPiepelineAsset</strong></li>\n<li>QualityÁöÑRendering‰øÆÊîπ‰∏∫ÂàõÂª∫ÁöÑ<strong>UniversalRenderPiepelineAsset</strong></li>\n</ol>\n</li>\n<li><p>‰ΩøÁî®Á¥†ÊùêÊó∂ÔºåÂçáÁ∫ßÁ¥†ÊùêÁöÑURP„ÄÇEdit &gt; Render Pipeline &gt; Universal Render Pipeline &gt; Upgrade Project Materials To UniversalRP Materials</p>\n</li>\n<li><p>ÂÖâÁÖßÁöÑËÆæÁΩÆ Windows &gt; Rendering &gt;Lighting„ÄÇÂú®SceneÁ™óÂè£ÁîüÊàê‰∏Ä‰∏™New Lighting Settings„ÄÇLighting Mode‰∏ÄËà¨‰∏∫Baked IndirectÔºàÁÆÄ‰ªãÁÉòÁÑôÔºâÔºåLightmapper‰∏ÄËà¨ÈÄâÊã©‰∏∫GPUÔºåÂèñÊ∂àÂãæÈÄâAuto GenerateÔºåÁÑ∂ÂêéËøõË°åGenerate Lighting„ÄÇ</p>\n<blockquote>\n<p>Â¶ÇÊûúÂèëÁîüÂú∫ÊôØÈ¢úËâ≤ÂèëÁîüÊîπÂèòÔºå‰∏çÊòØÂéüÊú¨ÁöÑÈ¢úËâ≤ÔºåÂèØ‰ª•Âú®Lighting &gt; EnvironmentÈáåÈÄâÊã© Environment Lighting &gt; Source ËÆæÁΩÆ‰∏∫Color„ÄÇ</p>\n</blockquote>\n</li>\n<li><p>Ë∞ÉÊï¥ÊëÑÂÉèÊú∫ÁöÑÊäÄÂ∑ßÔºöCtrl + Shift + FÔºåË∞ÉÊï¥Áâ©‰ΩìÂùêÊ†áËΩ¥Âê∏ÈôÑ VÈîÆ„ÄÇ</p>\n</li>\n<li><p>ÂØºÂÖ•Êèí‰ª∂<strong>PloyBrush</strong>Âπ∂‰∏îÂú®ÂØºÂÖ•Êó∂Â∞ÜSample‰∏≠ÁöÑURPÊñá‰ª∂‰∏ÄÂπ∂ÂØºÂÖ•„ÄÇ </p>\n<blockquote>\n<p>‰ΩøÁî®PloybrushÁöÑÁ¨îÂà∑Âà∑È¢úËâ≤ÁöÑÊó∂ÂÄôÔºåÂèëÁé∞Âà∑‰∏ç‰∏äÈ¢úËâ≤ÁöÑÂéüÂõ†ÊòØÔºåÁâ©‰ΩìÁöÑÊùêË¥®Âπ∂Ê≤°Êúâ‰ΩøÁî®PloybrushÁöÑshaderÂàõÂª∫ÁöÑÊùêË¥®ÔºåÁî®shaderÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÊùêË¥®Âπ∂‰øÆÊîπÁâ©‰ΩìÁöÑÊùêË¥®ÔºàÊãñÊãΩ‰πüÂèØ‰ª•ÔºâÔºåÁÑ∂ÂêéËøõË°åÈ¢úËâ≤ÁöÑÊ∂ÇÊäπ</p>\n</blockquote>\n</li>\n<li><p>Âπ≥Âè∞ÁöÑÂ§ßÂ∞èÂíåÂ∞ëÊï∞ÁöÑÈ°∂ÁÇπÂΩ±Âìç‰∫ÜÂú∞ÂõæÁöÑÂàõ‰ΩúÔºåÊâÄ‰ª•ÈúÄË¶Å<strong>Probuilder</strong>Êù•ÁîüÊàêÊõ¥Á≤æËá¥ÁöÑÂú∞ÂõæÂπ≥Âè∞</p>\n<blockquote>\n<p>ÂêåÊó∂Êåâ‰Ωè<strong>Ctrl</strong>Âíå<strong>Alt</strong>ÈîÆÁÇπÂáªIconÁöÑÈΩøËΩÆÔºå‰ºöË∞ÉÂá∫ÂçïÁã¨ÁöÑËÆæÁΩÆ</p>\n<p>‰ΩøÁî®<strong>Center Pivot</strong>ÂèØ‰ª•Ë∞ÉÊï¥‰∏≠ÂøÉÁÇπ</p>\n<p>ÂÖ≥‰∫éÂ¶Ç‰Ωï‰ΩøÁî®preview packageÔºöEdit &gt; Project Setting &gt; Package manager ,<strong>Enable Preview Packages</strong></p>\n</blockquote>\n</li>\n</ol>\n<h3 id=\"Âú∞ÂõæÁöÑÁÉòBake\"><a href=\"#Âú∞ÂõæÁöÑÁÉòBake\" class=\"headerlink\" title=\"Âú∞ÂõæÁöÑÁÉòBake\"></a>Âú∞ÂõæÁöÑÁÉòBake</h3><p>Á™óÂè£Âú® Window &gt; AI &gt; Navigation</p>\n<ol>\n<li><p>ËÆæÁΩÆÂú∞Èù¢‰∏∫Navigation staticÔºåÂú®Navigation &gt; ObjectÈáåÁöÑNavigation Area ËÆæÁΩÆ‰∏∫Walkable„ÄÇ</p>\n<blockquote>\n<ul>\n<li>ÈÄâ‰∏≠Áâ©‰Ωì‰πãÂêéÔºåÂú®InspectorÁ™óÂè£ÈáåÔºåÁ¨¨‰∏ÄË°åÊúâÈÄâÊã©ÊòØÂê¶‰∏∫StaticÔºå‰∏ãÊãâÂèØÈÄâÊã©Á±ªÂûã</li>\n<li>ÈÄâ‰∏≠Áâ©‰Ωì‰πãÂêéÔºåÂú®Navigation &gt; ObjectÈáåËÆæÁΩÆNavigation static‰∏∫<strong>true</strong></li>\n</ul>\n</blockquote>\n</li>\n<li><p>ÈÄâ‰∏≠‰∏çÂèØÁßªÂä®ÁöÑÁâ©‰ΩìÔºåÊØîÂ¶ÇÊ†ëÊú®Áü≥Â§¥Á≠âÔºåÊâπÈáèËÆæÁΩÆ‰∏∫Navigation staticÔºåÁâπÊÆäÁöÑÈô§Â§ñ„ÄÇ</p>\n</li>\n<li><p>‰∏∫ËßíËâ≤Ê∑ªÂä†Navigation agent ÁªÑ‰ª∂ÔºåËÆæÁΩÆ‰∫∫Áâ©ÁöÑÂúÜÊü±‰ΩìÂ§ßÂ∞è‰ª•ÂèäÂÆΩÂ∫¶„ÄÇ</p>\n</li>\n<li><p>Âú®Navigation &gt; Bake ÈáåÂêåÊ†∑ËÆæÁΩÆ‰∏∫‰∫∫Áâ©ÁöÑÂúÜÊü±‰ΩìÂ§ßÂ∞è‰ª•ÂèäÂÆΩÂ∫¶Á≠âÂÖ∂‰ªñÊï∞ÊçÆÔºåÁÑ∂ÂêéÁÇπÂáªbakeÔºåÂú®Âú∞Âõæ‰∏äÊòæÁ§∫‰∏∫ËìùËâ≤ÁöÑ‰∏∫ÂèØwalkÂå∫Âüü„ÄÇ</p>\n</li>\n<li><p>Â¶ÇÊûúÊúâÁâ©‰ΩìÂèØ‰ª•ÁßªÂä®ÔºåÂπ∂‰∏î‰∏çÊÉ≥ÂèëÁîüÁ©øÊ®°ÊïàÊûúÔºåÂèØÈÄâÊã©Ê∑ªÂä†ÁªÑ‰ª∂Nav Mesh Obstacle,ËÆæÁΩÆCarve‰∏∫<strong>True</strong>ÔºåÂ∞±‰ºöÂú®Âú∞Èù¢ÂêåÊó∂ÂàáÂâ≤Âá∫‰∏ÄÈÉ®ÂàÜÔºå‰∫∫Áâ©‰∏çÂèØwalkÁöÑÂå∫Âüü„ÄÇ</p>\n</li>\n</ol>\n<h3 id=\"Èº†Ê†áÊéßÂà∂ÁßªÂä®‰ª•ÂèäË¥¥Âõæ\"><a href=\"#Èº†Ê†áÊéßÂà∂ÁßªÂä®‰ª•ÂèäË¥¥Âõæ\" class=\"headerlink\" title=\"Èº†Ê†áÊéßÂà∂ÁßªÂä®‰ª•ÂèäË¥¥Âõæ\"></a>Èº†Ê†áÊéßÂà∂ÁßªÂä®‰ª•ÂèäË¥¥Âõæ</h3><p><strong>ÊâÄÊúâÁÆ°ÁêÜÁ±ªÈÉΩ‰∏çË¶ÅÂøò‰∫ÜÂú®Ê∏∏ÊàèÈáåÂàõÂª∫‰∏Ä‰∏™Á©∫ÂØπË±°ÔºåÊ∑ªÂä†‰∏äËÑöÊú¨</strong></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">MouseManager</span> : <span class=\"title\">SingleTon</span>&lt;<span class=\"title\">MouseManager</span>&gt;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">//‰∫ãÂä°ÂßîÊâò</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">event</span> Action&lt;Vector3&gt; OnMouseClicked;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">event</span> Action&lt;GameObject&gt; OnClickedEnemy;</span><br><span class=\"line\"></span><br><span class=\"line\">    RaycastHit hitInfo;</span><br><span class=\"line\">\t<span class=\"comment\">//Èº†Ê†áË¥¥Âõæ</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Texture2D point, doorway, attack, target, arrow;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">override</span> <span class=\"keyword\">void</span> <span class=\"title\">Awake</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">base</span>.Awake();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Update</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        SetCursorTexture();</span><br><span class=\"line\">        MouseControl();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">SetCursorTexture</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        Ray ray = Camera.main.ScreenPointToRay(Input.mousePosition);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(Physics.Raycast(ray,<span class=\"keyword\">out</span> hitInfo))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"comment\">//ÂàáÊç¢Èº†Ê†áË¥¥Âõæ</span></span><br><span class=\"line\">            <span class=\"keyword\">switch</span> (hitInfo.collider.gameObject.tag)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"string\">&quot;Ground&quot;</span>:</span><br><span class=\"line\">                    Cursor.SetCursor(target, <span class=\"keyword\">new</span> Vector2(<span class=\"number\">16</span>, <span class=\"number\">16</span>),CursorMode.Auto);</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"string\">&quot;Enemy&quot;</span>:</span><br><span class=\"line\">                    Cursor.SetCursor(attack, <span class=\"keyword\">new</span> Vector2(<span class=\"number\">2</span>, <span class=\"number\">2</span>), CursorMode.Auto);</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"string\">&quot;Attackable&quot;</span>:</span><br><span class=\"line\">                    Cursor.SetCursor(attack, <span class=\"keyword\">new</span> Vector2(<span class=\"number\">2</span>, <span class=\"number\">2</span>), CursorMode.Auto);</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"string\">&quot;Portal&quot;</span>:</span><br><span class=\"line\">                    Cursor.SetCursor(doorway, <span class=\"keyword\">new</span> Vector2(<span class=\"number\">2</span>, <span class=\"number\">2</span>), CursorMode.Auto);</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">MouseControl</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (Input.GetMouseButtonDown(<span class=\"number\">0</span>) &amp;&amp; hitInfo.collider != <span class=\"literal\">null</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (hitInfo.collider.gameObject.CompareTag(<span class=\"string\">&quot;Ground&quot;</span>))</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                OnMouseClicked?.Invoke(hitInfo.point);</span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (hitInfo.collider.gameObject.CompareTag(<span class=\"string\">&quot;Enemy&quot;</span>))</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                OnClickedEnemy?.Invoke(hitInfo.collider.gameObject);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (hitInfo.collider.gameObject.CompareTag(<span class=\"string\">&quot;Attackable&quot;</span>))</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                OnClickedEnemy?.Invoke(hitInfo.collider.gameObject);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (hitInfo.collider.gameObject.CompareTag(<span class=\"string\">&quot;Portal&quot;</span>))</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                OnMouseClicked?.Invoke(hitInfo.point);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><strong>ÂÖ≥‰∫éÈº†Ê†áÁöÑË¥¥Âõæ</strong></p>\n<p>Èº†Ê†áË¥¥Âõæ‰∏∫<strong>Texture</strong>,‰∏ÄËà¨‰∏∫Êó†ËÉåÊôØÁöÑÂõæÁâáÔºåÂä†ËΩΩÂà∞Unity‰πãÂêéÔºåÈÄâ‰∏≠Ë¥¥ÂõæÂπ∂ÊääTexture type‰øÆÊîπ‰∏∫<strong>Cursor</strong>„ÄÇ</p>\n<h3 id=\"Cineramachine\"><a href=\"#Cineramachine\" class=\"headerlink\" title=\"Cineramachine\"></a>Cineramachine</h3><p>ÈÄâ‰∏≠Main cameraÔºåGameobject &gt; Align View to Selected,Â∞Ü‰∏ªÁõ∏Êú∫ÈîÅÂÆöËßÜËßí</p>\n<p>Áä∂ÊÄÅÊ†èCineramachineÈÄâÊã©‰∏Ä‰∏™ÂêàÈÄÇÁöÑÊëÑÂÉèÊú∫ ÔºåÂΩìÂâçÈÄâÊã©ÁöÑ‰∏∫CinemachineVirtualCanmera,ÂèñÊ∂à‰∏ªÊëÑÂÉèÊú∫ÁöÑAudio ListenerÔºåBodyÈÄâÊã©Framing Transposer,AimÈÄâÊã©Nothing</p>\n<p>Follow ÈÄâÊã©‰∏∫‰∫∫Áâ©ÂØπË±° ÔºåÂ¶ÇÊûú‰∫∫Áâ©ÂùêÊ†áËΩ¥Âú®‰∏ãÊñπÔºåÂèØ‰ª•Âú®‰∫∫Áâ©ÂØπË±°ÈáåÊñ∞Âª∫‰∏Ä‰∏™Á©∫Áâ©‰ΩìÔºåÁÑ∂ÂêéÂ∞ÜÂùêÊ†áËΩ¥ÁßªÂä®Âà∞‰∫∫Áâ©‰∏≠ÂøÉ‰ΩçÁΩÆÔºåÂ∞ÜÁâ©‰ΩìÊãñÊãΩÂà∞<strong>Follow</strong>„ÄÇ</p>\n<blockquote>\n<p><strong>BODY</strong></p>\n<ul>\n<li>Do NothingÔºö‰∏çÁßªÂä®ËôöÊãüÁõ∏Êú∫</li>\n<li>Framing TransposerÔºöË∑üÈöèÁõÆÊ†áÁßªÂä®ÔºåÂπ∂Âú®Â±èÂπïÁ©∫Èó¥‰øùÊåÅÁõ∏Êú∫ÂíåË∑üÈöèÁõÆÊ†áÁöÑÁõ∏ÂØπ‰ΩçÁΩÆ„ÄÇ</li>\n<li>Hard Lock to TargetÔºöËôöÊãüÁõ∏Êú∫ÂíåË∑üÈöèÁõÆÊ†á‰ΩøÁî®Áõ∏Âêå‰ΩçÁΩÆ„ÄÇ</li>\n<li>Orbital TransposerÔºöÁõ∏Êú∫ÂíåË∑üÈöèÁõÆÊ†áÁöÑÁõ∏ÂØπ‰ΩçÁΩÆÊòØÂèØÂèòÁöÑÔºåËøòËÉΩÊé•Êî∂Áî®Êà∑ÁöÑËæìÂÖ•„ÄÇÂ∏∏ËßÅ‰∫éÁé©ÂÆ∂ÊéßÂà∂ÁöÑÁõ∏Êú∫„ÄÇ</li>\n<li>Tracked DollyÔºöÁõ∏Êú∫Ê≤øÁùÄÈ¢ÑÂÖàËÆæÁΩÆÁöÑËΩ®ÈÅìÁßªÂä®„ÄÇ</li>\n<li>TransposerÔºöË∑üÈöèÁõÆÊ†áÁßªÂä®ÔºåÂπ∂Âú®‰∏ñÁïåÁ©∫Èó¥‰øùÊåÅÁõ∏Êú∫ÂíåË∑üÈöèÁõÆÊ†áÁöÑÁõ∏ÂØπ‰ΩçÁΩÆÂõ∫ÂÆö„ÄÇ</li>\n</ul>\n<p><strong>AIM</strong></p>\n<ul>\n<li><p>Do Nothing: ‰∏çÊéßÂà∂Áõ∏Êú∫ÁöÑÊóãËΩ¨„ÄÇ</p>\n</li>\n<li><p>Composer: ‰øùÊåÅÁõÆÊ†áÁâ©‰ΩìÂú®ÈïúÂ§¥ÂÜÖ</p>\n</li>\n<li><p>Group Composer: ‰øùÊåÅÂ§ö‰∏™ÁõÆÊ†áÂú®ÈïúÂ§¥ÂÜÖ</p>\n</li>\n<li><p>Hard Look At: ‰øùÊåÅÁõÆÊ†áÂú®ÈïúÂ§¥ÁöÑ‰∏≠ÂøÉ</p>\n</li>\n<li><p>POV: Âü∫‰∫éÁé©ÂÆ∂ÁöÑËæìÂÖ•ÊóãËΩ¨Áõ∏Êú∫</p>\n</li>\n</ul>\n</blockquote>\n<p><strong>Ê∑ªÂä†ÁéØÂ¢ÉËø∑Èõæ</strong></p>\n<p>Window &gt; Rendering &gt; Lighting &gt; Environment &gt; FogËÆæÁΩÆ‰∏∫True</p>\n<blockquote>\n<p>Â¶ÇÊûúSenceÂú∫ÊôØÊ≤°ÊúâÊòæÁ§∫FogÔºåÂàôÈúÄË¶ÅÂú®Á™óÂè£‰∏≠ÊâìÂºÄFogÂºÄÂÖ≥</p>\n<p>ModeÔºöLinear ‰∏∫ÊúÄËøëÊúÄËøúÂ§ÑËÉΩËßÅÂ∫¶</p>\n</blockquote>\n<p><strong>Global</strong> <strong>Volume</strong></p>\n<p>ÂØπÂú∫ÊôØËøõË°åÂêéÂ§ÑÁêÜÔºåadd ÂÖ∂‰ªñÂäüËÉΩÂØπÂú∫ÊôØËøõË°åÊ∏≤Êüì</p>\n<blockquote>\n<p>Â¶ÇÊûúÂú∫ÊôØÊ≤°ÊúâÊòæÁ§∫Âá∫ÊïàÊûúÔºåÂú®Main Camera &gt; Rendering &gt; Post Peocessing ËÆæÁΩÆ‰∏∫True</p>\n</blockquote>\n<h3 id=\"ÈÅÆÊå°ÂâîÈô§\"><a href=\"#ÈÅÆÊå°ÂâîÈô§\" class=\"headerlink\" title=\"ÈÅÆÊå°ÂâîÈô§\"></a>ÈÅÆÊå°ÂâîÈô§</h3><p>ÈÄöËøá<strong>Shader</strong>ÂàõÂª∫ÊùêË¥®ÊîæÂÖ•Âà∞URPÁöÑ UniversalRenderPipelineAsset_Renderer ÔºåÊñ∞Âª∫Add Renderer Feature,ÈÄâÊã©Ë¢´ÈÅÆÊå°ÁöÑLayer MaskÔºåÂèØ‰ª•Â§öÈÄâÔºåÁÑ∂ÂêéËÆæÁΩÆË¢´ÈÅÆÊå°ÂêéÁöÑÊùêË¥®ÔºåDepthËÆæÁΩÆ‰∏∫TrueÔºåDepth TestËÆæÁΩÆ‰∏∫Greater„ÄÇÂΩìË¢´ÈÅÆÊå°Áâ©‰ΩìÂ±ÇÁ∫ßGreaterÊó∂ÔºåÊòæÁ§∫Ë¢´ÈÅÆÊå°ÂêéÁöÑÊùêË¥®„ÄÇ</p>\n<p>ÂêåÊ†∑Add Renderer FeatureÔºåÈÄâÊã©Áõ∏ÂêåË¢´ÈÅÆÊå°ÁöÑLayer MaskÔºåÂÖ∂‰ªñ‰∏çÂÅö‰øÆÊîπÔºåÂΩì‰∏çË¢´ÈÅÆÊå°Êó∂ÊòæÁ§∫ÂéüÊúâÊùêË¥®</p>\n<p><strong>ÂÖ≥‰∫éÈÅÆÊå°ÊùêË¥®ÁöÑÂà∂‰Ωú</strong></p>\n<p>shaderÂàõÂª∫ÔºöProject &gt; Âè≥ÈîÆ &gt; Shader &gt; URP &gt;UnLit Shader Graph</p>\n<blockquote>\n<p>Graph Inspector &gt; Grapj Settings &gt; Universal &gt; Alpha Clip,ÊâìÂºÄAlphaÈÄèÊòéÈÄöÈÅì</p>\n</blockquote>\n<ol>\n<li>‰ΩøÁî®Fresnel Effect Âà∂‰ΩúÈÅÆÊå°ÁöÑÊïàÊûúÔºåÈÄöËøáÊñ∞Âª∫ÂèòÈáèColor‰øÆÊîπÈ¢úËâ≤„ÄÇÈÄöËøáMultiplyÊ∑∑ÂêàÔºå‰º†ÁªôBase color„ÄÇ</li>\n<li>DitherÂà∂‰ΩúÂô™ÁÇπÊïàÊûúÔºåÊñ∞Âª∫Float‰øÆÊîπDitherÁöÑXÂÄºÔºåout‰º†ÁªôFragment &gt; AlphaÈÄöÈÅì</li>\n<li>ÂàõÂª∫Flaot ‰øÆÊîπAlpha Threshold„ÄÇ</li>\n<li>ÈÄâÊã©ShaderÂàõÂª∫ÊùêË¥®</li>\n</ol>\n<p><strong>ÂÖ≥‰∫éÈº†Ê†áÂ∞ÑÁ∫øÈÅÆÊå°</strong></p>\n<ul>\n<li>ÈÄâ‰∏≠ÈÅÆÊå°ÁöÑÁâ©‰ΩìÔºåËÆæÁΩÆÂ±ÇÁ∫ß‰∏∫Ignore Raycast</li>\n<li>ÂÖ≥Èó≠ÈÅÆÊå°Áâ©‰ΩìÁöÑMesh Collider</li>\n</ul>\n<h3 id=\"EnemyController\"><a href=\"#EnemyController\" class=\"headerlink\" title=\"EnemyController\"></a>EnemyController</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.AI;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"built_in\">enum</span> EnemyStates &#123;GUARD,PARTOL,CHASE,DEAD &#125;</span><br><span class=\"line\"><span class=\"comment\">//ÈÄöËøá‰ª£Á†ÅÊ∑ªÂä†ÁªÑ‰ª∂</span></span><br><span class=\"line\">[<span class=\"meta\">RequireComponent(typeof(NavMeshAgent))</span>]</span><br><span class=\"line\">[<span class=\"meta\">RequireComponent(typeof(CharacterStats))</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//‰ΩøÁî®Êé•Âè£</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">EnemyController</span> : <span class=\"title\">MonoBehaviour</span>,<span class=\"title\">IEndGameObserver</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    NavMeshAgent agent;</span><br><span class=\"line\">    EnemyStates enemyStates;</span><br><span class=\"line\">    Animator anim;</span><br><span class=\"line\">    <span class=\"keyword\">protected</span> CharacterStats characterStats;</span><br><span class=\"line\">    Collider coll;</span><br><span class=\"line\">    <span class=\"comment\">//ÊîªÂáªËåÉÂõ¥ </span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> sightRadius;</span><br><span class=\"line\">    <span class=\"comment\">//Â∑°ÈÄªËåÉÂõ¥</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> partolRadius;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">bool</span> isGuard;</span><br><span class=\"line\">    <span class=\"comment\">//Â∑°ÈÄªÂÅúÁïôÊó∂Èó¥</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> lookAtTime;</span><br><span class=\"line\">    <span class=\"built_in\">float</span> remainLookAtTime;</span><br><span class=\"line\">    <span class=\"built_in\">float</span> speed;</span><br><span class=\"line\">    <span class=\"comment\">//cdÊó∂Èó¥</span></span><br><span class=\"line\">    <span class=\"built_in\">float</span> lastAttackTime;</span><br><span class=\"line\">    <span class=\"comment\">//‰∏ã‰∏Ä‰∏™ÂâçÂæÄÁöÑÂ∑°ÈÄªÁÇπ</span></span><br><span class=\"line\">    Vector3 wayPoint;</span><br><span class=\"line\">    <span class=\"comment\">//Ëµ∑ÂßãÁÇπ</span></span><br><span class=\"line\">    Vector3 guardPoint;</span><br><span class=\"line\">    Quaternion guardRotation;</span><br><span class=\"line\">    <span class=\"keyword\">protected</span> GameObject attackTarget;</span><br><span class=\"line\">    <span class=\"built_in\">bool</span> isWalk, isChase, isFollow, isDie;</span><br><span class=\"line\">    <span class=\"built_in\">bool</span> playerDie;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">Awake</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        agent = GetComponent&lt;NavMeshAgent&gt;();</span><br><span class=\"line\">        anim = GetComponent&lt;Animator&gt;();</span><br><span class=\"line\">        characterStats = GetComponent&lt;CharacterStats&gt;();</span><br><span class=\"line\">        coll = GetComponent&lt;Collider&gt;();</span><br><span class=\"line\">        <span class=\"comment\">//‰øùÂ≠òÂéüÊúâÈÄüÂ∫¶Ôºõ</span></span><br><span class=\"line\">        speed = agent.speed;</span><br><span class=\"line\">        guardPoint = transform.position;</span><br><span class=\"line\">        remainLookAtTime = lookAtTime;</span><br><span class=\"line\">        lastAttackTime = characterStats.CoolDown;</span><br><span class=\"line\">        guardRotation = transform.rotation;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Start</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (isGuard)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            enemyStates = EnemyStates.GUARD;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            enemyStates = EnemyStates.PARTOL;</span><br><span class=\"line\">            GetNewPartolPoint();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//Â∞ÜÂØπË±°Ê∑ªÂä†ËøõgamemanagerÈáåÔºåÁî®‰∫éÂπøÊí≠</span></span><br><span class=\"line\">        GameManager.Instance.AddObserver(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Update is called once per frame</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Update</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (characterStats.CurrentHealth == <span class=\"number\">0</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            isDie = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!playerDie)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            SwitchStates();</span><br><span class=\"line\">            SwitchAnim();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (lastAttackTime &gt; <span class=\"number\">0f</span>)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                lastAttackTime -= Time.deltaTime;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">//private void OnEnable()</span></span><br><span class=\"line\">    <span class=\"comment\">//&#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//    Gamemanager.Instance.AddObserver(this);</span></span><br><span class=\"line\">    <span class=\"comment\">//&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">OnDisable</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!GameManager.isInitialized) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        GameManager.Instance.RemoveObserver(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">SwitchStates</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (isDie)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            enemyStates = EnemyStates.DEAD;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (FindPlayer())</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            enemyStates = EnemyStates.CHASE;</span><br><span class=\"line\">            </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (enemyStates)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> EnemyStates.GUARD:</span><br><span class=\"line\">                isChase = <span class=\"literal\">false</span>;</span><br><span class=\"line\">                isWalk = <span class=\"literal\">false</span>;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (transform.position!=guardPoint)</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    isWalk = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                    agent.isStopped = <span class=\"literal\">false</span>;</span><br><span class=\"line\">                    agent.destination = guardPoint;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span>(Vector3.SqrMagnitude(guardPoint - transform.position) &lt;= agent.stoppingDistance)</span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        isWalk = <span class=\"literal\">false</span>;</span><br><span class=\"line\">                        agent.isStopped = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                        <span class=\"comment\">//ÊóãËΩ¨‰ºöÂàùÂßãÁöÑËßíÂ∫¶</span></span><br><span class=\"line\">                        Quaternion.Lerp(transform.rotation, guardRotation, <span class=\"number\">0.1f</span>);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> EnemyStates.PARTOL:</span><br><span class=\"line\">                isChase = <span class=\"literal\">false</span>;</span><br><span class=\"line\">                agent.speed = speed * <span class=\"number\">0.5f</span>;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (Vector3.Distance(transform.position, wayPoint) &lt;= <span class=\"number\">1</span>)</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    isWalk = <span class=\"literal\">false</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (remainLookAtTime &lt; <span class=\"number\">0f</span>)</span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        GetNewPartolPoint();</span><br><span class=\"line\">                        remainLookAtTime = lookAtTime;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">else</span></span><br><span class=\"line\">                        remainLookAtTime -= Time.deltaTime;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">else</span></span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    isWalk = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                    agent.destination = wayPoint;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> EnemyStates.CHASE:</span><br><span class=\"line\"></span><br><span class=\"line\">                agent.speed = speed;</span><br><span class=\"line\">                isWalk = <span class=\"literal\">false</span>;</span><br><span class=\"line\">                isChase = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                <span class=\"comment\">//ËÑ±Êàò</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (!FindPlayer())</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    isFollow = <span class=\"literal\">false</span>;</span><br><span class=\"line\">                    agent.destination = transform.position;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (remainLookAtTime &gt; <span class=\"number\">0</span>)</span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        remainLookAtTime -= Time.deltaTime;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">else</span></span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (isGuard)</span><br><span class=\"line\">                        &#123;</span><br><span class=\"line\">                            enemyStates = EnemyStates.GUARD;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                        <span class=\"keyword\">else</span></span><br><span class=\"line\">                        &#123;</span><br><span class=\"line\">                            enemyStates = EnemyStates.PARTOL;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">else</span></span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    <span class=\"comment\">//ËøΩÂáª</span></span><br><span class=\"line\">                    isFollow = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                    agent.isStopped = <span class=\"literal\">false</span>;</span><br><span class=\"line\">                    agent.destination = attackTarget.transform.position;</span><br><span class=\"line\">                    <span class=\"comment\">//Âà§Êñ≠ÊòØÂê¶ËøΩÂáªÂà∞</span></span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (TargetInAttackRange() || TargetInSkillRange())</span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        isFollow = <span class=\"literal\">false</span>;</span><br><span class=\"line\">                        agent.isStopped = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (lastAttackTime &lt; <span class=\"number\">0f</span>)</span><br><span class=\"line\">                        &#123;</span><br><span class=\"line\">                            lastAttackTime = characterStats.CoolDown;</span><br><span class=\"line\">                            <span class=\"comment\">//Êö¥ÂáªÂà§Êñ≠</span></span><br><span class=\"line\">                            characterStats.isCritical = Random.<span class=\"keyword\">value</span> &lt; characterStats.CriticalChance;</span><br><span class=\"line\">                            </span><br><span class=\"line\">                            Attack();</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> EnemyStates.DEAD:</span><br><span class=\"line\">                <span class=\"comment\">//enemyÊ≠ª‰∫°Êó∂‰∏ç‰ºöÂèëÁîüÁªßÁª≠ÊîªÂáªÁöÑÊÉÖÂÜµ</span></span><br><span class=\"line\">                coll.enabled = <span class=\"literal\">false</span>;</span><br><span class=\"line\">                </span><br><span class=\"line\">                <span class=\"comment\">//agent.enabled = false;</span></span><br><span class=\"line\">                <span class=\"comment\">//ËÆæÁΩÆ‰πãÂêé‰∏ç‰ºöÈòªÊå°PlayerË°åÂä®</span></span><br><span class=\"line\">                agent.radius = <span class=\"number\">0f</span>;</span><br><span class=\"line\">                Destroy(gameObject, <span class=\"number\">2f</span>);</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"literal\">default</span>:</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Attack</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        transform.LookAt(attackTarget.transform);</span><br><span class=\"line\">        anim.SetBool(<span class=\"string\">&quot;Critical&quot;</span>, characterStats.isCritical);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (TargetInAttackRange())</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            anim.SetTrigger(<span class=\"string\">&quot;Attack&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(TargetInSkillRange())</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            anim.SetTrigger(<span class=\"string\">&quot;Skill&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">bool</span> <span class=\"title\">FindPlayer</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        Collider[] colliderNum = Physics.OverlapSphere(transform.position, sightRadius);</span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"keyword\">var</span> collider <span class=\"keyword\">in</span> colliderNum)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            </span><br><span class=\"line\">            <span class=\"keyword\">if</span> (collider.gameObject.CompareTag(<span class=\"string\">&quot;Player&quot;</span>))</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                attackTarget = collider.gameObject;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">SwitchAnim</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        anim.SetBool(<span class=\"string\">&quot;Walk&quot;</span>, isWalk);</span><br><span class=\"line\">        anim.SetBool(<span class=\"string\">&quot;Chase&quot;</span>, isChase);</span><br><span class=\"line\">        anim.SetBool(<span class=\"string\">&quot;Follow&quot;</span>, isFollow);</span><br><span class=\"line\">        anim.SetBool(<span class=\"string\">&quot;Die&quot;</span>, isDie);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">OnDrawGizmosSelected</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//ÁîªÂá∫ÊîªÂáªËåÉÂõ¥Âúà</span></span><br><span class=\"line\">        Gizmos.color = Color.green;</span><br><span class=\"line\">        Gizmos.DrawWireSphere(transform.position, sightRadius);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">GetNewPartolPoint</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">float</span> ran_x = Random.Range(-partolRadius, partolRadius);</span><br><span class=\"line\">        <span class=\"built_in\">float</span> ran_z = Random.Range(-partolRadius, partolRadius);</span><br><span class=\"line\">        <span class=\"comment\">//‰∏ç‰øÆÊîπÈ´òÂ∫¶ÔºåÈò≤Ê≠¢ÂùëÂùëÊ¥ºÊ¥ºÁöÑÂú∞Èù¢</span></span><br><span class=\"line\">        <span class=\"comment\">//guardPointÊòØ‰∏∫‰∫ÜÈöèÊú∫Âú®ÂàùÂßã‰ΩçÁΩÆÁÇπÁöÑÈöèÊú∫ÁßªÂä®</span></span><br><span class=\"line\">        wayPoint = <span class=\"keyword\">new</span> Vector3(guardPoint.x + ran_x, transform.position.y, guardPoint.z + ran_z);</span><br><span class=\"line\">        NavMeshHit hit;</span><br><span class=\"line\">        <span class=\"comment\">//NavMesh.SamplePositionÔºàÔºâÊñπÊ≥ïÁöÑÊúÄÂêé‰∏Ä‰Ωç‰∏∫Á™óÂè£ Navigation &gt; AreaÁöÑÂ∫èÂàóÔºå‰ªé1ÂºÄÂßã</span></span><br><span class=\"line\">        <span class=\"comment\">//ÊñπÊ≥ï‰∏∫ Âú®waypointÁöÑsightRadiusËåÉÂõ¥ÂÜÖÂØªÊâæ1Â±ÇÁ∫ßÔºàÂèØÁßªÂä®Âà∞ÔºâÁöÑÁÇπ</span></span><br><span class=\"line\">        <span class=\"comment\">//ÊñπÊ≥ïËøîÂõûÁöÑ‰∏∫TrueÂíåFalse</span></span><br><span class=\"line\">        wayPoint = NavMesh.SamplePosition(wayPoint, <span class=\"keyword\">out</span> hit, sightRadius,<span class=\"number\">1</span>) ? hit.position : transform.position;</span><br><span class=\"line\">        </span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">bool</span> <span class=\"title\">TargetInAttackRange</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (attackTarget != <span class=\"literal\">null</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> Vector3.Distance(attackTarget.transform.position, transform.position) &lt; characterStats.AttackRange;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">bool</span> <span class=\"title\">TargetInSkillRange</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (attackTarget != <span class=\"literal\">null</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> Vector3.Distance(attackTarget.transform.position, transform.position) &lt; characterStats.SkillRange;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Hit</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (attackTarget != <span class=\"literal\">null</span> &amp;&amp; transform.IsFacingTarget(attackTarget.transform))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> targetStats = attackTarget.GetComponent&lt;CharacterStats&gt;();</span><br><span class=\"line\">            characterStats.TakeDamage(characterStats, targetStats);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">EndsNotify</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        isChase = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        isWalk = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        attackTarget = <span class=\"literal\">null</span>;</span><br><span class=\"line\">        playerDie = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        anim.SetBool(<span class=\"string\">&quot;Victory&quot;</span>, <span class=\"literal\">true</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"PlayController\"><a href=\"#PlayController\" class=\"headerlink\" title=\"PlayController\"></a>PlayController</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.AI;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">PlayerController</span> : <span class=\"title\">MonoBehaviour</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> lastAttackTime;</span><br><span class=\"line\">    <span class=\"comment\">//ÊîªÂáªÁõÆÊ†áÂØπË±°</span></span><br><span class=\"line\">    GameObject attackTarget;</span><br><span class=\"line\">    CharacterStats characterStats;</span><br><span class=\"line\">    NavMeshAgent agent;</span><br><span class=\"line\">    Animator anim;</span><br><span class=\"line\">    <span class=\"built_in\">bool</span> isDie;</span><br><span class=\"line\">    <span class=\"built_in\">float</span> stopDistance;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">Awake</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        agent = GetComponent&lt;NavMeshAgent&gt;();</span><br><span class=\"line\">        anim = GetComponent&lt;Animator&gt;();</span><br><span class=\"line\">        characterStats = GetComponent&lt;CharacterStats&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">Start</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//Ê∑ªÂä†‰∫ã‰ª∂</span></span><br><span class=\"line\">        MouseManager.Instance.OnMouseClicked += MoveToTarget;</span><br><span class=\"line\">        MouseManager.Instance.OnClickedEnemy += EventAttack;</span><br><span class=\"line\">        </span><br><span class=\"line\">\t\t<span class=\"comment\">//Ê≥®ÂÜåGamemanagerÁöÑÂπøÊí≠</span></span><br><span class=\"line\">        GameManager.Instance.RigisterPlayer(characterStats);</span><br><span class=\"line\">        stopDistance = agent.stoppingDistance;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">Update</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        isDie = characterStats.CurrentHealth == <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (isDie)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            GameManager.Instance.NotifyObservers();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        AnimationChange();</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(lastAttackTime&gt;<span class=\"number\">0f</span>)</span><br><span class=\"line\">            lastAttackTime -= Time.deltaTime;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">MoveToTarget</span>(<span class=\"params\">Vector3 target</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (isDie) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        agent.isStopped = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        agent.stoppingDistance = stopDistance;</span><br><span class=\"line\">        StopAllCoroutines();</span><br><span class=\"line\">        agent.destination = target;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">AnimationChange</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        anim.SetFloat(<span class=\"string\">&quot;Speed&quot;</span>, agent.velocity.sqrMagnitude);</span><br><span class=\"line\">        anim.SetBool(<span class=\"string\">&quot;Die&quot;</span>, isDie);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">EventAttack</span>(<span class=\"params\">GameObject target</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (isDie) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (target != <span class=\"literal\">null</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            attackTarget = target;</span><br><span class=\"line\">            StartCoroutine(<span class=\"string\">&quot;MoveToAttackTarget&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//Âä®Áîª‰∫ã‰ª∂</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Hit</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (attackTarget.CompareTag(<span class=\"string\">&quot;Attackable&quot;</span>))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (attackTarget.GetComponent&lt;Rock&gt;())</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"comment\">//Âú®Á©∫‰∏≠‰πüÂèØ‰ª•ÂáªÈ£û</span></span><br><span class=\"line\">                attackTarget.GetComponent&lt;Rock&gt;().rockStates = Rock.RockStates.HitEnemy;</span><br><span class=\"line\">                <span class=\"comment\">//Ëµã‰∫àÂàùÂßãÈÄüÂ∫¶ÔºåÈò≤Ê≠¢fixudateÊó∂‰øÆÊîπrockÁä∂ÊÄÅ</span></span><br><span class=\"line\">                attackTarget.GetComponent&lt;Rigidbody&gt;().velocity = Vector3.one;</span><br><span class=\"line\">                attackTarget.GetComponent&lt;Rigidbody&gt;().AddForce(transform.forward * <span class=\"number\">20f</span>,ForceMode.Impulse);</span><br><span class=\"line\"></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> targetStats = attackTarget.GetComponent&lt;CharacterStats&gt;();</span><br><span class=\"line\">            characterStats.TakeDamage(characterStats, targetStats);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\">IEnumerator <span class=\"title\">MoveToAttackTarget</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        agent.stoppingDistance = characterStats.AttackRange;</span><br><span class=\"line\">        agent.isStopped = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (Vector3.Distance(attackTarget.transform.position, transform.position) &gt; characterStats.AttackRange)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            agent.destination = attackTarget.transform.position;</span><br><span class=\"line\">            <span class=\"keyword\">yield</span> <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        agent.isStopped = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (lastAttackTime &lt; <span class=\"number\">0</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            transform.LookAt(attackTarget.transform.position);</span><br><span class=\"line\">            <span class=\"comment\">//Êö¥ÂáªÁéáÁöÑËÆ°ÁÆó</span></span><br><span class=\"line\">            characterStats.isCritical = Random.<span class=\"keyword\">value</span> &lt; characterStats.CriticalChance;</span><br><span class=\"line\">            anim.SetBool(<span class=\"string\">&quot;Critical&quot;</span>,characterStats.isCritical);</span><br><span class=\"line\">            anim.SetTrigger(<span class=\"string\">&quot;Attack&quot;</span>);</span><br><span class=\"line\">            <span class=\"comment\">//ÈáçÁΩÆÂÜ∑Âç¥Êó∂Èó¥</span></span><br><span class=\"line\">            lastAttackTime = characterStats.CoolDown;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"CharacterStats\"><a href=\"#CharacterStats\" class=\"headerlink\" title=\"CharacterStats\"></a>CharacterStats</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">CharacterStats</span> : <span class=\"title\">MonoBehaviour</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">event</span> Action&lt;<span class=\"built_in\">int</span>, <span class=\"built_in\">int</span>&gt; UpdateHealthBarOnAttack;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Character_SO templateData;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> Character_SO character;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> AttackSO attackSO;</span><br><span class=\"line\">    [<span class=\"meta\">HideInInspector</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">bool</span> isCritical;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">Awake</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//Áî®Ê®°Êùø‰∏∫characterÁîüÊàê‰∏ÄÁªÑÊï∞ÊçÆÔºåÈò≤Ê≠¢Â§ö‰∏™enemyËÆøÈóÆÂêå‰∏ÄÁªÑÊï∞ÊçÆ</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (templateData != <span class=\"literal\">null</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            character = Instantiate(templateData);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> MaxHealth</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">get</span> &#123; <span class=\"keyword\">if</span> (character != <span class=\"literal\">null</span>) &#123; <span class=\"keyword\">return</span> character.maxHealth; &#125; <span class=\"keyword\">else</span> &#123; <span class=\"keyword\">return</span> <span class=\"number\">0</span>; &#125; &#125;</span><br><span class=\"line\">        <span class=\"keyword\">set</span> &#123; character.maxHealth = <span class=\"keyword\">value</span>; &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> CurrentHealth</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">get</span> &#123; <span class=\"keyword\">if</span> (character != <span class=\"literal\">null</span>) &#123; <span class=\"keyword\">return</span> character.currentHealth; &#125; <span class=\"keyword\">else</span> &#123; <span class=\"keyword\">return</span> <span class=\"number\">0</span>; &#125; &#125;</span><br><span class=\"line\">        <span class=\"keyword\">set</span> &#123; character.currentHealth = <span class=\"keyword\">value</span>; &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> BaseDefence</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">get</span> &#123; <span class=\"keyword\">if</span> (character != <span class=\"literal\">null</span>) &#123; <span class=\"keyword\">return</span> character.baseDefence; &#125; <span class=\"keyword\">else</span> &#123; <span class=\"keyword\">return</span> <span class=\"number\">0</span>; &#125; &#125;</span><br><span class=\"line\">        <span class=\"keyword\">set</span> &#123; character.baseDefence = <span class=\"keyword\">value</span>; &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> CurrentDefence</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">get</span> &#123; <span class=\"keyword\">if</span> (character != <span class=\"literal\">null</span>) &#123; <span class=\"keyword\">return</span> character.currentDefence; &#125; <span class=\"keyword\">else</span> &#123; <span class=\"keyword\">return</span> <span class=\"number\">0</span>; &#125; &#125;</span><br><span class=\"line\">        <span class=\"keyword\">set</span> &#123; character.currentDefence = <span class=\"keyword\">value</span>; &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> AttackRange &#123; <span class=\"keyword\">get</span> &#123;  <span class=\"keyword\">return</span> attackSO.attackRange; &#125; &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> SkillRange &#123; <span class=\"keyword\">get</span> &#123; <span class=\"keyword\">return</span> attackSO.skillRange; &#125; &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> CoolDown &#123; <span class=\"keyword\">get</span> &#123; <span class=\"keyword\">return</span> attackSO.coolDown; &#125; &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> MinDamage &#123; <span class=\"keyword\">get</span> &#123; <span class=\"keyword\">return</span> attackSO.minDamage; &#125; &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> MaxDamage &#123; <span class=\"keyword\">get</span> &#123; <span class=\"keyword\">return</span> attackSO.maxDamage; &#125; &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> CriticalMultiplier &#123; <span class=\"keyword\">get</span> &#123; <span class=\"keyword\">return</span> attackSO.criticalMultiplier; &#125; &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> CriticalChance &#123; <span class=\"keyword\">get</span> &#123; <span class=\"keyword\">return</span> attackSO.criticalChance; &#125; &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">TakeDamage</span>(<span class=\"params\">CharacterStats attacker,CharacterStats defender</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">int</span> damage = Mathf.Max(attacker.CurrentDamage() - defender.CurrentDefence, <span class=\"number\">0</span>);</span><br><span class=\"line\">        defender.CurrentHealth = Mathf.Max(defender.CurrentHealth - damage, <span class=\"number\">0</span>);</span><br><span class=\"line\">        <span class=\"comment\">//defenderÂèó‰º§ÁöÑÂä®Áîª Êö¥ÂáªÊâç‰ºöÊúâ</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (attacker.isCritical)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            defender.GetComponent&lt;Animator&gt;().SetTrigger(<span class=\"string\">&quot;Hit&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">\t\t<span class=\"comment\">//‰øÆÊîπÈò≤Âæ°ËÄÖË°ÄÊù°</span></span><br><span class=\"line\">        defender.UpdateHealthBarOnAttack?.Invoke(defender.CurrentHealth, defender.MaxHealth);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (defender.CurrentHealth &lt;= <span class=\"number\">0</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"comment\">//Êõ¥Êñ∞ÊîªÂáªËÄÖÁªèÈ™å</span></span><br><span class=\"line\">            attacker.character.UpdateExp(defender.character.killPoint);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">TakeDamage</span>(<span class=\"params\"><span class=\"built_in\">int</span> damage,CharacterStats defender</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">int</span> currentDamage = Mathf.Max(damage - defender.CurrentDefence, <span class=\"number\">0</span>);</span><br><span class=\"line\">        defender.CurrentHealth = Mathf.Max(defender.CurrentHealth - currentDamage, <span class=\"number\">0</span>);</span><br><span class=\"line\">        UpdateHealthBarOnAttack?.Invoke(defender.CurrentHealth, defender.MaxHealth);</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">int</span> <span class=\"title\">CurrentDamage</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">float</span> damage = UnityEngine.Random.Range(MinDamage, MaxDamage); ;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (isCritical)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            damage *= CriticalMultiplier;</span><br><span class=\"line\">            Debug.Log(<span class=\"string\">&quot;Êö¥ÂáªÔºö&quot;</span> + damage);</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (<span class=\"built_in\">int</span>)damage;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><strong>Character_SO</strong></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//filename‰∏∫ÂàõÂª∫ÁöÑÊñá‰ª∂ÁöÑÊñá‰ª∂ÂêçÔºåmenuName‰∏∫Êñá‰ª∂Â§πÁõÆÂΩïÂ±ÇÁ∫ßÂêçÂ≠ó</span></span><br><span class=\"line\">[<span class=\"meta\">CreateAssetMenu(fileName = <span class=\"meta-string\">&quot;New Data&quot;</span>, menuName = <span class=\"meta-string\">&quot;Character Stats/Data&quot;</span>)</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">Character_SO</span> : <span class=\"title\">ScriptableObject</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    [<span class=\"meta\">Header(<span class=\"meta-string\">&quot;Stats Info&quot;</span>)</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> maxHealth;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> currentHealth;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> baseDefence;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> currentDefence;</span><br><span class=\"line\"></span><br><span class=\"line\">    [<span class=\"meta\">Header(<span class=\"meta-string\">&quot;Kill&quot;</span>)</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> killPoint;</span><br><span class=\"line\"></span><br><span class=\"line\">    [<span class=\"meta\">Header(<span class=\"meta-string\">&quot;Level&quot;</span>)</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> currentLevel;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> maxLevel;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> baseExp;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> currentExp;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> levelBuff;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">UpdateExp</span>(<span class=\"params\"><span class=\"built_in\">int</span> point</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        currentExp += point;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (currentExp &gt;= baseExp)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            currentExp -= baseExp;</span><br><span class=\"line\">            LevelUP();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">LevelUP</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        currentLevel = Mathf.Clamp(currentLevel + <span class=\"number\">1</span>, <span class=\"number\">0</span>, maxLevel);</span><br><span class=\"line\">        baseExp += (<span class=\"built_in\">int</span>)(baseExp * LevelMultiplier);</span><br><span class=\"line\">        maxHealth = (<span class=\"built_in\">int</span>)(maxHealth * LevelMultiplier);</span><br><span class=\"line\">        currentHealth = maxHealth;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> LevelMultiplier</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">get</span> &#123;<span class=\"keyword\">return</span> <span class=\"number\">1</span>+(currentLevel<span class=\"number\">-1</span>)*levelBuff ; &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><strong>Attack_SO</strong></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"meta\">CreateAssetMenu(fileName =<span class=\"meta-string\">&quot;New Attack&quot;</span>,menuName =<span class=\"meta-string\">&quot;Attack/Attack Data&quot;</span>)</span>]</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">AttackSO</span> : <span class=\"title\">ScriptableObject</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    [<span class=\"meta\">Header(<span class=\"meta-string\">&quot;Attack Info&quot;</span>)</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> attackRange;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> skillRange;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> coolDown;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> minDamage;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> maxDamage;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> criticalMultiplier;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> criticalChance;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Ê≥õÂûãÂçï‰æãÊ®°ÂºèSingleton\"><a href=\"#Ê≥õÂûãÂçï‰æãÊ®°ÂºèSingleton\" class=\"headerlink\" title=\"Ê≥õÂûãÂçï‰æãÊ®°ÂºèSingleton\"></a>Ê≥õÂûãÂçï‰æãÊ®°ÂºèSingleton</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">SingleTon</span>&lt;<span class=\"title\">T</span>&gt; : <span class=\"title\">MonoBehaviour</span> <span class=\"keyword\">where</span> <span class=\"title\">T</span>:<span class=\"title\">SingleTon</span>&lt;<span class=\"title\">T</span>&gt;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> T instance;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> T Instance</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">get</span> &#123; <span class=\"keyword\">return</span> instance; &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">Awake</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (instance != <span class=\"literal\">null</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            Destroy(gameObject);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            instance = (T)<span class=\"keyword\">this</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"built_in\">bool</span> isInitialized</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">         <span class=\"keyword\">get</span> &#123; <span class=\"keyword\">return</span> instance != <span class=\"literal\">null</span>; &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Êé•Âè£Observer-Pattern\"><a href=\"#Êé•Âè£Observer-Pattern\" class=\"headerlink\" title=\"Êé•Âè£Observer Pattern\"></a>Êé•Âè£Observer Pattern</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title\">IEndGameObserver</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\">//Âè™ÂÆö‰πâÔºå‰∏çÂÆûÁé∞ÁïôÁªô‰ΩøÁî®ÁöÑÂÆûÁé∞Ëøô‰∏™ÊñπÊ≥ï</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">EndsNotify</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"GameManger\"><a href=\"#GameManger\" class=\"headerlink\" title=\"GameManger\"></a>GameManger</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">GameManager</span> : <span class=\"title\">SingleTon</span>&lt;<span class=\"title\">GameManager</span>&gt;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> CharacterStats playerStats;</span><br><span class=\"line\">\t</span><br><span class=\"line\">    <span class=\"comment\">//Êé•Âè£Á±ªÂûã</span></span><br><span class=\"line\">    List&lt;IEndGameObserver&gt; endGameObeverses = <span class=\"keyword\">new</span> List&lt;IEndGameObserver&gt;();</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">override</span> <span class=\"keyword\">void</span> <span class=\"title\">Awake</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">base</span>.Awake();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">RigisterPlayer</span>(<span class=\"params\">CharacterStats characterStats</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        playerStats = characterStats;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">AddObserver</span>(<span class=\"params\">IEndGameObserver observer</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        endGameObeverses.Add(observer);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">RemoveObserver</span>(<span class=\"params\">IEndGameObserver observer</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        endGameObeverses.Remove(observer);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">NotifyObservers</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//ÈÅçÂéÜÊ∑ªÂä†ËøõÊù•ÁöÑÂØπË±°</span></span><br><span class=\"line\">        <span class=\"comment\">//Êå®‰∏™Ë∞ÉÁî®EndsNotifyÔºàÔºâÊñπÊ≥ï</span></span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"keyword\">var</span> observer <span class=\"keyword\">in</span> endGameObeverses)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            observer.EndsNotify();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ËÆæÁΩÆÂÖΩ‰∫∫Grunt\"><a href=\"#ËÆæÁΩÆÂÖΩ‰∫∫Grunt\" class=\"headerlink\" title=\"ËÆæÁΩÆÂÖΩ‰∫∫Grunt\"></a>ËÆæÁΩÆÂÖΩ‰∫∫Grunt</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.AI;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//ÁªßÊâø‰∫éEnemyController</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">Grunt</span> : <span class=\"title\">EnemyController</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    [<span class=\"meta\">Header(<span class=\"meta-string\">&quot;GRUNTÊé®Âäõ&quot;</span>)</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> kickForce = <span class=\"number\">15f</span>;</span><br><span class=\"line\">    <span class=\"comment\">//Âä®Áîª‰∫ã‰ª∂</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">KickOff</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (attackTarget != <span class=\"literal\">null</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            transform.LookAt(attackTarget.transform);</span><br><span class=\"line\">            Vector3 direction = attackTarget.transform.position - transform.position;</span><br><span class=\"line\">            direction.Normalize();</span><br><span class=\"line\">            <span class=\"comment\">//ÊâìÊñ≠playerË°åÂä®ÔºåËøõË°åÂáªÈÄÄ</span></span><br><span class=\"line\">            attackTarget.GetComponent&lt;NavMeshAgent&gt;().isStopped = <span class=\"literal\">true</span>;</span><br><span class=\"line\">            attackTarget.GetComponent&lt;NavMeshAgent&gt;().velocity = direction * kickForce;</span><br><span class=\"line\">            attackTarget.GetComponent&lt;Animator&gt;().SetTrigger(<span class=\"string\">&quot;Dizzy&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ÊãìÂ±ïÊñπÊ≥ïExtension-Method\"><a href=\"#ÊãìÂ±ïÊñπÊ≥ïExtension-Method\" class=\"headerlink\" title=\"ÊãìÂ±ïÊñπÊ≥ïExtension Method\"></a>ÊãìÂ±ïÊñπÊ≥ïExtension Method</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//ÊãìÂ±ïÊñπÊ≥ï </span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">class</span> <span class=\"title\">ExtensionMethod</span> </span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">const</span> <span class=\"built_in\">float</span> dotThreshold = <span class=\"number\">0.5f</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//ÊãìÂ±ïÁöÑÊòØthisÂêéÈù¢ÁöÑÊñπÊ≥ï,ÂêéÈù¢ÁöÑ‰∏∫ÊñπÊ≥ïÊâÄÈúÄË¶ÅÁöÑÂáΩÊï∞</span></span><br><span class=\"line\">    <span class=\"comment\">//‰ΩøÁî®ÊñπÊ≥ï :transform.IsFacingTarget(target)</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"built_in\">bool</span> <span class=\"title\">IsFacingTarget</span>(<span class=\"params\"><span class=\"keyword\">this</span> Transform transform,Transform target</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//ÂêëÈáèOA-OB=BA;O‰∏∫ÂéüÁÇπÔºõ</span></span><br><span class=\"line\">        Vector3 vectorToTarget = target.position - transform.position;</span><br><span class=\"line\">        vectorToTarget.Normalize();</span><br><span class=\"line\">        <span class=\"comment\">//vector3.dot ‰∏∫ÁúãÂêëÁöÑÊñπÂêë‰∏évectortoTargetÁöÑÊñπÂêëÁöÑÂ§πËßíÔºåÊ≠£ÂØπÁùÄ‰∏∫1ÔºåËÉåÂØπÁùÄ‰∏∫-1ÔºåÂ∑¶Âè≥‰∏∫0Ôºõ</span></span><br><span class=\"line\">        <span class=\"built_in\">float</span> dot = Vector3.Dot(transform.forward, vectorToTarget);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dot &gt;= dotThreshold;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Áü≥Â§¥‰∫∫Golem\"><a href=\"#Áü≥Â§¥‰∫∫Golem\" class=\"headerlink\" title=\"Áü≥Â§¥‰∫∫Golem\"></a>Áü≥Â§¥‰∫∫Golem</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.AI;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">Golem</span> : <span class=\"title\">EnemyController</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    [<span class=\"meta\">Header(<span class=\"meta-string\">&quot;GRUNTÊé®Âäõ&quot;</span>)</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> kickForce = <span class=\"number\">25f</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> GameObject rockPerfab;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> Transform handTransform;</span><br><span class=\"line\">    <span class=\"comment\">//animation event</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">KickOff</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (attackTarget != <span class=\"literal\">null</span> &amp;&amp; transform.IsFacingTarget(attackTarget.transform))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> targetStats = attackTarget.GetComponent&lt;CharacterStats&gt;();</span><br><span class=\"line\">            Vector3 direction = attackTarget.transform.position - transform.position;</span><br><span class=\"line\">            direction.Normalize();</span><br><span class=\"line\">            transform.LookAt(attackTarget.transform);</span><br><span class=\"line\">            attackTarget.GetComponent&lt;NavMeshAgent&gt;().isStopped = <span class=\"literal\">true</span>;</span><br><span class=\"line\">            attackTarget.GetComponent&lt;NavMeshAgent&gt;().velocity = direction * kickForce;</span><br><span class=\"line\">            attackTarget.GetComponent&lt;Animator&gt;().SetTrigger(<span class=\"string\">&quot;Dizzy&quot;</span>);</span><br><span class=\"line\">            characterStats.TakeDamage(characterStats, targetStats);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//animation event</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">ThrowRock</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (attackTarget != <span class=\"literal\">null</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            GameObject rock = Instantiate(rockPerfab, handTransform.position, Quaternion.identity);</span><br><span class=\"line\">            rock.GetComponent&lt;Rock&gt;().target = attackTarget;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ÊâîÁü≥Â§¥\"><a href=\"#ÊâîÁü≥Â§¥\" class=\"headerlink\" title=\"ÊâîÁü≥Â§¥\"></a>ÊâîÁü≥Â§¥</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.AI;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.Animations;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">Rock</span> : <span class=\"title\">MonoBehaviour</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">enum</span> RockStates &#123; HitPlayer,HitEnemy,HitNothing&#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> RockStates rockStates;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> GameObject target;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> GameObject rockBreak;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> force;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> damage;</span><br><span class=\"line\">    Vector3 direction;</span><br><span class=\"line\">    Rigidbody rb;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Start</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        rb = GetComponent&lt;Rigidbody&gt;();</span><br><span class=\"line\">        rb.velocity = Vector3.one;</span><br><span class=\"line\">        rockStates = RockStates.HitPlayer;</span><br><span class=\"line\">        FlyToTarget();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">FixedUpdate</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (rb.velocity.sqrMagnitude &lt; <span class=\"number\">0.5f</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            rockStates = RockStates.HitNothing;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">FlyToTarget</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (target == <span class=\"literal\">null</span>)</span><br><span class=\"line\">            target = FindObjectOfType&lt;PlayerController&gt;().gameObject;</span><br><span class=\"line\">        direction = (target.transform.position - transform.position+Vector3.up ).normalized;</span><br><span class=\"line\">        rb.AddForce(direction * force, ForceMode.Impulse);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">OnCollisionEnter</span>(<span class=\"params\">Collision collision</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (rockStates)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> RockStates.HitPlayer:</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (collision.collider.CompareTag(<span class=\"string\">&quot;Player&quot;</span>))</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    collision.gameObject.GetComponent&lt;NavMeshAgent&gt;().isStopped = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                    collision.gameObject.GetComponent&lt;NavMeshAgent&gt;().velocity = direction * force;</span><br><span class=\"line\">                    collision.gameObject.GetComponent&lt;Animator&gt;().SetTrigger(<span class=\"string\">&quot;Dizzy&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">                    rockStates = RockStates.HitNothing;</span><br><span class=\"line\">                    collision.gameObject.GetComponent&lt;CharacterStats&gt;().TakeDamage(damage, collision.gameObject.GetComponent&lt;CharacterStats&gt;());</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> RockStates.HitEnemy:</span><br><span class=\"line\">                <span class=\"comment\">//Â¶ÇÊûúÊúâËøô‰∏™ÁªÑ‰ª∂ËøîÂõûtrueÔºõ</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (collision.gameObject.GetComponent&lt;Golem&gt;())</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    collision.gameObject.GetComponent&lt;CharacterStats&gt;().TakeDamage(damage, collision.gameObject.GetComponent&lt;CharacterStats&gt;());</span><br><span class=\"line\">                    </span><br><span class=\"line\">                    <span class=\"comment\">//ÊîªÂáªÁü≥Â§¥‰∫∫‰πãÂêéÔºåÁü≥Â§¥Á¢éË£ÇÁîüÊàêÁ≤íÂ≠êÁâπÊïà</span></span><br><span class=\"line\">                    Instantiate(rockBreak, transform.position, Quaternion.identity);</span><br><span class=\"line\">                    Destroy(gameObject);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> RockStates.HitNothing:</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"literal\">default</span>:</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><strong>Á≤íÂ≠êÁâπÊïà</strong></p>\n<p>Hierarchy &gt; Effects &gt; Particle System</p>\n<h3 id=\"Ë°ÄÊù°ÊòæÁ§∫-HealthBar\"><a href=\"#Ë°ÄÊù°ÊòæÁ§∫-HealthBar\" class=\"headerlink\" title=\"Ë°ÄÊù°ÊòæÁ§∫ HealthBar\"></a>Ë°ÄÊù°ÊòæÁ§∫ HealthBar</h3><p><strong>ÊåÇËΩΩÂú®enemyË∫´‰∏ä</strong></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.UI;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">HealthBar</span> : <span class=\"title\">MonoBehaviour</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> GameObject healthBarUiPerfab;</span><br><span class=\"line\">\t<span class=\"comment\">//Ë°ÄÊù°ÁöÑ‰ΩçÁΩÆÔºåenemyËÆæÁΩÆ‰∏Ä‰∏™Á©∫ÂØπË±°ÔºåË∞ÉÊï¥‰ΩçÁΩÆ‰∏∫Â§¥ÈÉ®‰∏äÊñπ</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Transform barPoint;</span><br><span class=\"line\">    <span class=\"comment\">//ÊòØÂê¶‰∏ÄÁõ¥ÊòæÁ§∫ ÊòæÁ§∫ÁöÑÊó∂Èïø</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">bool</span> alwaysVisible;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> visibleTime;</span><br><span class=\"line\">    <span class=\"built_in\">float</span> timeLeft;</span><br><span class=\"line\"></span><br><span class=\"line\">    Image healthSlider;</span><br><span class=\"line\">    Transform UIBar;</span><br><span class=\"line\">    Transform cam;</span><br><span class=\"line\">    CharacterStats currentStats;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">Awake</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//Ëé∑ÂèñÁªÑ‰ª∂</span></span><br><span class=\"line\">        currentStats = GetComponent&lt;CharacterStats&gt;();</span><br><span class=\"line\">        <span class=\"comment\">//Ê∑ªÂä†‰∫ãÂä°</span></span><br><span class=\"line\">        currentStats.UpdateHealthBarOnAttack += UpdateHealthBar;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">OnEnable</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        cam = Camera.main.transform;</span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"function\">Canvas canvas <span class=\"keyword\">in</span> <span class=\"title\">FindObjectsOfType</span>&lt;<span class=\"title\">Canvas</span>&gt;(<span class=\"params\"></span>))</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (canvas.renderMode == RenderMode.WorldSpace)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                UIBar = Instantiate(healthBarUiPerfab, canvas.transform).transform;</span><br><span class=\"line\">                healthSlider = UIBar.GetChild(<span class=\"number\">0</span>).GetComponent&lt;Image&gt;();</span><br><span class=\"line\">                UIBar.gameObject.SetActive(alwaysVisible);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">UpdateHealthBar</span>(<span class=\"params\"><span class=\"built_in\">int</span> currentHealth, <span class=\"built_in\">int</span> Maxhealth</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (currentHealth &lt;= <span class=\"number\">0</span>)</span><br><span class=\"line\">            Destroy(UIBar.gameObject);</span><br><span class=\"line\"></span><br><span class=\"line\">        UIBar.gameObject.SetActive(<span class=\"literal\">true</span>);</span><br><span class=\"line\">        <span class=\"comment\">//ÊîªÂáªÊó∂ÈáçÁΩÆÊòæÁ§∫Ââ©‰ΩôÊó∂Èó¥</span></span><br><span class=\"line\">        timeLeft = visibleTime;</span><br><span class=\"line\">        <span class=\"built_in\">float</span> sliderPercent = (<span class=\"built_in\">float</span>)currentHealth / Maxhealth;</span><br><span class=\"line\">        <span class=\"comment\">//image TypeËÆæÁΩÆ‰∏∫FilledÔºåfillmethodËÆæÁΩÆ‰∏∫Horizontal</span></span><br><span class=\"line\">        healthSlider.fillAmount = sliderPercent;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">LateUpdate</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (UIBar != <span class=\"literal\">null</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"comment\">//‰ΩçÁΩÆ</span></span><br><span class=\"line\">            UIBar.position = barPoint.position;</span><br><span class=\"line\">            <span class=\"comment\">//uiÁöÑÊñπÂêë‰∏éÊëÑÂÉèÊú∫ÁöÑÊñπÂêëÁõ∏Âèç</span></span><br><span class=\"line\">            UIBar.forward = -cam.forward;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (timeLeft &lt;= <span class=\"number\">0f</span>&amp;&amp;!alwaysVisible)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                UIBar.gameObject.SetActive(<span class=\"literal\">false</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span></span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                timeLeft -= Time.deltaTime;</span><br><span class=\"line\"></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"PlayerUI\"><a href=\"#PlayerUI\" class=\"headerlink\" title=\"PlayerUI\"></a>PlayerUI</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.UI;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">PlayHealthBar</span> : <span class=\"title\">MonoBehaviour</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    Text level;</span><br><span class=\"line\">    Image healthSlider;</span><br><span class=\"line\">    Image expSlider;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">Awake</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        level = transform.GetChild(<span class=\"number\">2</span>).GetComponent&lt;Text&gt;();</span><br><span class=\"line\">        healthSlider = transform.GetChild(<span class=\"number\">0</span>).GetChild(<span class=\"number\">0</span>).GetComponent&lt;Image&gt;();</span><br><span class=\"line\">        expSlider = transform.GetChild(<span class=\"number\">1</span>).GetChild(<span class=\"number\">0</span>).GetComponent&lt;Image&gt;();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">LateUpdate</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        level.text = <span class=\"string\">&quot;Level  &quot;</span> + GameManager.Instance.playerStats.character.currentLevel.ToString(<span class=\"string\">&quot;00&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        UpdateHealth();</span><br><span class=\"line\"></span><br><span class=\"line\">        UpdateExp();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">UpdateHealth</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">float</span> sliderPercent = (<span class=\"built_in\">float</span>)GameManager.Instance.playerStats.CurrentHealth / GameManager.Instance.playerStats.MaxHealth;</span><br><span class=\"line\">        healthSlider.fillAmount = sliderPercent;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">UpdateExp</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">float</span> sliderPercent = (<span class=\"built_in\">float</span>)GameManager.Instance.playerStats.character.currentExp / GameManager.Instance.playerStats.character.baseExp;</span><br><span class=\"line\">        expSlider.fillAmount = sliderPercent;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ËÆæÁΩÆuiÊó∂ÔºåÈ¶ñÂÖàÈúÄË¶ÅË∞ÉÊï¥CanvasÁöÑScaler</p>\n<p>UI Scale ModeËÆæÁΩÆ‰∏∫Scale With Screen Size,MatchËÆæÁΩÆ‰∏∫0.5ÔºåÂêåÊó∂ÂÖºÈ°æÈ´òÂ∫¶ÂíåÂÆΩÂ∫¶</p>\n</blockquote>\n<blockquote>\n<p>CanvasÊúâ‰∏™Canvas GroupÁªÑ‰ª∂ÔºåÂèØ‰ª•ËÆæÁΩÆÂèñÊ∂àÈòªÊå°Â∞ÑÁ∫ø</p>\n<p>‰πüÂèØ‰ª•ÈÄöËøáË∞ÉÊï¥AlphaÁöÑÂÄºÂéªÂÅöËΩ¨Âú∫</p>\n</blockquote>\n<h3 id=\"‰º†ÈÄÅÈó®\"><a href=\"#‰º†ÈÄÅÈó®\" class=\"headerlink\" title=\"‰º†ÈÄÅÈó®\"></a>‰º†ÈÄÅÈó®</h3><p>‰ΩøÁî®lit shader</p>\n<p>shaderÂà∂‰ΩúÊàêÊùêË¥®ÔºåÂàõÂª∫‰∏Ä‰∏™3D &gt; planeÔºåÊãñÊãΩËµã‰∫àËøô‰∏™ÊùêË¥®ÔºåÂπ∂ÁîüÊàê‰∏Ä‰∏™‰º†ÈÄÅÁÇπ‰ΩçÁΩÆ</p>\n<p>Êûö‰∏æÁ±ª</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">TransitionDestination</span> : <span class=\"title\">MonoBehaviour</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">enum</span> DestinationTag &#123; Enter,A,B,C&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> DestinationTag destinationTag;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">TransiationPoint</span> : <span class=\"title\">MonoBehaviour</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">enum</span> TransitionType &#123; SameScence,DifferentScence&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    [<span class=\"meta\">Header(<span class=\"meta-string\">&quot;Transition Info&quot;</span>)</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">string</span> scenceName;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> TransitionType transitionType;</span><br><span class=\"line\">    <span class=\"comment\">//Êûö‰∏æÁªàÁÇπÁºñÂè∑</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> TransitionDestination.DestinationTag destinationTag;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">bool</span> canTrans;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">Update</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (Input.GetKeyDown(KeyCode.E) &amp;&amp; canTrans)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            ScenceController.Instance.TransitionToDestination(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">OnTriggerStay</span>(<span class=\"params\">Collider other</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (other.CompareTag(<span class=\"string\">&quot;Player&quot;</span>))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            canTrans = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">OnTriggerExit</span>(<span class=\"params\">Collider other</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (other.CompareTag(<span class=\"string\">&quot;Player&quot;</span>))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            canTrans = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>ÂÆûÁé∞Âú∫ÊôØËΩ¨Êç¢</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.SceneManagement;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.AI;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">ScenceController</span> : <span class=\"title\">SingleTon</span>&lt;<span class=\"title\">ScenceController</span>&gt;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    GameObject player;</span><br><span class=\"line\">    NavMeshAgent playerAgent;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">TransitionToDestination</span>(<span class=\"params\">TransiationPoint transiationPoint</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (transiationPoint.transitionType)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> TransiationPoint.TransitionType.SameScence:</span><br><span class=\"line\">                StartCoroutine(Transition(SceneManager.GetActiveScene().name, transiationPoint.destinationTag));</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> TransiationPoint.TransitionType.DifferentScence:</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"literal\">default</span>:</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\">IEnumerator <span class=\"title\">Transition</span>(<span class=\"params\"><span class=\"built_in\">string</span> scenceName,TransitionDestination.DestinationTag destinationTag</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        player = GameManager.Instance.playerStats.gameObject;</span><br><span class=\"line\"></span><br><span class=\"line\">        playerAgent = player.GetComponent&lt;NavMeshAgent&gt;();</span><br><span class=\"line\">        playerAgent.isStopped = <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"comment\">//ËÆæÁΩÆ‰ΩçÁΩÆ‰∏éÊñπÂêëtransform.SetPositionAndRotationÔºàÔºâ</span></span><br><span class=\"line\">        player.transform.SetPositionAndRotation(GetDestination(destinationTag).transform.position, GetDestination(destinationTag).transform.rotation);</span><br><span class=\"line\">        <span class=\"keyword\">yield</span> <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">    <span class=\"comment\">//ÈÅçÂéÜËé∑ÂèñÁªàÁÇπÁöÑ‰ø°ÊÅØ</span></span><br><span class=\"line\">    <span class=\"function\">TransitionDestination <span class=\"title\">GetDestination</span>(<span class=\"params\">TransitionDestination.DestinationTag destinationTag</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> entrances = FindObjectsOfType&lt;TransitionDestination&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"keyword\">var</span> item <span class=\"keyword\">in</span> entrances)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (item.destinationTag == destinationTag)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> item;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"‰øùÂ≠òÊï∞ÊçÆ\"><a href=\"#‰øùÂ≠òÊï∞ÊçÆ\" class=\"headerlink\" title=\"‰øùÂ≠òÊï∞ÊçÆ\"></a>‰øùÂ≠òÊï∞ÊçÆ</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">SaveManager</span> : <span class=\"title\">SingleTon</span>&lt;<span class=\"title\">SaveManager</span>&gt;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">Update</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (Input.GetKeyDown(KeyCode.K))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            Save(GameManager.Instance.playerStats.character, GameManager.Instance.playerStats.name);</span><br><span class=\"line\">            Debug.Log(GameManager.Instance.playerStats.name);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (Input.GetKeyDown(KeyCode.L))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            Load(GameManager.Instance.playerStats.character, GameManager.Instance.playerStats.name);</span><br><span class=\"line\">            </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">Save</span>(<span class=\"params\"><span class=\"built_in\">object</span> data,<span class=\"built_in\">string</span> key</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//Êï∞ÊçÆËΩ¨Êàêjson</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> jsonData = JsonUtility.ToJson(data, <span class=\"literal\">true</span>);</span><br><span class=\"line\">        <span class=\"comment\">//jsonËΩ¨Êàê‰∫åËøõÂà∂</span></span><br><span class=\"line\">        PlayerPrefs.SetString(key, jsonData);</span><br><span class=\"line\">        PlayerPrefs.Save();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">Load</span>(<span class=\"params\"><span class=\"built_in\">object</span> data, <span class=\"built_in\">string</span> key</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (PlayerPrefs.HasKey(key))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"comment\">//PlayerPrefs.GetString(key)Â∞Ü‰∫åËøõÂà∂ËΩ¨‰∏∫jsonÔºåË¶ÜÁõñÂà∞data‰∏ä</span></span><br><span class=\"line\">            JsonUtility.FromJsonOverwrite(PlayerPrefs.GetString(key), data);</span><br><span class=\"line\">            Debug.Log(<span class=\"string\">&quot;111&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n"},{"title":"ÂØπËØùÁ≥ªÁªü‚Äî‚ÄîDialog System","description":null,"date":"2022-06-03T16:00:00.000Z","top_image":"/img/004.png","cover":"/img/004.png","_content":"\n# Introduce\n\nÈ¶ñÂÖàËøòÊòØË¶ÅÊÑüË∞¢È∫¶Êâ£ËÄÅÂ∏àÔºå[ËßÜÈ¢ëÈìæÊé•](https://www.bilibili.com/video/BV1WJ411Y71J/?spm_id_from=333.788.recommend_more_video.1)„ÄÇ\n\n![image-20220604181812326](image-20220604181812326.png)\n\n# ÊñáÊú¨ËØªÂèñ‰∏éÊòæÁ§∫\n\n**ËøôÊòØ‰∏™txtÊñá‰ª∂**ÔºåËÆ∞ÂΩï‰∫ÜÂØπËØùÁöÑÂÜÖÂÆπÔºåÊ†πÊçÆ A or B Âà§Êñ≠ËØ¥ËØùÁöÑ‰∫∫Áâ©\n\n```\nA\n1:zheshidiyijv1?\nB\n2:zheshidierjv2!!!!!\nA\n3:disanjvzaizheli.......\nB\n4:disijvyaojiehsule////\nA\n5:ending'''''\n```\n\n\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.UI;\npublic class Dialog : MonoBehaviour\n{\n    \n    [Header(\"ÁªÑ‰ª∂\")]\n    public Text textLabel;\n    public Image image;\n\n    [Header(\"ÊñáÊú¨\")]\n    public TextAsset textAsset;\n    public int index;\n\n    //Â≠òÂÇ®ÊñáÊú¨\n    List<string> textList = new List<string>();\n    void Awake()\n    {\n        GetTextFormFilr(textAsset);\n    }\n    private void OnEnable()\n    {\n        //ÂΩìÂêØÁî®Êó∂ÔºåÊòæÁ§∫Á¨¨‰∏ÄÂè•ËØù\n        textLabel.text = textList[index++];\n    }\n    // Update is called once per frame\n    void Update()\n    {\n        if (Input.GetKeyDown(KeyCode.Space))\n        {\n            if (index == textList.Count)\n            {\n                gameObject.SetActive(false);\n                index = 0;\n            }\n            else\n                textLabel.text = textList[index++];\n        }\n    }\n\n    void GetTextFormFilr(TextAsset text)\n    {\n        textList.Clear();\n        index = 0;\n        //ÈÄöËøáÂõûËΩ¶Á¨¶ÂàÜÂâ≤\n        var list = text.text.Split('\\n');\n        foreach (var item in list)\n        {\n            textList.Add(item);\n        }\n    }\n}\n\n```\n\n# ÂçèÁ®ãÈÄêÂ≠óÊòæÁ§∫\n\n‰ΩøÁî®ÂçèÁ®ãÔºåÈÄöËøáËÆæÁΩÆÂèòÈáè`timeSpeed`ÂéªËÆæÁΩÆÊØè‰∏™Â≠óÁöÑÈó¥ÈöîÊó∂Èó¥\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.UI;\npublic class Dialog : MonoBehaviour\n{\n    \n    [Header(\"ÁªÑ‰ª∂\")]\n    public Text textLabel;\n    public Image image;\n\n    [Header(\"ÊñáÊú¨\")]\n    public TextAsset textAsset;\n    public int index;\n    [Header(\"Â§¥ÂÉè\")]\n    public Sprite headA, headB;\n\n    public float timeSpeed;\n    //Âà§Êñ≠ÂçèÁ®ãÊòØÂê¶ÁªìÊùüÔºåÈò≤Ê≠¢Â§ö‰∏™ÂçèÁ®ãÂêåÊó∂Âá∫Áé∞\n    //ÂàùÂßãÊó∂ËÆæÁΩÆ‰∏∫true\n    bool textFinshed = true;\n    //Â≠òÂÇ®ÊñáÊú¨\n    List<string> textList = new List<string>();\n    void Awake()\n    {\n        GetTextFormFilr(textAsset);\n    }\n    private void OnEnable()\n    {\n        //ÂΩìÂêØÁî®Êó∂ÔºåÊòæÁ§∫Á¨¨‰∏ÄÂè•ËØù\n        StartCoroutine(SetText());\n    }\n    // Update is called once per frame\n    void Update()\n    {\n        if (Input.GetKeyDown(KeyCode.Space))\n        {\n            if (index == textList.Count)\n            {\n                gameObject.SetActive(false);\n                index = 0;\n            }\n            else if(textFinshed)\n                StartCoroutine(SetText());\n        }\n    }\n\n    void GetTextFormFilr(TextAsset text)\n    {\n        textList.Clear();\n        index = 0;\n        //ÈÄöËøáÂõûËΩ¶Á¨¶ÂàÜÂâ≤\n        var list = text.text.Split('\\n');\n        foreach (var item in list)\n        {\n            textList.Add(item);\n        }\n    }\n\n    IEnumerator SetText()\n    {\n        textFinshed = false;\n        //Ê∏ÖÁ©∫textLabelÈáåÁöÑÊñáÂ≠ó\n        textLabel.text = \"\";\n        //ËøôÈáå‰∏çÊ∏ÖÊ•öÊòØ‰∏çÊòØÊàëÁöÑÊñáÊú¨ÁöÑÈóÆÈ¢òÔºåËé∑ÂèñÊó∂ÊÄªÊòØËé∑ÂèñÂà∞‰∏§‰∏™Â≠óÁ¨¶Ôºå‰ΩÜ‰∏çÁü•ÈÅìÁ¨¨‰∫å‰∏™Â≠óÁ¨¶ÊòØ‰ªÄ‰πà\n        switch (textList[index][0])\n        {\n            case 'A':\n                image.sprite = headA;\n                index++;\n                break;\n\n            case 'B':\n                image.sprite = headB;\n                index++;\n                break;\n        }\n        //ÊØèÈöîtimeSpeedÁßíËøõË°åÊòæÁ§∫‰∏ÄÊ¨°\n        for (int i = 0; i < textList[index].Length; i++)\n        {\n            textLabel.text += textList[index][i];\n\n            yield return new WaitForSeconds(timeSpeed);\n        }\n        //Êõ¥ÊîπindexÂÄºÔºåÂπ∂Êõ¥ÊîπÁä∂ÊÄÅ\n        index++;\n        textFinshed = true;\n\n    }\n\n}\n\n```\n\n# ‰∏≠Êñ≠ÂçèÁ®ã\n\nÈÄöËøáÂà§Êñ≠ËæìÂÖ•Êó∂ÁöÑÁä∂ÊÄÅÂà§Êñ≠ÔºåÈÄâÊã©ÊòØÂê¶‰∏≠Êñ≠ÂçèÁ®ãÁõ¥Êé•ÊòæÁ§∫\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.UI;\npublic class Dialog : MonoBehaviour\n{\n    \n    [Header(\"ÁªÑ‰ª∂\")]\n    public Text textLabel;\n    public Image image;\n\n    [Header(\"ÊñáÊú¨\")]\n    public TextAsset textAsset;\n    public int index;\n    [Header(\"Â§¥ÂÉè\")]\n    public Sprite headA, headB;\n\n    public float timeSpeed;\n    //Âà§Êñ≠ÂçèÁ®ãÊòØÂê¶ÁªìÊùüÔºåÈò≤Ê≠¢Â§ö‰∏™ÂçèÁ®ãÂêåÊó∂Âá∫Áé∞\n    //ÂàùÂßãÊó∂ËÆæÁΩÆ‰∏∫true\n    bool textFinshed = true;\n    //Â≠òÂÇ®ÊñáÊú¨\n    List<string> textList = new List<string>();\n    void Awake()\n    {\n        GetTextFormFilr(textAsset);\n    }\n    private void OnEnable()\n    {\n        //ÂΩìÂêØÁî®Êó∂ÔºåÊòæÁ§∫Á¨¨‰∏ÄÂè•ËØù\n        StartCoroutine(SetText());\n    }\n    // Update is called once per frame\n    void Update()\n    {\n        if (Input.GetKeyDown(KeyCode.Space))\n        {\n            if (index >= textList.Count)\n            {\n                gameObject.SetActive(false);\n                index = 0;\n            }\n            else if (textFinshed)\n            {\n                //ÈÄêÂ≠óÊòæÁ§∫\n                StartCoroutine(SetText());\n            }\n            else if (!textFinshed)\n            {\n                //ÁªìÊùüÂçèÁ®ãÔºåÁõ¥Êé•ÊòæÁ§∫\n                StopCoroutine(SetText());\n                textFinshed = true;\n                \n                textLabel.text = textList[index];\n                index++;\n            }\n\n\n        }\n    }\n\n    void GetTextFormFilr(TextAsset text)\n    {\n        textList.Clear();\n        index = 0;\n        //ÈÄöËøáÂõûËΩ¶Á¨¶ÂàÜÂâ≤\n        var list = text.text.Split('\\n');\n        foreach (var item in list)\n        {\n            textList.Add(item);\n        }\n    }\n\n    IEnumerator SetText()\n    {\n        textFinshed = false;\n        //Ê∏ÖÁ©∫textLabelÈáåÁöÑÊñáÂ≠ó\n        textLabel.text = \"\";\n        //ËøôÈáå‰∏çÊ∏ÖÊ•öÊòØ‰∏çÊòØÊàëÁöÑÊñáÊú¨ÁöÑÈóÆÈ¢òÔºåËé∑ÂèñÊó∂ÊÄªÊòØËé∑ÂèñÂà∞‰∏§‰∏™Â≠óÁ¨¶Ôºå‰ΩÜ‰∏çÁü•ÈÅìÁ¨¨‰∫å‰∏™Â≠óÁ¨¶ÊòØ‰ªÄ‰πà\n        switch (textList[index][0])\n        {\n            case 'A':\n                image.sprite = headA;\n                index++;\n                break;\n\n            case 'B':\n                image.sprite = headB;\n                index++;\n                break;\n        }\n        //ÊØèÈöîtimeSpeedÁßíËøõË°åÊòæÁ§∫‰∏ÄÊ¨°\n        for (int i = 0; i < textList[index].Length; i++)\n        {\n            textLabel.text += textList[index][i];\n\n            yield return new WaitForSeconds(timeSpeed);\n        }\n        //Êõ¥ÊîπindexÂÄºÔºåÂπ∂Êõ¥ÊîπÁä∂ÊÄÅ\n        \n        textFinshed = true;\n        index++;\n\n    }\n\n}\n\n```\n\n","source":"_posts/004_Dialog.md","raw":"---\ntitle: ÂØπËØùÁ≥ªÁªü‚Äî‚ÄîDialog System\ndescription: \ndate: 2022-6-4\ntop_image: /img/004.png\ncover: /img/004.png\ncategories: \n- Unity\ntag: \n- Games\n- Ê∏∏ÊàèÂà∂‰Ωú\n- M_studio\n\n---\n\n# Introduce\n\nÈ¶ñÂÖàËøòÊòØË¶ÅÊÑüË∞¢È∫¶Êâ£ËÄÅÂ∏àÔºå[ËßÜÈ¢ëÈìæÊé•](https://www.bilibili.com/video/BV1WJ411Y71J/?spm_id_from=333.788.recommend_more_video.1)„ÄÇ\n\n![image-20220604181812326](image-20220604181812326.png)\n\n# ÊñáÊú¨ËØªÂèñ‰∏éÊòæÁ§∫\n\n**ËøôÊòØ‰∏™txtÊñá‰ª∂**ÔºåËÆ∞ÂΩï‰∫ÜÂØπËØùÁöÑÂÜÖÂÆπÔºåÊ†πÊçÆ A or B Âà§Êñ≠ËØ¥ËØùÁöÑ‰∫∫Áâ©\n\n```\nA\n1:zheshidiyijv1?\nB\n2:zheshidierjv2!!!!!\nA\n3:disanjvzaizheli.......\nB\n4:disijvyaojiehsule////\nA\n5:ending'''''\n```\n\n\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.UI;\npublic class Dialog : MonoBehaviour\n{\n    \n    [Header(\"ÁªÑ‰ª∂\")]\n    public Text textLabel;\n    public Image image;\n\n    [Header(\"ÊñáÊú¨\")]\n    public TextAsset textAsset;\n    public int index;\n\n    //Â≠òÂÇ®ÊñáÊú¨\n    List<string> textList = new List<string>();\n    void Awake()\n    {\n        GetTextFormFilr(textAsset);\n    }\n    private void OnEnable()\n    {\n        //ÂΩìÂêØÁî®Êó∂ÔºåÊòæÁ§∫Á¨¨‰∏ÄÂè•ËØù\n        textLabel.text = textList[index++];\n    }\n    // Update is called once per frame\n    void Update()\n    {\n        if (Input.GetKeyDown(KeyCode.Space))\n        {\n            if (index == textList.Count)\n            {\n                gameObject.SetActive(false);\n                index = 0;\n            }\n            else\n                textLabel.text = textList[index++];\n        }\n    }\n\n    void GetTextFormFilr(TextAsset text)\n    {\n        textList.Clear();\n        index = 0;\n        //ÈÄöËøáÂõûËΩ¶Á¨¶ÂàÜÂâ≤\n        var list = text.text.Split('\\n');\n        foreach (var item in list)\n        {\n            textList.Add(item);\n        }\n    }\n}\n\n```\n\n# ÂçèÁ®ãÈÄêÂ≠óÊòæÁ§∫\n\n‰ΩøÁî®ÂçèÁ®ãÔºåÈÄöËøáËÆæÁΩÆÂèòÈáè`timeSpeed`ÂéªËÆæÁΩÆÊØè‰∏™Â≠óÁöÑÈó¥ÈöîÊó∂Èó¥\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.UI;\npublic class Dialog : MonoBehaviour\n{\n    \n    [Header(\"ÁªÑ‰ª∂\")]\n    public Text textLabel;\n    public Image image;\n\n    [Header(\"ÊñáÊú¨\")]\n    public TextAsset textAsset;\n    public int index;\n    [Header(\"Â§¥ÂÉè\")]\n    public Sprite headA, headB;\n\n    public float timeSpeed;\n    //Âà§Êñ≠ÂçèÁ®ãÊòØÂê¶ÁªìÊùüÔºåÈò≤Ê≠¢Â§ö‰∏™ÂçèÁ®ãÂêåÊó∂Âá∫Áé∞\n    //ÂàùÂßãÊó∂ËÆæÁΩÆ‰∏∫true\n    bool textFinshed = true;\n    //Â≠òÂÇ®ÊñáÊú¨\n    List<string> textList = new List<string>();\n    void Awake()\n    {\n        GetTextFormFilr(textAsset);\n    }\n    private void OnEnable()\n    {\n        //ÂΩìÂêØÁî®Êó∂ÔºåÊòæÁ§∫Á¨¨‰∏ÄÂè•ËØù\n        StartCoroutine(SetText());\n    }\n    // Update is called once per frame\n    void Update()\n    {\n        if (Input.GetKeyDown(KeyCode.Space))\n        {\n            if (index == textList.Count)\n            {\n                gameObject.SetActive(false);\n                index = 0;\n            }\n            else if(textFinshed)\n                StartCoroutine(SetText());\n        }\n    }\n\n    void GetTextFormFilr(TextAsset text)\n    {\n        textList.Clear();\n        index = 0;\n        //ÈÄöËøáÂõûËΩ¶Á¨¶ÂàÜÂâ≤\n        var list = text.text.Split('\\n');\n        foreach (var item in list)\n        {\n            textList.Add(item);\n        }\n    }\n\n    IEnumerator SetText()\n    {\n        textFinshed = false;\n        //Ê∏ÖÁ©∫textLabelÈáåÁöÑÊñáÂ≠ó\n        textLabel.text = \"\";\n        //ËøôÈáå‰∏çÊ∏ÖÊ•öÊòØ‰∏çÊòØÊàëÁöÑÊñáÊú¨ÁöÑÈóÆÈ¢òÔºåËé∑ÂèñÊó∂ÊÄªÊòØËé∑ÂèñÂà∞‰∏§‰∏™Â≠óÁ¨¶Ôºå‰ΩÜ‰∏çÁü•ÈÅìÁ¨¨‰∫å‰∏™Â≠óÁ¨¶ÊòØ‰ªÄ‰πà\n        switch (textList[index][0])\n        {\n            case 'A':\n                image.sprite = headA;\n                index++;\n                break;\n\n            case 'B':\n                image.sprite = headB;\n                index++;\n                break;\n        }\n        //ÊØèÈöîtimeSpeedÁßíËøõË°åÊòæÁ§∫‰∏ÄÊ¨°\n        for (int i = 0; i < textList[index].Length; i++)\n        {\n            textLabel.text += textList[index][i];\n\n            yield return new WaitForSeconds(timeSpeed);\n        }\n        //Êõ¥ÊîπindexÂÄºÔºåÂπ∂Êõ¥ÊîπÁä∂ÊÄÅ\n        index++;\n        textFinshed = true;\n\n    }\n\n}\n\n```\n\n# ‰∏≠Êñ≠ÂçèÁ®ã\n\nÈÄöËøáÂà§Êñ≠ËæìÂÖ•Êó∂ÁöÑÁä∂ÊÄÅÂà§Êñ≠ÔºåÈÄâÊã©ÊòØÂê¶‰∏≠Êñ≠ÂçèÁ®ãÁõ¥Êé•ÊòæÁ§∫\n\n```csharp\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.UI;\npublic class Dialog : MonoBehaviour\n{\n    \n    [Header(\"ÁªÑ‰ª∂\")]\n    public Text textLabel;\n    public Image image;\n\n    [Header(\"ÊñáÊú¨\")]\n    public TextAsset textAsset;\n    public int index;\n    [Header(\"Â§¥ÂÉè\")]\n    public Sprite headA, headB;\n\n    public float timeSpeed;\n    //Âà§Êñ≠ÂçèÁ®ãÊòØÂê¶ÁªìÊùüÔºåÈò≤Ê≠¢Â§ö‰∏™ÂçèÁ®ãÂêåÊó∂Âá∫Áé∞\n    //ÂàùÂßãÊó∂ËÆæÁΩÆ‰∏∫true\n    bool textFinshed = true;\n    //Â≠òÂÇ®ÊñáÊú¨\n    List<string> textList = new List<string>();\n    void Awake()\n    {\n        GetTextFormFilr(textAsset);\n    }\n    private void OnEnable()\n    {\n        //ÂΩìÂêØÁî®Êó∂ÔºåÊòæÁ§∫Á¨¨‰∏ÄÂè•ËØù\n        StartCoroutine(SetText());\n    }\n    // Update is called once per frame\n    void Update()\n    {\n        if (Input.GetKeyDown(KeyCode.Space))\n        {\n            if (index >= textList.Count)\n            {\n                gameObject.SetActive(false);\n                index = 0;\n            }\n            else if (textFinshed)\n            {\n                //ÈÄêÂ≠óÊòæÁ§∫\n                StartCoroutine(SetText());\n            }\n            else if (!textFinshed)\n            {\n                //ÁªìÊùüÂçèÁ®ãÔºåÁõ¥Êé•ÊòæÁ§∫\n                StopCoroutine(SetText());\n                textFinshed = true;\n                \n                textLabel.text = textList[index];\n                index++;\n            }\n\n\n        }\n    }\n\n    void GetTextFormFilr(TextAsset text)\n    {\n        textList.Clear();\n        index = 0;\n        //ÈÄöËøáÂõûËΩ¶Á¨¶ÂàÜÂâ≤\n        var list = text.text.Split('\\n');\n        foreach (var item in list)\n        {\n            textList.Add(item);\n        }\n    }\n\n    IEnumerator SetText()\n    {\n        textFinshed = false;\n        //Ê∏ÖÁ©∫textLabelÈáåÁöÑÊñáÂ≠ó\n        textLabel.text = \"\";\n        //ËøôÈáå‰∏çÊ∏ÖÊ•öÊòØ‰∏çÊòØÊàëÁöÑÊñáÊú¨ÁöÑÈóÆÈ¢òÔºåËé∑ÂèñÊó∂ÊÄªÊòØËé∑ÂèñÂà∞‰∏§‰∏™Â≠óÁ¨¶Ôºå‰ΩÜ‰∏çÁü•ÈÅìÁ¨¨‰∫å‰∏™Â≠óÁ¨¶ÊòØ‰ªÄ‰πà\n        switch (textList[index][0])\n        {\n            case 'A':\n                image.sprite = headA;\n                index++;\n                break;\n\n            case 'B':\n                image.sprite = headB;\n                index++;\n                break;\n        }\n        //ÊØèÈöîtimeSpeedÁßíËøõË°åÊòæÁ§∫‰∏ÄÊ¨°\n        for (int i = 0; i < textList[index].Length; i++)\n        {\n            textLabel.text += textList[index][i];\n\n            yield return new WaitForSeconds(timeSpeed);\n        }\n        //Êõ¥ÊîπindexÂÄºÔºåÂπ∂Êõ¥ÊîπÁä∂ÊÄÅ\n        \n        textFinshed = true;\n        index++;\n\n    }\n\n}\n\n```\n\n","slug":"004_Dialog","published":1,"updated":"2022-06-21T14:26:21.706Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4o9jzik0009isv9f1rvheda","content":"<h1 id=\"Introduce\"><a href=\"#Introduce\" class=\"headerlink\" title=\"Introduce\"></a>Introduce</h1><p>È¶ñÂÖàËøòÊòØË¶ÅÊÑüË∞¢È∫¶Êâ£ËÄÅÂ∏àÔºå<a href=\"https://www.bilibili.com/video/BV1WJ411Y71J/?spm_id_from=333.788.recommend_more_video.1\">ËßÜÈ¢ëÈìæÊé•</a>„ÄÇ</p>\n<p><img src=\"/2022/06/04/004_Dialog/image-20220604181812326.png\" alt=\"image-20220604181812326\"></p>\n<h1 id=\"ÊñáÊú¨ËØªÂèñ‰∏éÊòæÁ§∫\"><a href=\"#ÊñáÊú¨ËØªÂèñ‰∏éÊòæÁ§∫\" class=\"headerlink\" title=\"ÊñáÊú¨ËØªÂèñ‰∏éÊòæÁ§∫\"></a>ÊñáÊú¨ËØªÂèñ‰∏éÊòæÁ§∫</h1><p><strong>ËøôÊòØ‰∏™txtÊñá‰ª∂</strong>ÔºåËÆ∞ÂΩï‰∫ÜÂØπËØùÁöÑÂÜÖÂÆπÔºåÊ†πÊçÆ A or B Âà§Êñ≠ËØ¥ËØùÁöÑ‰∫∫Áâ©</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">A</span><br><span class=\"line\">1:zheshidiyijv1?</span><br><span class=\"line\">B</span><br><span class=\"line\">2:zheshidierjv2!!!!!</span><br><span class=\"line\">A</span><br><span class=\"line\">3:disanjvzaizheli.......</span><br><span class=\"line\">B</span><br><span class=\"line\">4:disijvyaojiehsule////</span><br><span class=\"line\">A</span><br><span class=\"line\">5:ending&#x27;&#x27;&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>\n\n\n\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.UI;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">Dialog</span> : <span class=\"title\">MonoBehaviour</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    [<span class=\"meta\">Header(<span class=\"meta-string\">&quot;ÁªÑ‰ª∂&quot;</span>)</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> Text textLabel;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> Image image;</span><br><span class=\"line\"></span><br><span class=\"line\">    [<span class=\"meta\">Header(<span class=\"meta-string\">&quot;ÊñáÊú¨&quot;</span>)</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> TextAsset textAsset;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> index;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//Â≠òÂÇ®ÊñáÊú¨</span></span><br><span class=\"line\">    List&lt;<span class=\"built_in\">string</span>&gt; textList = <span class=\"keyword\">new</span> List&lt;<span class=\"built_in\">string</span>&gt;();</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Awake</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        GetTextFormFilr(textAsset);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">OnEnable</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//ÂΩìÂêØÁî®Êó∂ÔºåÊòæÁ§∫Á¨¨‰∏ÄÂè•ËØù</span></span><br><span class=\"line\">        textLabel.text = textList[index++];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// Update is called once per frame</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Update</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (Input.GetKeyDown(KeyCode.Space))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (index == textList.Count)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                gameObject.SetActive(<span class=\"literal\">false</span>);</span><br><span class=\"line\">                index = <span class=\"number\">0</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span></span><br><span class=\"line\">                textLabel.text = textList[index++];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">GetTextFormFilr</span>(<span class=\"params\">TextAsset text</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        textList.Clear();</span><br><span class=\"line\">        index = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"comment\">//ÈÄöËøáÂõûËΩ¶Á¨¶ÂàÜÂâ≤</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> list = text.text.Split(<span class=\"string\">&#x27;\\n&#x27;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"keyword\">var</span> item <span class=\"keyword\">in</span> list)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            textList.Add(item);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"ÂçèÁ®ãÈÄêÂ≠óÊòæÁ§∫\"><a href=\"#ÂçèÁ®ãÈÄêÂ≠óÊòæÁ§∫\" class=\"headerlink\" title=\"ÂçèÁ®ãÈÄêÂ≠óÊòæÁ§∫\"></a>ÂçèÁ®ãÈÄêÂ≠óÊòæÁ§∫</h1><p>‰ΩøÁî®ÂçèÁ®ãÔºåÈÄöËøáËÆæÁΩÆÂèòÈáè<code>timeSpeed</code>ÂéªËÆæÁΩÆÊØè‰∏™Â≠óÁöÑÈó¥ÈöîÊó∂Èó¥</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.UI;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">Dialog</span> : <span class=\"title\">MonoBehaviour</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    [<span class=\"meta\">Header(<span class=\"meta-string\">&quot;ÁªÑ‰ª∂&quot;</span>)</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> Text textLabel;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> Image image;</span><br><span class=\"line\"></span><br><span class=\"line\">    [<span class=\"meta\">Header(<span class=\"meta-string\">&quot;ÊñáÊú¨&quot;</span>)</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> TextAsset textAsset;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> index;</span><br><span class=\"line\">    [<span class=\"meta\">Header(<span class=\"meta-string\">&quot;Â§¥ÂÉè&quot;</span>)</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> Sprite headA, headB;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> timeSpeed;</span><br><span class=\"line\">    <span class=\"comment\">//Âà§Êñ≠ÂçèÁ®ãÊòØÂê¶ÁªìÊùüÔºåÈò≤Ê≠¢Â§ö‰∏™ÂçèÁ®ãÂêåÊó∂Âá∫Áé∞</span></span><br><span class=\"line\">    <span class=\"comment\">//ÂàùÂßãÊó∂ËÆæÁΩÆ‰∏∫true</span></span><br><span class=\"line\">    <span class=\"built_in\">bool</span> textFinshed = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    <span class=\"comment\">//Â≠òÂÇ®ÊñáÊú¨</span></span><br><span class=\"line\">    List&lt;<span class=\"built_in\">string</span>&gt; textList = <span class=\"keyword\">new</span> List&lt;<span class=\"built_in\">string</span>&gt;();</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Awake</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        GetTextFormFilr(textAsset);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">OnEnable</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//ÂΩìÂêØÁî®Êó∂ÔºåÊòæÁ§∫Á¨¨‰∏ÄÂè•ËØù</span></span><br><span class=\"line\">        StartCoroutine(SetText());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// Update is called once per frame</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Update</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (Input.GetKeyDown(KeyCode.Space))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (index == textList.Count)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                gameObject.SetActive(<span class=\"literal\">false</span>);</span><br><span class=\"line\">                index = <span class=\"number\">0</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(textFinshed)</span><br><span class=\"line\">                StartCoroutine(SetText());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">GetTextFormFilr</span>(<span class=\"params\">TextAsset text</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        textList.Clear();</span><br><span class=\"line\">        index = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"comment\">//ÈÄöËøáÂõûËΩ¶Á¨¶ÂàÜÂâ≤</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> list = text.text.Split(<span class=\"string\">&#x27;\\n&#x27;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"keyword\">var</span> item <span class=\"keyword\">in</span> list)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            textList.Add(item);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\">IEnumerator <span class=\"title\">SetText</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        textFinshed = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        <span class=\"comment\">//Ê∏ÖÁ©∫textLabelÈáåÁöÑÊñáÂ≠ó</span></span><br><span class=\"line\">        textLabel.text = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">        <span class=\"comment\">//ËøôÈáå‰∏çÊ∏ÖÊ•öÊòØ‰∏çÊòØÊàëÁöÑÊñáÊú¨ÁöÑÈóÆÈ¢òÔºåËé∑ÂèñÊó∂ÊÄªÊòØËé∑ÂèñÂà∞‰∏§‰∏™Â≠óÁ¨¶Ôºå‰ΩÜ‰∏çÁü•ÈÅìÁ¨¨‰∫å‰∏™Â≠óÁ¨¶ÊòØ‰ªÄ‰πà</span></span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (textList[index][<span class=\"number\">0</span>])</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;A&#x27;</span>:</span><br><span class=\"line\">                image.sprite = headA;</span><br><span class=\"line\">                index++;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;B&#x27;</span>:</span><br><span class=\"line\">                image.sprite = headB;</span><br><span class=\"line\">                index++;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//ÊØèÈöîtimeSpeedÁßíËøõË°åÊòæÁ§∫‰∏ÄÊ¨°</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"built_in\">int</span> i = <span class=\"number\">0</span>; i &lt; textList[index].Length; i++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            textLabel.text += textList[index][i];</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">yield</span> <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title\">WaitForSeconds</span>(<span class=\"params\">timeSpeed</span>)</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//Êõ¥ÊîπindexÂÄºÔºåÂπ∂Êõ¥ÊîπÁä∂ÊÄÅ</span></span><br><span class=\"line\">        index++;</span><br><span class=\"line\">        textFinshed = <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"‰∏≠Êñ≠ÂçèÁ®ã\"><a href=\"#‰∏≠Êñ≠ÂçèÁ®ã\" class=\"headerlink\" title=\"‰∏≠Êñ≠ÂçèÁ®ã\"></a>‰∏≠Êñ≠ÂçèÁ®ã</h1><p>ÈÄöËøáÂà§Êñ≠ËæìÂÖ•Êó∂ÁöÑÁä∂ÊÄÅÂà§Êñ≠ÔºåÈÄâÊã©ÊòØÂê¶‰∏≠Êñ≠ÂçèÁ®ãÁõ¥Êé•ÊòæÁ§∫</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.UI;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">Dialog</span> : <span class=\"title\">MonoBehaviour</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    [<span class=\"meta\">Header(<span class=\"meta-string\">&quot;ÁªÑ‰ª∂&quot;</span>)</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> Text textLabel;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> Image image;</span><br><span class=\"line\"></span><br><span class=\"line\">    [<span class=\"meta\">Header(<span class=\"meta-string\">&quot;ÊñáÊú¨&quot;</span>)</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> TextAsset textAsset;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> index;</span><br><span class=\"line\">    [<span class=\"meta\">Header(<span class=\"meta-string\">&quot;Â§¥ÂÉè&quot;</span>)</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> Sprite headA, headB;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> timeSpeed;</span><br><span class=\"line\">    <span class=\"comment\">//Âà§Êñ≠ÂçèÁ®ãÊòØÂê¶ÁªìÊùüÔºåÈò≤Ê≠¢Â§ö‰∏™ÂçèÁ®ãÂêåÊó∂Âá∫Áé∞</span></span><br><span class=\"line\">    <span class=\"comment\">//ÂàùÂßãÊó∂ËÆæÁΩÆ‰∏∫true</span></span><br><span class=\"line\">    <span class=\"built_in\">bool</span> textFinshed = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    <span class=\"comment\">//Â≠òÂÇ®ÊñáÊú¨</span></span><br><span class=\"line\">    List&lt;<span class=\"built_in\">string</span>&gt; textList = <span class=\"keyword\">new</span> List&lt;<span class=\"built_in\">string</span>&gt;();</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Awake</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        GetTextFormFilr(textAsset);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">OnEnable</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//ÂΩìÂêØÁî®Êó∂ÔºåÊòæÁ§∫Á¨¨‰∏ÄÂè•ËØù</span></span><br><span class=\"line\">        StartCoroutine(SetText());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// Update is called once per frame</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Update</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (Input.GetKeyDown(KeyCode.Space))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (index &gt;= textList.Count)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                gameObject.SetActive(<span class=\"literal\">false</span>);</span><br><span class=\"line\">                index = <span class=\"number\">0</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (textFinshed)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"comment\">//ÈÄêÂ≠óÊòæÁ§∫</span></span><br><span class=\"line\">                StartCoroutine(SetText());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!textFinshed)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"comment\">//ÁªìÊùüÂçèÁ®ãÔºåÁõ¥Êé•ÊòæÁ§∫</span></span><br><span class=\"line\">                StopCoroutine(SetText());</span><br><span class=\"line\">                textFinshed = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                </span><br><span class=\"line\">                textLabel.text = textList[index];</span><br><span class=\"line\">                index++;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">GetTextFormFilr</span>(<span class=\"params\">TextAsset text</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        textList.Clear();</span><br><span class=\"line\">        index = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"comment\">//ÈÄöËøáÂõûËΩ¶Á¨¶ÂàÜÂâ≤</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> list = text.text.Split(<span class=\"string\">&#x27;\\n&#x27;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"keyword\">var</span> item <span class=\"keyword\">in</span> list)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            textList.Add(item);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\">IEnumerator <span class=\"title\">SetText</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        textFinshed = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        <span class=\"comment\">//Ê∏ÖÁ©∫textLabelÈáåÁöÑÊñáÂ≠ó</span></span><br><span class=\"line\">        textLabel.text = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">        <span class=\"comment\">//ËøôÈáå‰∏çÊ∏ÖÊ•öÊòØ‰∏çÊòØÊàëÁöÑÊñáÊú¨ÁöÑÈóÆÈ¢òÔºåËé∑ÂèñÊó∂ÊÄªÊòØËé∑ÂèñÂà∞‰∏§‰∏™Â≠óÁ¨¶Ôºå‰ΩÜ‰∏çÁü•ÈÅìÁ¨¨‰∫å‰∏™Â≠óÁ¨¶ÊòØ‰ªÄ‰πà</span></span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (textList[index][<span class=\"number\">0</span>])</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;A&#x27;</span>:</span><br><span class=\"line\">                image.sprite = headA;</span><br><span class=\"line\">                index++;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;B&#x27;</span>:</span><br><span class=\"line\">                image.sprite = headB;</span><br><span class=\"line\">                index++;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//ÊØèÈöîtimeSpeedÁßíËøõË°åÊòæÁ§∫‰∏ÄÊ¨°</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"built_in\">int</span> i = <span class=\"number\">0</span>; i &lt; textList[index].Length; i++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            textLabel.text += textList[index][i];</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">yield</span> <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title\">WaitForSeconds</span>(<span class=\"params\">timeSpeed</span>)</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//Êõ¥ÊîπindexÂÄºÔºåÂπ∂Êõ¥ÊîπÁä∂ÊÄÅ</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        textFinshed = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        index++;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Introduce\"><a href=\"#Introduce\" class=\"headerlink\" title=\"Introduce\"></a>Introduce</h1><p>È¶ñÂÖàËøòÊòØË¶ÅÊÑüË∞¢È∫¶Êâ£ËÄÅÂ∏àÔºå<a href=\"https://www.bilibili.com/video/BV1WJ411Y71J/?spm_id_from=333.788.recommend_more_video.1\">ËßÜÈ¢ëÈìæÊé•</a>„ÄÇ</p>\n<p><img src=\"/2022/06/04/004_Dialog/image-20220604181812326.png\" alt=\"image-20220604181812326\"></p>\n<h1 id=\"ÊñáÊú¨ËØªÂèñ‰∏éÊòæÁ§∫\"><a href=\"#ÊñáÊú¨ËØªÂèñ‰∏éÊòæÁ§∫\" class=\"headerlink\" title=\"ÊñáÊú¨ËØªÂèñ‰∏éÊòæÁ§∫\"></a>ÊñáÊú¨ËØªÂèñ‰∏éÊòæÁ§∫</h1><p><strong>ËøôÊòØ‰∏™txtÊñá‰ª∂</strong>ÔºåËÆ∞ÂΩï‰∫ÜÂØπËØùÁöÑÂÜÖÂÆπÔºåÊ†πÊçÆ A or B Âà§Êñ≠ËØ¥ËØùÁöÑ‰∫∫Áâ©</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">A</span><br><span class=\"line\">1:zheshidiyijv1?</span><br><span class=\"line\">B</span><br><span class=\"line\">2:zheshidierjv2!!!!!</span><br><span class=\"line\">A</span><br><span class=\"line\">3:disanjvzaizheli.......</span><br><span class=\"line\">B</span><br><span class=\"line\">4:disijvyaojiehsule////</span><br><span class=\"line\">A</span><br><span class=\"line\">5:ending&#x27;&#x27;&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>\n\n\n\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.UI;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">Dialog</span> : <span class=\"title\">MonoBehaviour</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    [<span class=\"meta\">Header(<span class=\"meta-string\">&quot;ÁªÑ‰ª∂&quot;</span>)</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> Text textLabel;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> Image image;</span><br><span class=\"line\"></span><br><span class=\"line\">    [<span class=\"meta\">Header(<span class=\"meta-string\">&quot;ÊñáÊú¨&quot;</span>)</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> TextAsset textAsset;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> index;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//Â≠òÂÇ®ÊñáÊú¨</span></span><br><span class=\"line\">    List&lt;<span class=\"built_in\">string</span>&gt; textList = <span class=\"keyword\">new</span> List&lt;<span class=\"built_in\">string</span>&gt;();</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Awake</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        GetTextFormFilr(textAsset);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">OnEnable</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//ÂΩìÂêØÁî®Êó∂ÔºåÊòæÁ§∫Á¨¨‰∏ÄÂè•ËØù</span></span><br><span class=\"line\">        textLabel.text = textList[index++];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// Update is called once per frame</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Update</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (Input.GetKeyDown(KeyCode.Space))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (index == textList.Count)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                gameObject.SetActive(<span class=\"literal\">false</span>);</span><br><span class=\"line\">                index = <span class=\"number\">0</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span></span><br><span class=\"line\">                textLabel.text = textList[index++];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">GetTextFormFilr</span>(<span class=\"params\">TextAsset text</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        textList.Clear();</span><br><span class=\"line\">        index = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"comment\">//ÈÄöËøáÂõûËΩ¶Á¨¶ÂàÜÂâ≤</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> list = text.text.Split(<span class=\"string\">&#x27;\\n&#x27;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"keyword\">var</span> item <span class=\"keyword\">in</span> list)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            textList.Add(item);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"ÂçèÁ®ãÈÄêÂ≠óÊòæÁ§∫\"><a href=\"#ÂçèÁ®ãÈÄêÂ≠óÊòæÁ§∫\" class=\"headerlink\" title=\"ÂçèÁ®ãÈÄêÂ≠óÊòæÁ§∫\"></a>ÂçèÁ®ãÈÄêÂ≠óÊòæÁ§∫</h1><p>‰ΩøÁî®ÂçèÁ®ãÔºåÈÄöËøáËÆæÁΩÆÂèòÈáè<code>timeSpeed</code>ÂéªËÆæÁΩÆÊØè‰∏™Â≠óÁöÑÈó¥ÈöîÊó∂Èó¥</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.UI;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">Dialog</span> : <span class=\"title\">MonoBehaviour</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    [<span class=\"meta\">Header(<span class=\"meta-string\">&quot;ÁªÑ‰ª∂&quot;</span>)</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> Text textLabel;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> Image image;</span><br><span class=\"line\"></span><br><span class=\"line\">    [<span class=\"meta\">Header(<span class=\"meta-string\">&quot;ÊñáÊú¨&quot;</span>)</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> TextAsset textAsset;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> index;</span><br><span class=\"line\">    [<span class=\"meta\">Header(<span class=\"meta-string\">&quot;Â§¥ÂÉè&quot;</span>)</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> Sprite headA, headB;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> timeSpeed;</span><br><span class=\"line\">    <span class=\"comment\">//Âà§Êñ≠ÂçèÁ®ãÊòØÂê¶ÁªìÊùüÔºåÈò≤Ê≠¢Â§ö‰∏™ÂçèÁ®ãÂêåÊó∂Âá∫Áé∞</span></span><br><span class=\"line\">    <span class=\"comment\">//ÂàùÂßãÊó∂ËÆæÁΩÆ‰∏∫true</span></span><br><span class=\"line\">    <span class=\"built_in\">bool</span> textFinshed = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    <span class=\"comment\">//Â≠òÂÇ®ÊñáÊú¨</span></span><br><span class=\"line\">    List&lt;<span class=\"built_in\">string</span>&gt; textList = <span class=\"keyword\">new</span> List&lt;<span class=\"built_in\">string</span>&gt;();</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Awake</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        GetTextFormFilr(textAsset);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">OnEnable</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//ÂΩìÂêØÁî®Êó∂ÔºåÊòæÁ§∫Á¨¨‰∏ÄÂè•ËØù</span></span><br><span class=\"line\">        StartCoroutine(SetText());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// Update is called once per frame</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Update</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (Input.GetKeyDown(KeyCode.Space))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (index == textList.Count)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                gameObject.SetActive(<span class=\"literal\">false</span>);</span><br><span class=\"line\">                index = <span class=\"number\">0</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(textFinshed)</span><br><span class=\"line\">                StartCoroutine(SetText());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">GetTextFormFilr</span>(<span class=\"params\">TextAsset text</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        textList.Clear();</span><br><span class=\"line\">        index = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"comment\">//ÈÄöËøáÂõûËΩ¶Á¨¶ÂàÜÂâ≤</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> list = text.text.Split(<span class=\"string\">&#x27;\\n&#x27;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"keyword\">var</span> item <span class=\"keyword\">in</span> list)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            textList.Add(item);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\">IEnumerator <span class=\"title\">SetText</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        textFinshed = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        <span class=\"comment\">//Ê∏ÖÁ©∫textLabelÈáåÁöÑÊñáÂ≠ó</span></span><br><span class=\"line\">        textLabel.text = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">        <span class=\"comment\">//ËøôÈáå‰∏çÊ∏ÖÊ•öÊòØ‰∏çÊòØÊàëÁöÑÊñáÊú¨ÁöÑÈóÆÈ¢òÔºåËé∑ÂèñÊó∂ÊÄªÊòØËé∑ÂèñÂà∞‰∏§‰∏™Â≠óÁ¨¶Ôºå‰ΩÜ‰∏çÁü•ÈÅìÁ¨¨‰∫å‰∏™Â≠óÁ¨¶ÊòØ‰ªÄ‰πà</span></span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (textList[index][<span class=\"number\">0</span>])</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;A&#x27;</span>:</span><br><span class=\"line\">                image.sprite = headA;</span><br><span class=\"line\">                index++;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;B&#x27;</span>:</span><br><span class=\"line\">                image.sprite = headB;</span><br><span class=\"line\">                index++;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//ÊØèÈöîtimeSpeedÁßíËøõË°åÊòæÁ§∫‰∏ÄÊ¨°</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"built_in\">int</span> i = <span class=\"number\">0</span>; i &lt; textList[index].Length; i++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            textLabel.text += textList[index][i];</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">yield</span> <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title\">WaitForSeconds</span>(<span class=\"params\">timeSpeed</span>)</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//Êõ¥ÊîπindexÂÄºÔºåÂπ∂Êõ¥ÊîπÁä∂ÊÄÅ</span></span><br><span class=\"line\">        index++;</span><br><span class=\"line\">        textFinshed = <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"‰∏≠Êñ≠ÂçèÁ®ã\"><a href=\"#‰∏≠Êñ≠ÂçèÁ®ã\" class=\"headerlink\" title=\"‰∏≠Êñ≠ÂçèÁ®ã\"></a>‰∏≠Êñ≠ÂçèÁ®ã</h1><p>ÈÄöËøáÂà§Êñ≠ËæìÂÖ•Êó∂ÁöÑÁä∂ÊÄÅÂà§Êñ≠ÔºåÈÄâÊã©ÊòØÂê¶‰∏≠Êñ≠ÂçèÁ®ãÁõ¥Êé•ÊòæÁ§∫</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System.Collections;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine.UI;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">Dialog</span> : <span class=\"title\">MonoBehaviour</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    [<span class=\"meta\">Header(<span class=\"meta-string\">&quot;ÁªÑ‰ª∂&quot;</span>)</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> Text textLabel;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> Image image;</span><br><span class=\"line\"></span><br><span class=\"line\">    [<span class=\"meta\">Header(<span class=\"meta-string\">&quot;ÊñáÊú¨&quot;</span>)</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> TextAsset textAsset;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">int</span> index;</span><br><span class=\"line\">    [<span class=\"meta\">Header(<span class=\"meta-string\">&quot;Â§¥ÂÉè&quot;</span>)</span>]</span><br><span class=\"line\">    <span class=\"keyword\">public</span> Sprite headA, headB;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">float</span> timeSpeed;</span><br><span class=\"line\">    <span class=\"comment\">//Âà§Êñ≠ÂçèÁ®ãÊòØÂê¶ÁªìÊùüÔºåÈò≤Ê≠¢Â§ö‰∏™ÂçèÁ®ãÂêåÊó∂Âá∫Áé∞</span></span><br><span class=\"line\">    <span class=\"comment\">//ÂàùÂßãÊó∂ËÆæÁΩÆ‰∏∫true</span></span><br><span class=\"line\">    <span class=\"built_in\">bool</span> textFinshed = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    <span class=\"comment\">//Â≠òÂÇ®ÊñáÊú¨</span></span><br><span class=\"line\">    List&lt;<span class=\"built_in\">string</span>&gt; textList = <span class=\"keyword\">new</span> List&lt;<span class=\"built_in\">string</span>&gt;();</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Awake</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        GetTextFormFilr(textAsset);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">OnEnable</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//ÂΩìÂêØÁî®Êó∂ÔºåÊòæÁ§∫Á¨¨‰∏ÄÂè•ËØù</span></span><br><span class=\"line\">        StartCoroutine(SetText());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// Update is called once per frame</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Update</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (Input.GetKeyDown(KeyCode.Space))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (index &gt;= textList.Count)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                gameObject.SetActive(<span class=\"literal\">false</span>);</span><br><span class=\"line\">                index = <span class=\"number\">0</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (textFinshed)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"comment\">//ÈÄêÂ≠óÊòæÁ§∫</span></span><br><span class=\"line\">                StartCoroutine(SetText());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!textFinshed)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"comment\">//ÁªìÊùüÂçèÁ®ãÔºåÁõ¥Êé•ÊòæÁ§∫</span></span><br><span class=\"line\">                StopCoroutine(SetText());</span><br><span class=\"line\">                textFinshed = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                </span><br><span class=\"line\">                textLabel.text = textList[index];</span><br><span class=\"line\">                index++;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">GetTextFormFilr</span>(<span class=\"params\">TextAsset text</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        textList.Clear();</span><br><span class=\"line\">        index = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"comment\">//ÈÄöËøáÂõûËΩ¶Á¨¶ÂàÜÂâ≤</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> list = text.text.Split(<span class=\"string\">&#x27;\\n&#x27;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"keyword\">var</span> item <span class=\"keyword\">in</span> list)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            textList.Add(item);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\">IEnumerator <span class=\"title\">SetText</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        textFinshed = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        <span class=\"comment\">//Ê∏ÖÁ©∫textLabelÈáåÁöÑÊñáÂ≠ó</span></span><br><span class=\"line\">        textLabel.text = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">        <span class=\"comment\">//ËøôÈáå‰∏çÊ∏ÖÊ•öÊòØ‰∏çÊòØÊàëÁöÑÊñáÊú¨ÁöÑÈóÆÈ¢òÔºåËé∑ÂèñÊó∂ÊÄªÊòØËé∑ÂèñÂà∞‰∏§‰∏™Â≠óÁ¨¶Ôºå‰ΩÜ‰∏çÁü•ÈÅìÁ¨¨‰∫å‰∏™Â≠óÁ¨¶ÊòØ‰ªÄ‰πà</span></span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (textList[index][<span class=\"number\">0</span>])</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;A&#x27;</span>:</span><br><span class=\"line\">                image.sprite = headA;</span><br><span class=\"line\">                index++;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;B&#x27;</span>:</span><br><span class=\"line\">                image.sprite = headB;</span><br><span class=\"line\">                index++;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//ÊØèÈöîtimeSpeedÁßíËøõË°åÊòæÁ§∫‰∏ÄÊ¨°</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"built_in\">int</span> i = <span class=\"number\">0</span>; i &lt; textList[index].Length; i++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            textLabel.text += textList[index][i];</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">yield</span> <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title\">WaitForSeconds</span>(<span class=\"params\">timeSpeed</span>)</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//Êõ¥ÊîπindexÂÄºÔºåÂπ∂Êõ¥ÊîπÁä∂ÊÄÅ</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        textFinshed = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        index++;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n"}],"PostAsset":[{"_id":"source/_posts/001_hexo/image-20210123190241565.png","post":"cl4o9jzi70003isv9d3rm2zck","slug":"image-20210123190241565.png","modified":1,"renderable":1},{"_id":"source/_posts/001_hexo/image-20210123190247657.png","post":"cl4o9jzi70003isv9d3rm2zck","slug":"image-20210123190247657.png","modified":1,"renderable":1},{"_id":"source/_posts/001_hexo/image-20210123190444101.png","post":"cl4o9jzi70003isv9d3rm2zck","slug":"image-20210123190444101.png","modified":1,"renderable":1},{"_id":"source/_posts/001_hexo/image-20210123203426310.png","post":"cl4o9jzi70003isv9d3rm2zck","slug":"image-20210123203426310.png","modified":1,"renderable":1},{"_id":"source/_posts/001_hexo/image-20220110162452660.png","post":"cl4o9jzi70003isv9d3rm2zck","slug":"image-20220110162452660.png","modified":1,"renderable":1},{"_id":"source/_posts/001_hexo/image-20220110162645465.png","post":"cl4o9jzi70003isv9d3rm2zck","slug":"image-20220110162645465.png","modified":1,"renderable":1},{"_id":"source/_posts/001_hexo/image-20220110164357577.png","post":"cl4o9jzi70003isv9d3rm2zck","slug":"image-20220110164357577.png","modified":1,"renderable":1},{"_id":"source/_posts/001_hexo/image-20220110165134907.png","post":"cl4o9jzi70003isv9d3rm2zck","slug":"image-20220110165134907.png","modified":1,"renderable":1},{"_id":"source/_posts/001_hexo/image-20220110165549516.png","post":"cl4o9jzi70003isv9d3rm2zck","slug":"image-20220110165549516.png","modified":1,"renderable":1},{"_id":"source/_posts/001_hexo/image-20220111112820182.png","post":"cl4o9jzi70003isv9d3rm2zck","slug":"image-20220111112820182.png","modified":1,"renderable":1},{"_id":"source/_posts/001_hexo/image-20220111114426389.png","post":"cl4o9jzi70003isv9d3rm2zck","slug":"image-20220111114426389.png","modified":1,"renderable":1},{"_id":"source/_posts/001_hexo/image-20220111114517951.png","post":"cl4o9jzi70003isv9d3rm2zck","slug":"image-20220111114517951.png","modified":1,"renderable":1},{"_id":"source/_posts/001_hexo/image-20220111115043380.png","post":"cl4o9jzi70003isv9d3rm2zck","slug":"image-20220111115043380.png","modified":1,"renderable":1},{"_id":"source/_posts/003_Inventory/image-20220603143654206.png","post":"cl4o9jzic0005isv9f3ktffid","slug":"image-20220603143654206.png","modified":1,"renderable":1},{"_id":"source/_posts/004_Dialog/image-20220604181812326.png","post":"cl4o9jzik0009isv9f1rvheda","slug":"image-20220604181812326.png","modified":1,"renderable":1}],"PostCategory":[{"post_id":"cl4o9jzi70003isv9d3rm2zck","category_id":"cl4o9jzie0006isv9bo5633n3","_id":"cl4o9jzim000cisv95anyec0x"},{"post_id":"cl4o9jzic0005isv9f3ktffid","category_id":"cl4o9jzil000aisv97ytucirq","_id":"cl4o9jziq000gisv9aqsogw6i"},{"post_id":"cl4o9jzih0007isv90n9sgnuq","category_id":"cl4o9jzil000aisv97ytucirq","_id":"cl4o9jzir000jisv94vif564z"},{"post_id":"cl4o9jzik0009isv9f1rvheda","category_id":"cl4o9jzil000aisv97ytucirq","_id":"cl4o9jzis000nisv92e8qd7pj"}],"PostTag":[{"post_id":"cl4o9jzic0005isv9f3ktffid","tag_id":"cl4o9jzii0008isv95yszcmhr","_id":"cl4o9jzir000iisv95f4o8bh5"},{"post_id":"cl4o9jzic0005isv9f3ktffid","tag_id":"cl4o9jzim000bisv9gsr9cn6f","_id":"cl4o9jzir000kisv913z5dfyf"},{"post_id":"cl4o9jzic0005isv9f3ktffid","tag_id":"cl4o9jzip000eisv9bp2z5tqh","_id":"cl4o9jzis000misv9bux2gxeg"},{"post_id":"cl4o9jzih0007isv90n9sgnuq","tag_id":"cl4o9jzii0008isv95yszcmhr","_id":"cl4o9jzit000qisv9hn7zgbds"},{"post_id":"cl4o9jzih0007isv90n9sgnuq","tag_id":"cl4o9jzim000bisv9gsr9cn6f","_id":"cl4o9jzit000risv96n1z5igl"},{"post_id":"cl4o9jzih0007isv90n9sgnuq","tag_id":"cl4o9jzip000eisv9bp2z5tqh","_id":"cl4o9jziu000tisv93xdnh1i6"},{"post_id":"cl4o9jzik0009isv9f1rvheda","tag_id":"cl4o9jzii0008isv95yszcmhr","_id":"cl4o9jziu000visv93t2zgt3m"},{"post_id":"cl4o9jzik0009isv9f1rvheda","tag_id":"cl4o9jzim000bisv9gsr9cn6f","_id":"cl4o9jziv000wisv95rsj3kr1"},{"post_id":"cl4o9jzik0009isv9f1rvheda","tag_id":"cl4o9jzip000eisv9bp2z5tqh","_id":"cl4o9jziv000xisv997auenda"}],"Tag":[{"name":"Games","_id":"cl4o9jzii0008isv95yszcmhr"},{"name":"Ê∏∏ÊàèÂà∂‰Ωú","_id":"cl4o9jzim000bisv9gsr9cn6f"},{"name":"M_studio","_id":"cl4o9jzip000eisv9bp2z5tqh"}]}}